(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function vf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Bu={exports:{}},$a={},Hu={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kl=Symbol.for("react.element"),xf=Symbol.for("react.portal"),wf=Symbol.for("react.fragment"),kf=Symbol.for("react.strict_mode"),Mf=Symbol.for("react.profiler"),Sf=Symbol.for("react.provider"),Cf=Symbol.for("react.context"),bf=Symbol.for("react.forward_ref"),Nf=Symbol.for("react.suspense"),zf=Symbol.for("react.memo"),Ef=Symbol.for("react.lazy"),xc=Symbol.iterator;function Pf(e){return e===null||typeof e!="object"?null:(e=xc&&e[xc]||e["@@iterator"],typeof e=="function"?e:null)}var Gu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vu=Object.assign,Uu={};function No(e,t,n){this.props=e,this.context=t,this.refs=Uu,this.updater=n||Gu}No.prototype.isReactComponent={};No.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};No.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Xu(){}Xu.prototype=No.prototype;function Ms(e,t,n){this.props=e,this.context=t,this.refs=Uu,this.updater=n||Gu}var Ss=Ms.prototype=new Xu;Ss.constructor=Ms;Vu(Ss,No.prototype);Ss.isPureReactComponent=!0;var wc=Array.isArray,Yu=Object.prototype.hasOwnProperty,Cs={current:null},Wu={key:!0,ref:!0,__self:!0,__source:!0};function Qu(e,t,n){var r,o={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)Yu.call(t,r)&&!Wu.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(s===1)o.children=n;else if(1<s){for(var c=Array(s),d=0;d<s;d++)c[d]=arguments[d+2];o.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)o[r]===void 0&&(o[r]=s[r]);return{$$typeof:kl,type:e,key:l,ref:a,props:o,_owner:Cs.current}}function Tf(e,t){return{$$typeof:kl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function bs(e){return typeof e=="object"&&e!==null&&e.$$typeof===kl}function _f(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var kc=/\/+/g;function Ja(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_f(""+e.key):t.toString(36)}function Ql(e,t,n,r,o){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case kl:case xf:a=!0}}if(a)return a=e,o=o(a),e=r===""?"."+Ja(a,0):r,wc(o)?(n="",e!=null&&(n=e.replace(kc,"$&/")+"/"),Ql(o,t,n,"",function(d){return d})):o!=null&&(bs(o)&&(o=Tf(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(kc,"$&/")+"/")+e)),t.push(o)),1;if(a=0,r=r===""?".":r+":",wc(e))for(var s=0;s<e.length;s++){l=e[s];var c=r+Ja(l,s);a+=Ql(l,t,n,c,o)}else if(c=Pf(e),typeof c=="function")for(e=c.call(e),s=0;!(l=e.next()).done;)l=l.value,c=r+Ja(l,s++),a+=Ql(l,t,n,c,o);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function zl(e,t,n){if(e==null)return e;var r=[],o=0;return Ql(e,r,"","",function(l){return t.call(n,l,o++)}),r}function Rf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rn={current:null},Kl={transition:null},Lf={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:Kl,ReactCurrentOwner:Cs};function Ku(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:zl,forEach:function(e,t,n){zl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return zl(e,function(){t++}),t},toArray:function(e){return zl(e,function(t){return t})||[]},only:function(e){if(!bs(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ae.Component=No;Ae.Fragment=wf;Ae.Profiler=Mf;Ae.PureComponent=Ms;Ae.StrictMode=kf;Ae.Suspense=Nf;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lf;Ae.act=Ku;Ae.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Vu({},e.props),o=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=Cs.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)Yu.call(t,c)&&!Wu.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&s!==void 0?s[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){s=Array(c);for(var d=0;d<c;d++)s[d]=arguments[d+2];r.children=s}return{$$typeof:kl,type:e.type,key:o,ref:l,props:r,_owner:a}};Ae.createContext=function(e){return e={$$typeof:Cf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Sf,_context:e},e.Consumer=e};Ae.createElement=Qu;Ae.createFactory=function(e){var t=Qu.bind(null,e);return t.type=e,t};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(e){return{$$typeof:bf,render:e}};Ae.isValidElement=bs;Ae.lazy=function(e){return{$$typeof:Ef,_payload:{_status:-1,_result:e},_init:Rf}};Ae.memo=function(e,t){return{$$typeof:zf,type:e,compare:t===void 0?null:t}};Ae.startTransition=function(e){var t=Kl.transition;Kl.transition={};try{e()}finally{Kl.transition=t}};Ae.unstable_act=Ku;Ae.useCallback=function(e,t){return rn.current.useCallback(e,t)};Ae.useContext=function(e){return rn.current.useContext(e)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(e){return rn.current.useDeferredValue(e)};Ae.useEffect=function(e,t){return rn.current.useEffect(e,t)};Ae.useId=function(){return rn.current.useId()};Ae.useImperativeHandle=function(e,t,n){return rn.current.useImperativeHandle(e,t,n)};Ae.useInsertionEffect=function(e,t){return rn.current.useInsertionEffect(e,t)};Ae.useLayoutEffect=function(e,t){return rn.current.useLayoutEffect(e,t)};Ae.useMemo=function(e,t){return rn.current.useMemo(e,t)};Ae.useReducer=function(e,t,n){return rn.current.useReducer(e,t,n)};Ae.useRef=function(e){return rn.current.useRef(e)};Ae.useState=function(e){return rn.current.useState(e)};Ae.useSyncExternalStore=function(e,t,n){return rn.current.useSyncExternalStore(e,t,n)};Ae.useTransition=function(){return rn.current.useTransition()};Ae.version="18.3.1";Hu.exports=Ae;var g=Hu.exports;const $f=vf(g);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var If=g,Ff=Symbol.for("react.element"),Df=Symbol.for("react.fragment"),Of=Object.prototype.hasOwnProperty,jf=If.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Af={key:!0,ref:!0,__self:!0,__source:!0};function qu(e,t,n){var r,o={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Of.call(t,r)&&!Af.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Ff,type:e,key:l,ref:a,props:o,_owner:jf.current}}$a.Fragment=Df;$a.jsx=qu;$a.jsxs=qu;Bu.exports=$a;var Ns=Bu.exports;const ql=Ns.Fragment,i=Ns.jsx,b=Ns.jsxs;var Ei={},Ju={exports:{}},Sn={},Zu={exports:{}},e0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(X,oe){var ee=X.length;X.push(oe);e:for(;0<ee;){var ze=ee-1>>>1,Fe=X[ze];if(0<o(Fe,oe))X[ze]=oe,X[ee]=Fe,ee=ze;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var oe=X[0],ee=X.pop();if(ee!==oe){X[0]=ee;e:for(var ze=0,Fe=X.length,$t=Fe>>>1;ze<$t;){var zt=2*(ze+1)-1,ut=X[zt],Et=zt+1,It=X[Et];if(0>o(ut,ee))Et<Fe&&0>o(It,ut)?(X[ze]=It,X[Et]=ee,ze=Et):(X[ze]=ut,X[zt]=ee,ze=zt);else if(Et<Fe&&0>o(It,ee))X[ze]=It,X[Et]=ee,ze=Et;else break e}}return oe}function o(X,oe){var ee=X.sortIndex-oe.sortIndex;return ee!==0?ee:X.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var c=[],d=[],v=1,x=null,w=3,E=!1,S=!1,P=!1,I=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function u(X){for(var oe=n(d);oe!==null;){if(oe.callback===null)r(d);else if(oe.startTime<=X)r(d),oe.sortIndex=oe.expirationTime,t(c,oe);else break;oe=n(d)}}function y(X){if(P=!1,u(X),!S)if(n(c)!==null)S=!0,B(N);else{var oe=n(d);oe!==null&&q(y,oe.startTime-X)}}function N(X,oe){S=!1,P&&(P=!1,f(K),K=-1),E=!0;var ee=w;try{for(u(oe),x=n(c);x!==null&&(!(x.expirationTime>oe)||X&&!xe());){var ze=x.callback;if(typeof ze=="function"){x.callback=null,w=x.priorityLevel;var Fe=ze(x.expirationTime<=oe);oe=e.unstable_now(),typeof Fe=="function"?x.callback=Fe:x===n(c)&&r(c),u(oe)}else r(c);x=n(c)}if(x!==null)var $t=!0;else{var zt=n(d);zt!==null&&q(y,zt.startTime-oe),$t=!1}return $t}finally{x=null,w=ee,E=!1}}var H=!1,F=null,K=-1,ve=5,le=-1;function xe(){return!(e.unstable_now()-le<ve)}function Ye(){if(F!==null){var X=e.unstable_now();le=X;var oe=!0;try{oe=F(!0,X)}finally{oe?pe():(H=!1,F=null)}}else H=!1}var pe;if(typeof h=="function")pe=function(){h(Ye)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,te=ot.port2;ot.port1.onmessage=Ye,pe=function(){te.postMessage(null)}}else pe=function(){I(Ye,0)};function B(X){F=X,H||(H=!0,pe())}function q(X,oe){K=I(function(){X(e.unstable_now())},oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_continueExecution=function(){S||E||(S=!0,B(N))},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(X){switch(w){case 1:case 2:case 3:var oe=3;break;default:oe=w}var ee=w;w=oe;try{return X()}finally{w=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(X,oe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ee=w;w=X;try{return oe()}finally{w=ee}},e.unstable_scheduleCallback=function(X,oe,ee){var ze=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ze+ee:ze):ee=ze,X){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=ee+Fe,X={id:v++,callback:oe,priorityLevel:X,startTime:ee,expirationTime:Fe,sortIndex:-1},ee>ze?(X.sortIndex=ee,t(d,X),n(c)===null&&X===n(d)&&(P?(f(K),K=-1):P=!0,q(y,ee-ze))):(X.sortIndex=Fe,t(c,X),S||E||(S=!0,B(N))),X},e.unstable_shouldYield=xe,e.unstable_wrapCallback=function(X){var oe=w;return function(){var ee=w;w=oe;try{return X.apply(this,arguments)}finally{w=ee}}}})(e0);Zu.exports=e0;var Bf=Zu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hf=g,Mn=Bf;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var t0=new Set,ol={};function Ur(e,t){go(e,t),go(e+"Capture",t)}function go(e,t){for(ol[e]=t,e=0;e<t.length;e++)t0.add(t[e])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pi=Object.prototype.hasOwnProperty,Gf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mc={},Sc={};function Vf(e){return Pi.call(Sc,e)?!0:Pi.call(Mc,e)?!1:Gf.test(e)?Sc[e]=!0:(Mc[e]=!0,!1)}function Uf(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Xf(e,t,n,r){if(t===null||typeof t>"u"||Uf(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function on(e,t,n,r,o,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var Yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Yt[e]=new on(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Yt[t]=new on(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Yt[e]=new on(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Yt[e]=new on(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Yt[e]=new on(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Yt[e]=new on(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Yt[e]=new on(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Yt[e]=new on(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Yt[e]=new on(e,5,!1,e.toLowerCase(),null,!1,!1)});var zs=/[\-:]([a-z])/g;function Es(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(zs,Es);Yt[t]=new on(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(zs,Es);Yt[t]=new on(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(zs,Es);Yt[t]=new on(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Yt[e]=new on(e,1,!1,e.toLowerCase(),null,!1,!1)});Yt.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Yt[e]=new on(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ps(e,t,n,r){var o=Yt.hasOwnProperty(t)?Yt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Xf(t,n,o,r)&&(n=null),r||o===null?Vf(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var rr=Hf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,El=Symbol.for("react.element"),Jr=Symbol.for("react.portal"),Zr=Symbol.for("react.fragment"),Ts=Symbol.for("react.strict_mode"),Ti=Symbol.for("react.profiler"),n0=Symbol.for("react.provider"),r0=Symbol.for("react.context"),_s=Symbol.for("react.forward_ref"),_i=Symbol.for("react.suspense"),Ri=Symbol.for("react.suspense_list"),Rs=Symbol.for("react.memo"),ur=Symbol.for("react.lazy"),o0=Symbol.for("react.offscreen"),Cc=Symbol.iterator;function Lo(e){return e===null||typeof e!="object"?null:(e=Cc&&e[Cc]||e["@@iterator"],typeof e=="function"?e:null)}var yt=Object.assign,Za;function Uo(e){if(Za===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Za=t&&t[1]||""}return`
`+Za+e}var ei=!1;function ti(e,t){if(!e||ei)return"";ei=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),l=r.stack.split(`
`),a=o.length-1,s=l.length-1;1<=a&&0<=s&&o[a]!==l[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==l[s]){if(a!==1||s!==1)do if(a--,s--,0>s||o[a]!==l[s]){var c=`
`+o[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=s);break}}}finally{ei=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Uo(e):""}function Yf(e){switch(e.tag){case 5:return Uo(e.type);case 16:return Uo("Lazy");case 13:return Uo("Suspense");case 19:return Uo("SuspenseList");case 0:case 2:case 15:return e=ti(e.type,!1),e;case 11:return e=ti(e.type.render,!1),e;case 1:return e=ti(e.type,!0),e;default:return""}}function Li(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zr:return"Fragment";case Jr:return"Portal";case Ti:return"Profiler";case Ts:return"StrictMode";case _i:return"Suspense";case Ri:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case r0:return(e.displayName||"Context")+".Consumer";case n0:return(e._context.displayName||"Context")+".Provider";case _s:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Rs:return t=e.displayName||null,t!==null?t:Li(e.type)||"Memo";case ur:t=e._payload,e=e._init;try{return Li(e(t))}catch{}}return null}function Wf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Li(t);case 8:return t===Ts?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Cr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function l0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qf(e){var t=l0(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pl(e){e._valueTracker||(e._valueTracker=Qf(e))}function a0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=l0(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function sa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $i(e,t){var n=t.checked;return yt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function bc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Cr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function i0(e,t){t=t.checked,t!=null&&Ps(e,"checked",t,!1)}function Ii(e,t){i0(e,t);var n=Cr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fi(e,t.type,n):t.hasOwnProperty("defaultValue")&&Fi(e,t.type,Cr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Fi(e,t,n){(t!=="number"||sa(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Xo=Array.isArray;function uo(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Cr(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Di(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return yt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Q(92));if(Xo(n)){if(1<n.length)throw Error(Q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Cr(n)}}function s0(e,t){var n=Cr(t.value),r=Cr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ec(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function c0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?c0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Tl,u0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Tl=Tl||document.createElement("div"),Tl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Tl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ll(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Qo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kf=["Webkit","ms","Moz","O"];Object.keys(Qo).forEach(function(e){Kf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qo[t]=Qo[e]})});function d0(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Qo.hasOwnProperty(e)&&Qo[e]?(""+t).trim():t+"px"}function f0(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=d0(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var qf=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ji(e,t){if(t){if(qf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function Ai(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bi=null;function Ls(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hi=null,fo=null,po=null;function Pc(e){if(e=Cl(e)){if(typeof Hi!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=ja(t),Hi(e.stateNode,e.type,t))}}function p0(e){fo?po?po.push(e):po=[e]:fo=e}function h0(){if(fo){var e=fo,t=po;if(po=fo=null,Pc(e),t)for(e=0;e<t.length;e++)Pc(t[e])}}function m0(e,t){return e(t)}function y0(){}var ni=!1;function g0(e,t,n){if(ni)return e(t,n);ni=!0;try{return m0(e,t,n)}finally{ni=!1,(fo!==null||po!==null)&&(y0(),h0())}}function al(e,t){var n=e.stateNode;if(n===null)return null;var r=ja(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Q(231,t,typeof n));return n}var Gi=!1;if(Zn)try{var $o={};Object.defineProperty($o,"passive",{get:function(){Gi=!0}}),window.addEventListener("test",$o,$o),window.removeEventListener("test",$o,$o)}catch{Gi=!1}function Jf(e,t,n,r,o,l,a,s,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(v){this.onError(v)}}var Ko=!1,ca=null,ua=!1,Vi=null,Zf={onError:function(e){Ko=!0,ca=e}};function ep(e,t,n,r,o,l,a,s,c){Ko=!1,ca=null,Jf.apply(Zf,arguments)}function tp(e,t,n,r,o,l,a,s,c){if(ep.apply(this,arguments),Ko){if(Ko){var d=ca;Ko=!1,ca=null}else throw Error(Q(198));ua||(ua=!0,Vi=d)}}function Xr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function v0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Tc(e){if(Xr(e)!==e)throw Error(Q(188))}function np(e){var t=e.alternate;if(!t){if(t=Xr(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return Tc(o),e;if(l===r)return Tc(o),t;l=l.sibling}throw Error(Q(188))}if(n.return!==r.return)n=o,r=l;else{for(var a=!1,s=o.child;s;){if(s===n){a=!0,n=o,r=l;break}if(s===r){a=!0,r=o,n=l;break}s=s.sibling}if(!a){for(s=l.child;s;){if(s===n){a=!0,n=l,r=o;break}if(s===r){a=!0,r=l,n=o;break}s=s.sibling}if(!a)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?e:t}function x0(e){return e=np(e),e!==null?w0(e):null}function w0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=w0(e);if(t!==null)return t;e=e.sibling}return null}var k0=Mn.unstable_scheduleCallback,_c=Mn.unstable_cancelCallback,rp=Mn.unstable_shouldYield,op=Mn.unstable_requestPaint,Nt=Mn.unstable_now,lp=Mn.unstable_getCurrentPriorityLevel,$s=Mn.unstable_ImmediatePriority,M0=Mn.unstable_UserBlockingPriority,da=Mn.unstable_NormalPriority,ap=Mn.unstable_LowPriority,S0=Mn.unstable_IdlePriority,Ia=null,Un=null;function ip(e){if(Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(Ia,e,void 0,(e.current.flags&128)===128)}catch{}}var jn=Math.clz32?Math.clz32:up,sp=Math.log,cp=Math.LN2;function up(e){return e>>>=0,e===0?32:31-(sp(e)/cp|0)|0}var _l=64,Rl=4194304;function Yo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fa(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~o;s!==0?r=Yo(s):(l&=a,l!==0&&(r=Yo(l)))}else a=n&~o,a!==0?r=Yo(a):l!==0&&(r=Yo(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,l=t&-t,o>=l||o===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-jn(t),o=1<<n,r|=e[n],t&=~o;return r}function dp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fp(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-jn(l),s=1<<a,c=o[a];c===-1?(!(s&n)||s&r)&&(o[a]=dp(s,t)):c<=t&&(e.expiredLanes|=s),l&=~s}}function Ui(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function C0(){var e=_l;return _l<<=1,!(_l&4194240)&&(_l=64),e}function ri(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ml(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-jn(t),e[t]=n}function pp(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-jn(n),l=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~l}}function Is(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-jn(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var et=0;function b0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var N0,Fs,z0,E0,P0,Xi=!1,Ll=[],yr=null,gr=null,vr=null,il=new Map,sl=new Map,fr=[],hp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rc(e,t){switch(e){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":il.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sl.delete(t.pointerId)}}function Io(e,t,n,r,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[o]},t!==null&&(t=Cl(t),t!==null&&Fs(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function mp(e,t,n,r,o){switch(t){case"focusin":return yr=Io(yr,e,t,n,r,o),!0;case"dragenter":return gr=Io(gr,e,t,n,r,o),!0;case"mouseover":return vr=Io(vr,e,t,n,r,o),!0;case"pointerover":var l=o.pointerId;return il.set(l,Io(il.get(l)||null,e,t,n,r,o)),!0;case"gotpointercapture":return l=o.pointerId,sl.set(l,Io(sl.get(l)||null,e,t,n,r,o)),!0}return!1}function T0(e){var t=Ir(e.target);if(t!==null){var n=Xr(t);if(n!==null){if(t=n.tag,t===13){if(t=v0(n),t!==null){e.blockedOn=t,P0(e.priority,function(){z0(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Bi=r,n.target.dispatchEvent(r),Bi=null}else return t=Cl(n),t!==null&&Fs(t),e.blockedOn=n,!1;t.shift()}return!0}function Lc(e,t,n){Jl(e)&&n.delete(t)}function yp(){Xi=!1,yr!==null&&Jl(yr)&&(yr=null),gr!==null&&Jl(gr)&&(gr=null),vr!==null&&Jl(vr)&&(vr=null),il.forEach(Lc),sl.forEach(Lc)}function Fo(e,t){e.blockedOn===t&&(e.blockedOn=null,Xi||(Xi=!0,Mn.unstable_scheduleCallback(Mn.unstable_NormalPriority,yp)))}function cl(e){function t(o){return Fo(o,e)}if(0<Ll.length){Fo(Ll[0],e);for(var n=1;n<Ll.length;n++){var r=Ll[n];r.blockedOn===e&&(r.blockedOn=null)}}for(yr!==null&&Fo(yr,e),gr!==null&&Fo(gr,e),vr!==null&&Fo(vr,e),il.forEach(t),sl.forEach(t),n=0;n<fr.length;n++)r=fr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<fr.length&&(n=fr[0],n.blockedOn===null);)T0(n),n.blockedOn===null&&fr.shift()}var ho=rr.ReactCurrentBatchConfig,pa=!0;function gp(e,t,n,r){var o=et,l=ho.transition;ho.transition=null;try{et=1,Ds(e,t,n,r)}finally{et=o,ho.transition=l}}function vp(e,t,n,r){var o=et,l=ho.transition;ho.transition=null;try{et=4,Ds(e,t,n,r)}finally{et=o,ho.transition=l}}function Ds(e,t,n,r){if(pa){var o=Yi(e,t,n,r);if(o===null)pi(e,t,r,ha,n),Rc(e,r);else if(mp(o,e,t,n,r))r.stopPropagation();else if(Rc(e,r),t&4&&-1<hp.indexOf(e)){for(;o!==null;){var l=Cl(o);if(l!==null&&N0(l),l=Yi(e,t,n,r),l===null&&pi(e,t,r,ha,n),l===o)break;o=l}o!==null&&r.stopPropagation()}else pi(e,t,r,null,n)}}var ha=null;function Yi(e,t,n,r){if(ha=null,e=Ls(r),e=Ir(e),e!==null)if(t=Xr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=v0(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ha=e,null}function _0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lp()){case $s:return 1;case M0:return 4;case da:case ap:return 16;case S0:return 536870912;default:return 16}default:return 16}}var hr=null,Os=null,Zl=null;function R0(){if(Zl)return Zl;var e,t=Os,n=t.length,r,o="value"in hr?hr.value:hr.textContent,l=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[l-r];r++);return Zl=o.slice(e,1<r?1-r:void 0)}function ea(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $l(){return!0}function $c(){return!1}function Cn(e){function t(n,r,o,l,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(l):l[s]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?$l:$c,this.isPropagationStopped=$c,this}return yt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$l)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$l)},persist:function(){},isPersistent:$l}),t}var zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},js=Cn(zo),Sl=yt({},zo,{view:0,detail:0}),xp=Cn(Sl),oi,li,Do,Fa=yt({},Sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:As,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Do&&(Do&&e.type==="mousemove"?(oi=e.screenX-Do.screenX,li=e.screenY-Do.screenY):li=oi=0,Do=e),oi)},movementY:function(e){return"movementY"in e?e.movementY:li}}),Ic=Cn(Fa),wp=yt({},Fa,{dataTransfer:0}),kp=Cn(wp),Mp=yt({},Sl,{relatedTarget:0}),ai=Cn(Mp),Sp=yt({},zo,{animationName:0,elapsedTime:0,pseudoElement:0}),Cp=Cn(Sp),bp=yt({},zo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Np=Cn(bp),zp=yt({},zo,{data:0}),Fc=Cn(zp),Ep={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _p(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Tp[e])?!!t[e]:!1}function As(){return _p}var Rp=yt({},Sl,{key:function(e){if(e.key){var t=Ep[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ea(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Pp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:As,charCode:function(e){return e.type==="keypress"?ea(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ea(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Lp=Cn(Rp),$p=yt({},Fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dc=Cn($p),Ip=yt({},Sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:As}),Fp=Cn(Ip),Dp=yt({},zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Op=Cn(Dp),jp=yt({},Fa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ap=Cn(jp),Bp=[9,13,27,32],Bs=Zn&&"CompositionEvent"in window,qo=null;Zn&&"documentMode"in document&&(qo=document.documentMode);var Hp=Zn&&"TextEvent"in window&&!qo,L0=Zn&&(!Bs||qo&&8<qo&&11>=qo),Oc=String.fromCharCode(32),jc=!1;function $0(e,t){switch(e){case"keyup":return Bp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function I0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var eo=!1;function Gp(e,t){switch(e){case"compositionend":return I0(t);case"keypress":return t.which!==32?null:(jc=!0,Oc);case"textInput":return e=t.data,e===Oc&&jc?null:e;default:return null}}function Vp(e,t){if(eo)return e==="compositionend"||!Bs&&$0(e,t)?(e=R0(),Zl=Os=hr=null,eo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return L0&&t.locale!=="ko"?null:t.data;default:return null}}var Up={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ac(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Up[e.type]:t==="textarea"}function F0(e,t,n,r){p0(r),t=ma(t,"onChange"),0<t.length&&(n=new js("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Jo=null,ul=null;function Xp(e){Y0(e,0)}function Da(e){var t=ro(e);if(a0(t))return e}function Yp(e,t){if(e==="change")return t}var D0=!1;if(Zn){var ii;if(Zn){var si="oninput"in document;if(!si){var Bc=document.createElement("div");Bc.setAttribute("oninput","return;"),si=typeof Bc.oninput=="function"}ii=si}else ii=!1;D0=ii&&(!document.documentMode||9<document.documentMode)}function Hc(){Jo&&(Jo.detachEvent("onpropertychange",O0),ul=Jo=null)}function O0(e){if(e.propertyName==="value"&&Da(ul)){var t=[];F0(t,ul,e,Ls(e)),g0(Xp,t)}}function Wp(e,t,n){e==="focusin"?(Hc(),Jo=t,ul=n,Jo.attachEvent("onpropertychange",O0)):e==="focusout"&&Hc()}function Qp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Da(ul)}function Kp(e,t){if(e==="click")return Da(t)}function qp(e,t){if(e==="input"||e==="change")return Da(t)}function Jp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bn=typeof Object.is=="function"?Object.is:Jp;function dl(e,t){if(Bn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Pi.call(t,o)||!Bn(e[o],t[o]))return!1}return!0}function Gc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vc(e,t){var n=Gc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gc(n)}}function j0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?j0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function A0(){for(var e=window,t=sa();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=sa(e.document)}return t}function Hs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Zp(e){var t=A0(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&j0(n.ownerDocument.documentElement,n)){if(r!==null&&Hs(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,l=Math.min(r.start,o);r=r.end===void 0?l:Math.min(r.end,o),!e.extend&&l>r&&(o=r,r=l,l=o),o=Vc(n,l);var a=Vc(n,r);o&&a&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var eh=Zn&&"documentMode"in document&&11>=document.documentMode,to=null,Wi=null,Zo=null,Qi=!1;function Uc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qi||to==null||to!==sa(r)||(r=to,"selectionStart"in r&&Hs(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zo&&dl(Zo,r)||(Zo=r,r=ma(Wi,"onSelect"),0<r.length&&(t=new js("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=to)))}function Il(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var no={animationend:Il("Animation","AnimationEnd"),animationiteration:Il("Animation","AnimationIteration"),animationstart:Il("Animation","AnimationStart"),transitionend:Il("Transition","TransitionEnd")},ci={},B0={};Zn&&(B0=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function Oa(e){if(ci[e])return ci[e];if(!no[e])return e;var t=no[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in B0)return ci[e]=t[n];return e}var H0=Oa("animationend"),G0=Oa("animationiteration"),V0=Oa("animationstart"),U0=Oa("transitionend"),X0=new Map,Xc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){X0.set(e,t),Ur(t,[e])}for(var ui=0;ui<Xc.length;ui++){var di=Xc[ui],th=di.toLowerCase(),nh=di[0].toUpperCase()+di.slice(1);Nr(th,"on"+nh)}Nr(H0,"onAnimationEnd");Nr(G0,"onAnimationIteration");Nr(V0,"onAnimationStart");Nr("dblclick","onDoubleClick");Nr("focusin","onFocus");Nr("focusout","onBlur");Nr(U0,"onTransitionEnd");go("onMouseEnter",["mouseout","mouseover"]);go("onMouseLeave",["mouseout","mouseover"]);go("onPointerEnter",["pointerout","pointerover"]);go("onPointerLeave",["pointerout","pointerover"]);Ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ur("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wo));function Yc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,tp(r,t,void 0,e),e.currentTarget=null}function Y0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],c=s.instance,d=s.currentTarget;if(s=s.listener,c!==l&&o.isPropagationStopped())break e;Yc(o,s,d),l=c}else for(a=0;a<r.length;a++){if(s=r[a],c=s.instance,d=s.currentTarget,s=s.listener,c!==l&&o.isPropagationStopped())break e;Yc(o,s,d),l=c}}}if(ua)throw e=Vi,ua=!1,Vi=null,e}function st(e,t){var n=t[es];n===void 0&&(n=t[es]=new Set);var r=e+"__bubble";n.has(r)||(W0(t,e,2,!1),n.add(r))}function fi(e,t,n){var r=0;t&&(r|=4),W0(n,e,r,t)}var Fl="_reactListening"+Math.random().toString(36).slice(2);function fl(e){if(!e[Fl]){e[Fl]=!0,t0.forEach(function(n){n!=="selectionchange"&&(rh.has(n)||fi(n,!1,e),fi(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fl]||(t[Fl]=!0,fi("selectionchange",!1,t))}}function W0(e,t,n,r){switch(_0(t)){case 1:var o=gp;break;case 4:o=vp;break;default:o=Ds}n=o.bind(null,t,n,e),o=void 0,!Gi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function pi(e,t,n,r,o){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===o||s.nodeType===8&&s.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;a=a.return}for(;s!==null;){if(a=Ir(s),a===null)return;if(c=a.tag,c===5||c===6){r=l=a;continue e}s=s.parentNode}}r=r.return}g0(function(){var d=l,v=Ls(n),x=[];e:{var w=X0.get(e);if(w!==void 0){var E=js,S=e;switch(e){case"keypress":if(ea(n)===0)break e;case"keydown":case"keyup":E=Lp;break;case"focusin":S="focus",E=ai;break;case"focusout":S="blur",E=ai;break;case"beforeblur":case"afterblur":E=ai;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=kp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=Fp;break;case H0:case G0:case V0:E=Cp;break;case U0:E=Op;break;case"scroll":E=xp;break;case"wheel":E=Ap;break;case"copy":case"cut":case"paste":E=Np;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Dc}var P=(t&4)!==0,I=!P&&e==="scroll",f=P?w!==null?w+"Capture":null:w;P=[];for(var h=d,u;h!==null;){u=h;var y=u.stateNode;if(u.tag===5&&y!==null&&(u=y,f!==null&&(y=al(h,f),y!=null&&P.push(pl(h,y,u)))),I)break;h=h.return}0<P.length&&(w=new E(w,S,null,n,v),x.push({event:w,listeners:P}))}}if(!(t&7)){e:{if(w=e==="mouseover"||e==="pointerover",E=e==="mouseout"||e==="pointerout",w&&n!==Bi&&(S=n.relatedTarget||n.fromElement)&&(Ir(S)||S[er]))break e;if((E||w)&&(w=v.window===v?v:(w=v.ownerDocument)?w.defaultView||w.parentWindow:window,E?(S=n.relatedTarget||n.toElement,E=d,S=S?Ir(S):null,S!==null&&(I=Xr(S),S!==I||S.tag!==5&&S.tag!==6)&&(S=null)):(E=null,S=d),E!==S)){if(P=Ic,y="onMouseLeave",f="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(P=Dc,y="onPointerLeave",f="onPointerEnter",h="pointer"),I=E==null?w:ro(E),u=S==null?w:ro(S),w=new P(y,h+"leave",E,n,v),w.target=I,w.relatedTarget=u,y=null,Ir(v)===d&&(P=new P(f,h+"enter",S,n,v),P.target=u,P.relatedTarget=I,y=P),I=y,E&&S)t:{for(P=E,f=S,h=0,u=P;u;u=qr(u))h++;for(u=0,y=f;y;y=qr(y))u++;for(;0<h-u;)P=qr(P),h--;for(;0<u-h;)f=qr(f),u--;for(;h--;){if(P===f||f!==null&&P===f.alternate)break t;P=qr(P),f=qr(f)}P=null}else P=null;E!==null&&Wc(x,w,E,P,!1),S!==null&&I!==null&&Wc(x,I,S,P,!0)}}e:{if(w=d?ro(d):window,E=w.nodeName&&w.nodeName.toLowerCase(),E==="select"||E==="input"&&w.type==="file")var N=Yp;else if(Ac(w))if(D0)N=qp;else{N=Qp;var H=Wp}else(E=w.nodeName)&&E.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(N=Kp);if(N&&(N=N(e,d))){F0(x,N,n,v);break e}H&&H(e,w,d),e==="focusout"&&(H=w._wrapperState)&&H.controlled&&w.type==="number"&&Fi(w,"number",w.value)}switch(H=d?ro(d):window,e){case"focusin":(Ac(H)||H.contentEditable==="true")&&(to=H,Wi=d,Zo=null);break;case"focusout":Zo=Wi=to=null;break;case"mousedown":Qi=!0;break;case"contextmenu":case"mouseup":case"dragend":Qi=!1,Uc(x,n,v);break;case"selectionchange":if(eh)break;case"keydown":case"keyup":Uc(x,n,v)}var F;if(Bs)e:{switch(e){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else eo?$0(e,n)&&(K="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(K="onCompositionStart");K&&(L0&&n.locale!=="ko"&&(eo||K!=="onCompositionStart"?K==="onCompositionEnd"&&eo&&(F=R0()):(hr=v,Os="value"in hr?hr.value:hr.textContent,eo=!0)),H=ma(d,K),0<H.length&&(K=new Fc(K,e,null,n,v),x.push({event:K,listeners:H}),F?K.data=F:(F=I0(n),F!==null&&(K.data=F)))),(F=Hp?Gp(e,n):Vp(e,n))&&(d=ma(d,"onBeforeInput"),0<d.length&&(v=new Fc("onBeforeInput","beforeinput",null,n,v),x.push({event:v,listeners:d}),v.data=F))}Y0(x,t)})}function pl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ma(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=al(e,n),l!=null&&r.unshift(pl(e,l,o)),l=al(e,t),l!=null&&r.push(pl(e,l,o))),e=e.return}return r}function qr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Wc(e,t,n,r,o){for(var l=t._reactName,a=[];n!==null&&n!==r;){var s=n,c=s.alternate,d=s.stateNode;if(c!==null&&c===r)break;s.tag===5&&d!==null&&(s=d,o?(c=al(n,l),c!=null&&a.unshift(pl(n,c,s))):o||(c=al(n,l),c!=null&&a.push(pl(n,c,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var oh=/\r\n?/g,lh=/\u0000|\uFFFD/g;function Qc(e){return(typeof e=="string"?e:""+e).replace(oh,`
`).replace(lh,"")}function Dl(e,t,n){if(t=Qc(t),Qc(e)!==t&&n)throw Error(Q(425))}function ya(){}var Ki=null,qi=null;function Ji(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zi=typeof setTimeout=="function"?setTimeout:void 0,ah=typeof clearTimeout=="function"?clearTimeout:void 0,Kc=typeof Promise=="function"?Promise:void 0,ih=typeof queueMicrotask=="function"?queueMicrotask:typeof Kc<"u"?function(e){return Kc.resolve(null).then(e).catch(sh)}:Zi;function sh(e){setTimeout(function(){throw e})}function hi(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),cl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);cl(t)}function xr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Eo=Math.random().toString(36).slice(2),Vn="__reactFiber$"+Eo,hl="__reactProps$"+Eo,er="__reactContainer$"+Eo,es="__reactEvents$"+Eo,ch="__reactListeners$"+Eo,uh="__reactHandles$"+Eo;function Ir(e){var t=e[Vn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[er]||n[Vn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=qc(e);e!==null;){if(n=e[Vn])return n;e=qc(e)}return t}e=n,n=e.parentNode}return null}function Cl(e){return e=e[Vn]||e[er],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ro(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function ja(e){return e[hl]||null}var ts=[],oo=-1;function zr(e){return{current:e}}function ct(e){0>oo||(e.current=ts[oo],ts[oo]=null,oo--)}function it(e,t){oo++,ts[oo]=e.current,e.current=t}var br={},qt=zr(br),fn=zr(!1),Ar=br;function vo(e,t){var n=e.type.contextTypes;if(!n)return br;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function pn(e){return e=e.childContextTypes,e!=null}function ga(){ct(fn),ct(qt)}function Jc(e,t,n){if(qt.current!==br)throw Error(Q(168));it(qt,t),it(fn,n)}function Q0(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(Q(108,Wf(e)||"Unknown",o));return yt({},n,r)}function va(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||br,Ar=qt.current,it(qt,e),it(fn,fn.current),!0}function Zc(e,t,n){var r=e.stateNode;if(!r)throw Error(Q(169));n?(e=Q0(e,t,Ar),r.__reactInternalMemoizedMergedChildContext=e,ct(fn),ct(qt),it(qt,e)):ct(fn),it(fn,n)}var Qn=null,Aa=!1,mi=!1;function K0(e){Qn===null?Qn=[e]:Qn.push(e)}function dh(e){Aa=!0,K0(e)}function Er(){if(!mi&&Qn!==null){mi=!0;var e=0,t=et;try{var n=Qn;for(et=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Qn=null,Aa=!1}catch(o){throw Qn!==null&&(Qn=Qn.slice(e+1)),k0($s,Er),o}finally{et=t,mi=!1}}return null}var lo=[],ao=0,xa=null,wa=0,zn=[],En=0,Br=null,Kn=1,qn="";function Rr(e,t){lo[ao++]=wa,lo[ao++]=xa,xa=e,wa=t}function q0(e,t,n){zn[En++]=Kn,zn[En++]=qn,zn[En++]=Br,Br=e;var r=Kn;e=qn;var o=32-jn(r)-1;r&=~(1<<o),n+=1;var l=32-jn(t)+o;if(30<l){var a=o-o%5;l=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Kn=1<<32-jn(t)+o|n<<o|r,qn=l+e}else Kn=1<<l|n<<o|r,qn=e}function Gs(e){e.return!==null&&(Rr(e,1),q0(e,1,0))}function Vs(e){for(;e===xa;)xa=lo[--ao],lo[ao]=null,wa=lo[--ao],lo[ao]=null;for(;e===Br;)Br=zn[--En],zn[En]=null,qn=zn[--En],zn[En]=null,Kn=zn[--En],zn[En]=null}var kn=null,wn=null,ft=!1,On=null;function J0(e,t){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function eu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,kn=e,wn=xr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,kn=e,wn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Br!==null?{id:Kn,overflow:qn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,kn=e,wn=null,!0):!1;default:return!1}}function ns(e){return(e.mode&1)!==0&&(e.flags&128)===0}function rs(e){if(ft){var t=wn;if(t){var n=t;if(!eu(e,t)){if(ns(e))throw Error(Q(418));t=xr(n.nextSibling);var r=kn;t&&eu(e,t)?J0(r,n):(e.flags=e.flags&-4097|2,ft=!1,kn=e)}}else{if(ns(e))throw Error(Q(418));e.flags=e.flags&-4097|2,ft=!1,kn=e}}}function tu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;kn=e}function Ol(e){if(e!==kn)return!1;if(!ft)return tu(e),ft=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ji(e.type,e.memoizedProps)),t&&(t=wn)){if(ns(e))throw Z0(),Error(Q(418));for(;t;)J0(e,t),t=xr(t.nextSibling)}if(tu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){wn=xr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}wn=null}}else wn=kn?xr(e.stateNode.nextSibling):null;return!0}function Z0(){for(var e=wn;e;)e=xr(e.nextSibling)}function xo(){wn=kn=null,ft=!1}function Us(e){On===null?On=[e]:On.push(e)}var fh=rr.ReactCurrentBatchConfig;function Oo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,e));var o=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var s=o.refs;a===null?delete s[l]:s[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,e))}return e}function jl(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nu(e){var t=e._init;return t(e._payload)}function ed(e){function t(f,h){if(e){var u=f.deletions;u===null?(f.deletions=[h],f.flags|=16):u.push(h)}}function n(f,h){if(!e)return null;for(;h!==null;)t(f,h),h=h.sibling;return null}function r(f,h){for(f=new Map;h!==null;)h.key!==null?f.set(h.key,h):f.set(h.index,h),h=h.sibling;return f}function o(f,h){return f=Sr(f,h),f.index=0,f.sibling=null,f}function l(f,h,u){return f.index=u,e?(u=f.alternate,u!==null?(u=u.index,u<h?(f.flags|=2,h):u):(f.flags|=2,h)):(f.flags|=1048576,h)}function a(f){return e&&f.alternate===null&&(f.flags|=2),f}function s(f,h,u,y){return h===null||h.tag!==6?(h=Mi(u,f.mode,y),h.return=f,h):(h=o(h,u),h.return=f,h)}function c(f,h,u,y){var N=u.type;return N===Zr?v(f,h,u.props.children,y,u.key):h!==null&&(h.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ur&&nu(N)===h.type)?(y=o(h,u.props),y.ref=Oo(f,h,u),y.return=f,y):(y=ia(u.type,u.key,u.props,null,f.mode,y),y.ref=Oo(f,h,u),y.return=f,y)}function d(f,h,u,y){return h===null||h.tag!==4||h.stateNode.containerInfo!==u.containerInfo||h.stateNode.implementation!==u.implementation?(h=Si(u,f.mode,y),h.return=f,h):(h=o(h,u.children||[]),h.return=f,h)}function v(f,h,u,y,N){return h===null||h.tag!==7?(h=jr(u,f.mode,y,N),h.return=f,h):(h=o(h,u),h.return=f,h)}function x(f,h,u){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Mi(""+h,f.mode,u),h.return=f,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case El:return u=ia(h.type,h.key,h.props,null,f.mode,u),u.ref=Oo(f,null,h),u.return=f,u;case Jr:return h=Si(h,f.mode,u),h.return=f,h;case ur:var y=h._init;return x(f,y(h._payload),u)}if(Xo(h)||Lo(h))return h=jr(h,f.mode,u,null),h.return=f,h;jl(f,h)}return null}function w(f,h,u,y){var N=h!==null?h.key:null;if(typeof u=="string"&&u!==""||typeof u=="number")return N!==null?null:s(f,h,""+u,y);if(typeof u=="object"&&u!==null){switch(u.$$typeof){case El:return u.key===N?c(f,h,u,y):null;case Jr:return u.key===N?d(f,h,u,y):null;case ur:return N=u._init,w(f,h,N(u._payload),y)}if(Xo(u)||Lo(u))return N!==null?null:v(f,h,u,y,null);jl(f,u)}return null}function E(f,h,u,y,N){if(typeof y=="string"&&y!==""||typeof y=="number")return f=f.get(u)||null,s(h,f,""+y,N);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case El:return f=f.get(y.key===null?u:y.key)||null,c(h,f,y,N);case Jr:return f=f.get(y.key===null?u:y.key)||null,d(h,f,y,N);case ur:var H=y._init;return E(f,h,u,H(y._payload),N)}if(Xo(y)||Lo(y))return f=f.get(u)||null,v(h,f,y,N,null);jl(h,y)}return null}function S(f,h,u,y){for(var N=null,H=null,F=h,K=h=0,ve=null;F!==null&&K<u.length;K++){F.index>K?(ve=F,F=null):ve=F.sibling;var le=w(f,F,u[K],y);if(le===null){F===null&&(F=ve);break}e&&F&&le.alternate===null&&t(f,F),h=l(le,h,K),H===null?N=le:H.sibling=le,H=le,F=ve}if(K===u.length)return n(f,F),ft&&Rr(f,K),N;if(F===null){for(;K<u.length;K++)F=x(f,u[K],y),F!==null&&(h=l(F,h,K),H===null?N=F:H.sibling=F,H=F);return ft&&Rr(f,K),N}for(F=r(f,F);K<u.length;K++)ve=E(F,f,K,u[K],y),ve!==null&&(e&&ve.alternate!==null&&F.delete(ve.key===null?K:ve.key),h=l(ve,h,K),H===null?N=ve:H.sibling=ve,H=ve);return e&&F.forEach(function(xe){return t(f,xe)}),ft&&Rr(f,K),N}function P(f,h,u,y){var N=Lo(u);if(typeof N!="function")throw Error(Q(150));if(u=N.call(u),u==null)throw Error(Q(151));for(var H=N=null,F=h,K=h=0,ve=null,le=u.next();F!==null&&!le.done;K++,le=u.next()){F.index>K?(ve=F,F=null):ve=F.sibling;var xe=w(f,F,le.value,y);if(xe===null){F===null&&(F=ve);break}e&&F&&xe.alternate===null&&t(f,F),h=l(xe,h,K),H===null?N=xe:H.sibling=xe,H=xe,F=ve}if(le.done)return n(f,F),ft&&Rr(f,K),N;if(F===null){for(;!le.done;K++,le=u.next())le=x(f,le.value,y),le!==null&&(h=l(le,h,K),H===null?N=le:H.sibling=le,H=le);return ft&&Rr(f,K),N}for(F=r(f,F);!le.done;K++,le=u.next())le=E(F,f,K,le.value,y),le!==null&&(e&&le.alternate!==null&&F.delete(le.key===null?K:le.key),h=l(le,h,K),H===null?N=le:H.sibling=le,H=le);return e&&F.forEach(function(Ye){return t(f,Ye)}),ft&&Rr(f,K),N}function I(f,h,u,y){if(typeof u=="object"&&u!==null&&u.type===Zr&&u.key===null&&(u=u.props.children),typeof u=="object"&&u!==null){switch(u.$$typeof){case El:e:{for(var N=u.key,H=h;H!==null;){if(H.key===N){if(N=u.type,N===Zr){if(H.tag===7){n(f,H.sibling),h=o(H,u.props.children),h.return=f,f=h;break e}}else if(H.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ur&&nu(N)===H.type){n(f,H.sibling),h=o(H,u.props),h.ref=Oo(f,H,u),h.return=f,f=h;break e}n(f,H);break}else t(f,H);H=H.sibling}u.type===Zr?(h=jr(u.props.children,f.mode,y,u.key),h.return=f,f=h):(y=ia(u.type,u.key,u.props,null,f.mode,y),y.ref=Oo(f,h,u),y.return=f,f=y)}return a(f);case Jr:e:{for(H=u.key;h!==null;){if(h.key===H)if(h.tag===4&&h.stateNode.containerInfo===u.containerInfo&&h.stateNode.implementation===u.implementation){n(f,h.sibling),h=o(h,u.children||[]),h.return=f,f=h;break e}else{n(f,h);break}else t(f,h);h=h.sibling}h=Si(u,f.mode,y),h.return=f,f=h}return a(f);case ur:return H=u._init,I(f,h,H(u._payload),y)}if(Xo(u))return S(f,h,u,y);if(Lo(u))return P(f,h,u,y);jl(f,u)}return typeof u=="string"&&u!==""||typeof u=="number"?(u=""+u,h!==null&&h.tag===6?(n(f,h.sibling),h=o(h,u),h.return=f,f=h):(n(f,h),h=Mi(u,f.mode,y),h.return=f,f=h),a(f)):n(f,h)}return I}var wo=ed(!0),td=ed(!1),ka=zr(null),Ma=null,io=null,Xs=null;function Ys(){Xs=io=Ma=null}function Ws(e){var t=ka.current;ct(ka),e._currentValue=t}function os(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function mo(e,t){Ma=e,Xs=io=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(dn=!0),e.firstContext=null)}function _n(e){var t=e._currentValue;if(Xs!==e)if(e={context:e,memoizedValue:t,next:null},io===null){if(Ma===null)throw Error(Q(308));io=e,Ma.dependencies={lanes:0,firstContext:e}}else io=io.next=e;return t}var Fr=null;function Qs(e){Fr===null?Fr=[e]:Fr.push(e)}function nd(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Qs(t)):(n.next=o.next,o.next=n),t.interleaved=n,tr(e,r)}function tr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var dr=!1;function Ks(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Jn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function wr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Qe&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,tr(e,n)}return o=r.interleaved,o===null?(t.next=t,Qs(r)):(t.next=o.next,o.next=t),r.interleaved=t,tr(e,n)}function ta(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Is(e,n)}}function ru(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?o=l=t:l=l.next=t}else o=l=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Sa(e,t,n,r){var o=e.updateQueue;dr=!1;var l=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(s!==null){o.shared.pending=null;var c=s,d=c.next;c.next=null,a===null?l=d:a.next=d,a=c;var v=e.alternate;v!==null&&(v=v.updateQueue,s=v.lastBaseUpdate,s!==a&&(s===null?v.firstBaseUpdate=d:s.next=d,v.lastBaseUpdate=c))}if(l!==null){var x=o.baseState;a=0,v=d=c=null,s=l;do{var w=s.lane,E=s.eventTime;if((r&w)===w){v!==null&&(v=v.next={eventTime:E,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var S=e,P=s;switch(w=t,E=n,P.tag){case 1:if(S=P.payload,typeof S=="function"){x=S.call(E,x,w);break e}x=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=P.payload,w=typeof S=="function"?S.call(E,x,w):S,w==null)break e;x=yt({},x,w);break e;case 2:dr=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,w=o.effects,w===null?o.effects=[s]:w.push(s))}else E={eventTime:E,lane:w,tag:s.tag,payload:s.payload,callback:s.callback,next:null},v===null?(d=v=E,c=x):v=v.next=E,a|=w;if(s=s.next,s===null){if(s=o.shared.pending,s===null)break;w=s,s=w.next,w.next=null,o.lastBaseUpdate=w,o.shared.pending=null}}while(1);if(v===null&&(c=x),o.baseState=c,o.firstBaseUpdate=d,o.lastBaseUpdate=v,t=o.shared.interleaved,t!==null){o=t;do a|=o.lane,o=o.next;while(o!==t)}else l===null&&(o.shared.lanes=0);Gr|=a,e.lanes=a,e.memoizedState=x}}function ou(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(Q(191,o));o.call(r)}}}var bl={},Xn=zr(bl),ml=zr(bl),yl=zr(bl);function Dr(e){if(e===bl)throw Error(Q(174));return e}function qs(e,t){switch(it(yl,t),it(ml,e),it(Xn,bl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Oi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Oi(t,e)}ct(Xn),it(Xn,t)}function ko(){ct(Xn),ct(ml),ct(yl)}function od(e){Dr(yl.current);var t=Dr(Xn.current),n=Oi(t,e.type);t!==n&&(it(ml,e),it(Xn,n))}function Js(e){ml.current===e&&(ct(Xn),ct(ml))}var ht=zr(0);function Ca(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yi=[];function Zs(){for(var e=0;e<yi.length;e++)yi[e]._workInProgressVersionPrimary=null;yi.length=0}var na=rr.ReactCurrentDispatcher,gi=rr.ReactCurrentBatchConfig,Hr=0,mt=null,Dt=null,Bt=null,ba=!1,el=!1,gl=0,ph=0;function Wt(){throw Error(Q(321))}function ec(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Bn(e[n],t[n]))return!1;return!0}function tc(e,t,n,r,o,l){if(Hr=l,mt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,na.current=e===null||e.memoizedState===null?gh:vh,e=n(r,o),el){l=0;do{if(el=!1,gl=0,25<=l)throw Error(Q(301));l+=1,Bt=Dt=null,t.updateQueue=null,na.current=xh,e=n(r,o)}while(el)}if(na.current=Na,t=Dt!==null&&Dt.next!==null,Hr=0,Bt=Dt=mt=null,ba=!1,t)throw Error(Q(300));return e}function nc(){var e=gl!==0;return gl=0,e}function Gn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?mt.memoizedState=Bt=e:Bt=Bt.next=e,Bt}function Rn(){if(Dt===null){var e=mt.alternate;e=e!==null?e.memoizedState:null}else e=Dt.next;var t=Bt===null?mt.memoizedState:Bt.next;if(t!==null)Bt=t,Dt=e;else{if(e===null)throw Error(Q(310));Dt=e,e={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Bt===null?mt.memoizedState=Bt=e:Bt=Bt.next=e}return Bt}function vl(e,t){return typeof t=="function"?t(e):t}function vi(e){var t=Rn(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var r=Dt,o=r.baseQueue,l=n.pending;if(l!==null){if(o!==null){var a=o.next;o.next=l.next,l.next=a}r.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,r=r.baseState;var s=a=null,c=null,d=l;do{var v=d.lane;if((Hr&v)===v)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var x={lane:v,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(s=c=x,a=r):c=c.next=x,mt.lanes|=v,Gr|=v}d=d.next}while(d!==null&&d!==l);c===null?a=r:c.next=s,Bn(r,t.memoizedState)||(dn=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do l=o.lane,mt.lanes|=l,Gr|=l,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xi(e){var t=Rn(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,l=t.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do l=e(l,a.action),a=a.next;while(a!==o);Bn(l,t.memoizedState)||(dn=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function ld(){}function ad(e,t){var n=mt,r=Rn(),o=t(),l=!Bn(r.memoizedState,o);if(l&&(r.memoizedState=o,dn=!0),r=r.queue,rc(cd.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,xl(9,sd.bind(null,n,r,o,t),void 0,null),Ht===null)throw Error(Q(349));Hr&30||id(n,t,o)}return o}function id(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=mt.updateQueue,t===null?(t={lastEffect:null,stores:null},mt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function sd(e,t,n,r){t.value=n,t.getSnapshot=r,ud(t)&&dd(e)}function cd(e,t,n){return n(function(){ud(t)&&dd(e)})}function ud(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Bn(e,n)}catch{return!0}}function dd(e){var t=tr(e,1);t!==null&&An(t,e,1,-1)}function lu(e){var t=Gn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:e},t.queue=e,e=e.dispatch=yh.bind(null,mt,e),[t.memoizedState,e]}function xl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=mt.updateQueue,t===null?(t={lastEffect:null,stores:null},mt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function fd(){return Rn().memoizedState}function ra(e,t,n,r){var o=Gn();mt.flags|=e,o.memoizedState=xl(1|t,n,void 0,r===void 0?null:r)}function Ba(e,t,n,r){var o=Rn();r=r===void 0?null:r;var l=void 0;if(Dt!==null){var a=Dt.memoizedState;if(l=a.destroy,r!==null&&ec(r,a.deps)){o.memoizedState=xl(t,n,l,r);return}}mt.flags|=e,o.memoizedState=xl(1|t,n,l,r)}function au(e,t){return ra(8390656,8,e,t)}function rc(e,t){return Ba(2048,8,e,t)}function pd(e,t){return Ba(4,2,e,t)}function hd(e,t){return Ba(4,4,e,t)}function md(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yd(e,t,n){return n=n!=null?n.concat([e]):null,Ba(4,4,md.bind(null,t,e),n)}function oc(){}function gd(e,t){var n=Rn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ec(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function vd(e,t){var n=Rn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ec(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function xd(e,t,n){return Hr&21?(Bn(n,t)||(n=C0(),mt.lanes|=n,Gr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,dn=!0),e.memoizedState=n)}function hh(e,t){var n=et;et=n!==0&&4>n?n:4,e(!0);var r=gi.transition;gi.transition={};try{e(!1),t()}finally{et=n,gi.transition=r}}function wd(){return Rn().memoizedState}function mh(e,t,n){var r=Mr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},kd(e))Md(t,n);else if(n=nd(e,t,n,r),n!==null){var o=nn();An(n,e,r,o),Sd(n,t,r)}}function yh(e,t,n){var r=Mr(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(kd(e))Md(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,s=l(a,n);if(o.hasEagerState=!0,o.eagerState=s,Bn(s,a)){var c=t.interleaved;c===null?(o.next=o,Qs(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}n=nd(e,t,o,r),n!==null&&(o=nn(),An(n,e,r,o),Sd(n,t,r))}}function kd(e){var t=e.alternate;return e===mt||t!==null&&t===mt}function Md(e,t){el=ba=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Sd(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Is(e,n)}}var Na={readContext:_n,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},gh={readContext:_n,useCallback:function(e,t){return Gn().memoizedState=[e,t===void 0?null:t],e},useContext:_n,useEffect:au,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ra(4194308,4,md.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ra(4194308,4,e,t)},useInsertionEffect:function(e,t){return ra(4,2,e,t)},useMemo:function(e,t){var n=Gn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Gn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=mh.bind(null,mt,e),[r.memoizedState,e]},useRef:function(e){var t=Gn();return e={current:e},t.memoizedState=e},useState:lu,useDebugValue:oc,useDeferredValue:function(e){return Gn().memoizedState=e},useTransition:function(){var e=lu(!1),t=e[0];return e=hh.bind(null,e[1]),Gn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mt,o=Gn();if(ft){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=t(),Ht===null)throw Error(Q(349));Hr&30||id(r,t,n)}o.memoizedState=n;var l={value:n,getSnapshot:t};return o.queue=l,au(cd.bind(null,r,l,e),[e]),r.flags|=2048,xl(9,sd.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Gn(),t=Ht.identifierPrefix;if(ft){var n=qn,r=Kn;n=(r&~(1<<32-jn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=gl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ph++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vh={readContext:_n,useCallback:gd,useContext:_n,useEffect:rc,useImperativeHandle:yd,useInsertionEffect:pd,useLayoutEffect:hd,useMemo:vd,useReducer:vi,useRef:fd,useState:function(){return vi(vl)},useDebugValue:oc,useDeferredValue:function(e){var t=Rn();return xd(t,Dt.memoizedState,e)},useTransition:function(){var e=vi(vl)[0],t=Rn().memoizedState;return[e,t]},useMutableSource:ld,useSyncExternalStore:ad,useId:wd,unstable_isNewReconciler:!1},xh={readContext:_n,useCallback:gd,useContext:_n,useEffect:rc,useImperativeHandle:yd,useInsertionEffect:pd,useLayoutEffect:hd,useMemo:vd,useReducer:xi,useRef:fd,useState:function(){return xi(vl)},useDebugValue:oc,useDeferredValue:function(e){var t=Rn();return Dt===null?t.memoizedState=e:xd(t,Dt.memoizedState,e)},useTransition:function(){var e=xi(vl)[0],t=Rn().memoizedState;return[e,t]},useMutableSource:ld,useSyncExternalStore:ad,useId:wd,unstable_isNewReconciler:!1};function Fn(e,t){if(e&&e.defaultProps){t=yt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ls(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:yt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ha={isMounted:function(e){return(e=e._reactInternals)?Xr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nn(),o=Mr(e),l=Jn(r,o);l.payload=t,n!=null&&(l.callback=n),t=wr(e,l,o),t!==null&&(An(t,e,o,r),ta(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nn(),o=Mr(e),l=Jn(r,o);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=wr(e,l,o),t!==null&&(An(t,e,o,r),ta(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nn(),r=Mr(e),o=Jn(n,r);o.tag=2,t!=null&&(o.callback=t),t=wr(e,o,r),t!==null&&(An(t,e,r,n),ta(t,e,r))}};function iu(e,t,n,r,o,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!dl(n,r)||!dl(o,l):!0}function Cd(e,t,n){var r=!1,o=br,l=t.contextType;return typeof l=="object"&&l!==null?l=_n(l):(o=pn(t)?Ar:qt.current,r=t.contextTypes,l=(r=r!=null)?vo(e,o):br),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ha,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=l),t}function su(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ha.enqueueReplaceState(t,t.state,null)}function as(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ks(e);var l=t.contextType;typeof l=="object"&&l!==null?o.context=_n(l):(l=pn(t)?Ar:qt.current,o.context=vo(e,l)),o.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(ls(e,t,l,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Ha.enqueueReplaceState(o,o.state,null),Sa(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Mo(e,t){try{var n="",r=t;do n+=Yf(r),r=r.return;while(r);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:o,digest:null}}function wi(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function is(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var wh=typeof WeakMap=="function"?WeakMap:Map;function bd(e,t,n){n=Jn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ea||(Ea=!0,gs=r),is(e,t)},n}function Nd(e,t,n){n=Jn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){is(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){is(e,t),typeof r!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function cu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new wh;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=$h.bind(null,e,t,n),t.then(e,e))}function uu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function du(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Jn(-1,1),t.tag=2,wr(n,t,1))),n.lanes|=1),e)}var kh=rr.ReactCurrentOwner,dn=!1;function en(e,t,n,r){t.child=e===null?td(t,null,n,r):wo(t,e.child,n,r)}function fu(e,t,n,r,o){n=n.render;var l=t.ref;return mo(t,o),r=tc(e,t,n,r,l,o),n=nc(),e!==null&&!dn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,nr(e,t,o)):(ft&&n&&Gs(t),t.flags|=1,en(e,t,r,o),t.child)}function pu(e,t,n,r,o){if(e===null){var l=n.type;return typeof l=="function"&&!fc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,zd(e,t,l,r,o)):(e=ia(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&o)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:dl,n(a,r)&&e.ref===t.ref)return nr(e,t,o)}return t.flags|=1,e=Sr(l,r),e.ref=t.ref,e.return=t,t.child=e}function zd(e,t,n,r,o){if(e!==null){var l=e.memoizedProps;if(dl(l,r)&&e.ref===t.ref)if(dn=!1,t.pendingProps=r=l,(e.lanes&o)!==0)e.flags&131072&&(dn=!0);else return t.lanes=e.lanes,nr(e,t,o)}return ss(e,t,n,r,o)}function Ed(e,t,n){var r=t.pendingProps,o=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(co,xn),xn|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,it(co,xn),xn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,it(co,xn),xn|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,it(co,xn),xn|=r;return en(e,t,o,n),t.child}function Pd(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ss(e,t,n,r,o){var l=pn(n)?Ar:qt.current;return l=vo(t,l),mo(t,o),n=tc(e,t,n,r,l,o),r=nc(),e!==null&&!dn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,nr(e,t,o)):(ft&&r&&Gs(t),t.flags|=1,en(e,t,n,o),t.child)}function hu(e,t,n,r,o){if(pn(n)){var l=!0;va(t)}else l=!1;if(mo(t,o),t.stateNode===null)oa(e,t),Cd(t,n,r),as(t,n,r,o),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=_n(d):(d=pn(n)?Ar:qt.current,d=vo(t,d));var v=n.getDerivedStateFromProps,x=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function";x||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||c!==d)&&su(t,a,r,d),dr=!1;var w=t.memoizedState;a.state=w,Sa(t,r,a,o),c=t.memoizedState,s!==r||w!==c||fn.current||dr?(typeof v=="function"&&(ls(t,n,v,r),c=t.memoizedState),(s=dr||iu(t,n,s,r,w,c,d))?(x||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=d,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,rd(e,t),s=t.memoizedProps,d=t.type===t.elementType?s:Fn(t.type,s),a.props=d,x=t.pendingProps,w=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=_n(c):(c=pn(n)?Ar:qt.current,c=vo(t,c));var E=n.getDerivedStateFromProps;(v=typeof E=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==x||w!==c)&&su(t,a,r,c),dr=!1,w=t.memoizedState,a.state=w,Sa(t,r,a,o);var S=t.memoizedState;s!==x||w!==S||fn.current||dr?(typeof E=="function"&&(ls(t,n,E,r),S=t.memoizedState),(d=dr||iu(t,n,d,r,w,S,c)||!1)?(v||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,S,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,S,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=S),a.props=r,a.state=S,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),r=!1)}return cs(e,t,n,r,l,o)}function cs(e,t,n,r,o,l){Pd(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return o&&Zc(t,n,!1),nr(e,t,l);r=t.stateNode,kh.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=wo(t,e.child,null,l),t.child=wo(t,null,s,l)):en(e,t,s,l),t.memoizedState=r.state,o&&Zc(t,n,!0),t.child}function Td(e){var t=e.stateNode;t.pendingContext?Jc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Jc(e,t.context,!1),qs(e,t.containerInfo)}function mu(e,t,n,r,o){return xo(),Us(o),t.flags|=256,en(e,t,n,r),t.child}var us={dehydrated:null,treeContext:null,retryLane:0};function ds(e){return{baseLanes:e,cachePool:null,transitions:null}}function _d(e,t,n){var r=t.pendingProps,o=ht.current,l=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(o&2)!==0),s?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),it(ht,o&1),e===null)return rs(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=Ua(a,r,0,null),e=jr(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=ds(n),t.memoizedState=us,e):lc(t,a));if(o=e.memoizedState,o!==null&&(s=o.dehydrated,s!==null))return Mh(e,t,a,r,s,o,n);if(l){l=r.fallback,a=t.mode,o=e.child,s=o.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Sr(o,c),r.subtreeFlags=o.subtreeFlags&14680064),s!==null?l=Sr(s,l):(l=jr(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?ds(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=us,r}return l=e.child,e=l.sibling,r=Sr(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function lc(e,t){return t=Ua({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Al(e,t,n,r){return r!==null&&Us(r),wo(t,e.child,null,n),e=lc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Mh(e,t,n,r,o,l,a){if(n)return t.flags&256?(t.flags&=-257,r=wi(Error(Q(422))),Al(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,o=t.mode,r=Ua({mode:"visible",children:r.children},o,0,null),l=jr(l,o,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&wo(t,e.child,null,a),t.child.memoizedState=ds(a),t.memoizedState=us,l);if(!(t.mode&1))return Al(e,t,a,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var s=r.dgst;return r=s,l=Error(Q(419)),r=wi(l,r,void 0),Al(e,t,a,r)}if(s=(a&e.childLanes)!==0,dn||s){if(r=Ht,r!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|a)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,tr(e,o),An(r,e,o,-1))}return dc(),r=wi(Error(Q(421))),Al(e,t,a,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Ih.bind(null,e),o._reactRetry=t,null):(e=l.treeContext,wn=xr(o.nextSibling),kn=t,ft=!0,On=null,e!==null&&(zn[En++]=Kn,zn[En++]=qn,zn[En++]=Br,Kn=e.id,qn=e.overflow,Br=t),t=lc(t,r.children),t.flags|=4096,t)}function yu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),os(e.return,t,n)}function ki(e,t,n,r,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=o)}function Rd(e,t,n){var r=t.pendingProps,o=r.revealOrder,l=r.tail;if(en(e,t,r.children,n),r=ht.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yu(e,n,t);else if(e.tag===19)yu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(it(ht,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Ca(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ki(t,!1,o,n,l);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Ca(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ki(t,!0,n,null,l);break;case"together":ki(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function oa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function nr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Gr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,n=Sr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Sr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Sh(e,t,n){switch(t.tag){case 3:Td(t),xo();break;case 5:od(t);break;case 1:pn(t.type)&&va(t);break;case 4:qs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;it(ka,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(it(ht,ht.current&1),t.flags|=128,null):n&t.child.childLanes?_d(e,t,n):(it(ht,ht.current&1),e=nr(e,t,n),e!==null?e.sibling:null);it(ht,ht.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Rd(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),it(ht,ht.current),r)break;return null;case 22:case 23:return t.lanes=0,Ed(e,t,n)}return nr(e,t,n)}var Ld,fs,$d,Id;Ld=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fs=function(){};$d=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Dr(Xn.current);var l=null;switch(n){case"input":o=$i(e,o),r=$i(e,r),l=[];break;case"select":o=yt({},o,{value:void 0}),r=yt({},r,{value:void 0}),l=[];break;case"textarea":o=Di(e,o),r=Di(e,r),l=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ya)}ji(n,r);var a;n=null;for(d in o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var s=o[d];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ol.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in r){var c=r[d];if(s=o!=null?o[d]:void 0,r.hasOwnProperty(d)&&c!==s&&(c!=null||s!=null))if(d==="style")if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(l||(l=[]),l.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ol.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&st("scroll",e),l||s===c||(l=[])):(l=l||[]).push(d,c))}n&&(l=l||[]).push("style",n);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};Id=function(e,t,n,r){n!==r&&(t.flags|=4)};function jo(e,t){if(!ft)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ch(e,t,n){var r=t.pendingProps;switch(Vs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(t),null;case 1:return pn(t.type)&&ga(),Qt(t),null;case 3:return r=t.stateNode,ko(),ct(fn),ct(qt),Zs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ol(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,On!==null&&(ws(On),On=null))),fs(e,t),Qt(t),null;case 5:Js(t);var o=Dr(yl.current);if(n=t.type,e!==null&&t.stateNode!=null)$d(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Q(166));return Qt(t),null}if(e=Dr(Xn.current),Ol(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Vn]=t,r[hl]=l,e=(t.mode&1)!==0,n){case"dialog":st("cancel",r),st("close",r);break;case"iframe":case"object":case"embed":st("load",r);break;case"video":case"audio":for(o=0;o<Wo.length;o++)st(Wo[o],r);break;case"source":st("error",r);break;case"img":case"image":case"link":st("error",r),st("load",r);break;case"details":st("toggle",r);break;case"input":bc(r,l),st("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},st("invalid",r);break;case"textarea":zc(r,l),st("invalid",r)}ji(n,l),o=null;for(var a in l)if(l.hasOwnProperty(a)){var s=l[a];a==="children"?typeof s=="string"?r.textContent!==s&&(l.suppressHydrationWarning!==!0&&Dl(r.textContent,s,e),o=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(l.suppressHydrationWarning!==!0&&Dl(r.textContent,s,e),o=["children",""+s]):ol.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&st("scroll",r)}switch(n){case"input":Pl(r),Nc(r,l,!0);break;case"textarea":Pl(r),Ec(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=ya)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=c0(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Vn]=t,e[hl]=r,Ld(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ai(n,r),n){case"dialog":st("cancel",e),st("close",e),o=r;break;case"iframe":case"object":case"embed":st("load",e),o=r;break;case"video":case"audio":for(o=0;o<Wo.length;o++)st(Wo[o],e);o=r;break;case"source":st("error",e),o=r;break;case"img":case"image":case"link":st("error",e),st("load",e),o=r;break;case"details":st("toggle",e),o=r;break;case"input":bc(e,r),o=$i(e,r),st("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=yt({},r,{value:void 0}),st("invalid",e);break;case"textarea":zc(e,r),o=Di(e,r),st("invalid",e);break;default:o=r}ji(n,o),s=o;for(l in s)if(s.hasOwnProperty(l)){var c=s[l];l==="style"?f0(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&u0(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ll(e,c):typeof c=="number"&&ll(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ol.hasOwnProperty(l)?c!=null&&l==="onScroll"&&st("scroll",e):c!=null&&Ps(e,l,c,a))}switch(n){case"input":Pl(e),Nc(e,r,!1);break;case"textarea":Pl(e),Ec(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Cr(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?uo(e,!!r.multiple,l,!1):r.defaultValue!=null&&uo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=ya)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qt(t),null;case 6:if(e&&t.stateNode!=null)Id(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Q(166));if(n=Dr(yl.current),Dr(Xn.current),Ol(t)){if(r=t.stateNode,n=t.memoizedProps,r[Vn]=t,(l=r.nodeValue!==n)&&(e=kn,e!==null))switch(e.tag){case 3:Dl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Dl(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vn]=t,t.stateNode=r}return Qt(t),null;case 13:if(ct(ht),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ft&&wn!==null&&t.mode&1&&!(t.flags&128))Z0(),xo(),t.flags|=98560,l=!1;else if(l=Ol(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(Q(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Q(317));l[Vn]=t}else xo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qt(t),l=!1}else On!==null&&(ws(On),On=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ht.current&1?Ot===0&&(Ot=3):dc())),t.updateQueue!==null&&(t.flags|=4),Qt(t),null);case 4:return ko(),fs(e,t),e===null&&fl(t.stateNode.containerInfo),Qt(t),null;case 10:return Ws(t.type._context),Qt(t),null;case 17:return pn(t.type)&&ga(),Qt(t),null;case 19:if(ct(ht),l=t.memoizedState,l===null)return Qt(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)jo(l,!1);else{if(Ot!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Ca(e),a!==null){for(t.flags|=128,jo(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return it(ht,ht.current&1|2),t.child}e=e.sibling}l.tail!==null&&Nt()>So&&(t.flags|=128,r=!0,jo(l,!1),t.lanes=4194304)}else{if(!r)if(e=Ca(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),jo(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!ft)return Qt(t),null}else 2*Nt()-l.renderingStartTime>So&&n!==1073741824&&(t.flags|=128,r=!0,jo(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Nt(),t.sibling=null,n=ht.current,it(ht,r?n&1|2:n&1),t):(Qt(t),null);case 22:case 23:return uc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?xn&1073741824&&(Qt(t),t.subtreeFlags&6&&(t.flags|=8192)):Qt(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function bh(e,t){switch(Vs(t),t.tag){case 1:return pn(t.type)&&ga(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ko(),ct(fn),ct(qt),Zs(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Js(t),null;case 13:if(ct(ht),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));xo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ct(ht),null;case 4:return ko(),null;case 10:return Ws(t.type._context),null;case 22:case 23:return uc(),null;case 24:return null;default:return null}}var Bl=!1,Kt=!1,Nh=typeof WeakSet=="function"?WeakSet:Set,de=null;function so(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){wt(e,t,r)}else n.current=null}function ps(e,t,n){try{n()}catch(r){wt(e,t,r)}}var gu=!1;function zh(e,t){if(Ki=pa,e=A0(),Hs(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var a=0,s=-1,c=-1,d=0,v=0,x=e,w=null;t:for(;;){for(var E;x!==n||o!==0&&x.nodeType!==3||(s=a+o),x!==l||r!==0&&x.nodeType!==3||(c=a+r),x.nodeType===3&&(a+=x.nodeValue.length),(E=x.firstChild)!==null;)w=x,x=E;for(;;){if(x===e)break t;if(w===n&&++d===o&&(s=a),w===l&&++v===r&&(c=a),(E=x.nextSibling)!==null)break;x=w,w=x.parentNode}x=E}n=s===-1||c===-1?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(qi={focusedElem:e,selectionRange:n},pa=!1,de=t;de!==null;)if(t=de,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,de=e;else for(;de!==null;){t=de;try{var S=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var P=S.memoizedProps,I=S.memoizedState,f=t.stateNode,h=f.getSnapshotBeforeUpdate(t.elementType===t.type?P:Fn(t.type,P),I);f.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var u=t.stateNode.containerInfo;u.nodeType===1?u.textContent="":u.nodeType===9&&u.documentElement&&u.removeChild(u.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(y){wt(t,t.return,y)}if(e=t.sibling,e!==null){e.return=t.return,de=e;break}de=t.return}return S=gu,gu=!1,S}function tl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var l=o.destroy;o.destroy=void 0,l!==void 0&&ps(t,n,l)}o=o.next}while(o!==r)}}function Ga(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function hs(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Fd(e){var t=e.alternate;t!==null&&(e.alternate=null,Fd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vn],delete t[hl],delete t[es],delete t[ch],delete t[uh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Dd(e){return e.tag===5||e.tag===3||e.tag===4}function vu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ms(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ya));else if(r!==4&&(e=e.child,e!==null))for(ms(e,t,n),e=e.sibling;e!==null;)ms(e,t,n),e=e.sibling}function ys(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ys(e,t,n),e=e.sibling;e!==null;)ys(e,t,n),e=e.sibling}var Ut=null,Dn=!1;function sr(e,t,n){for(n=n.child;n!==null;)Od(e,t,n),n=n.sibling}function Od(e,t,n){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(Ia,n)}catch{}switch(n.tag){case 5:Kt||so(n,t);case 6:var r=Ut,o=Dn;Ut=null,sr(e,t,n),Ut=r,Dn=o,Ut!==null&&(Dn?(e=Ut,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ut.removeChild(n.stateNode));break;case 18:Ut!==null&&(Dn?(e=Ut,n=n.stateNode,e.nodeType===8?hi(e.parentNode,n):e.nodeType===1&&hi(e,n),cl(e)):hi(Ut,n.stateNode));break;case 4:r=Ut,o=Dn,Ut=n.stateNode.containerInfo,Dn=!0,sr(e,t,n),Ut=r,Dn=o;break;case 0:case 11:case 14:case 15:if(!Kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var l=o,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&ps(n,t,a),o=o.next}while(o!==r)}sr(e,t,n);break;case 1:if(!Kt&&(so(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){wt(n,t,s)}sr(e,t,n);break;case 21:sr(e,t,n);break;case 22:n.mode&1?(Kt=(r=Kt)||n.memoizedState!==null,sr(e,t,n),Kt=r):sr(e,t,n);break;default:sr(e,t,n)}}function xu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Nh),t.forEach(function(r){var o=Fh.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function In(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var l=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Ut=s.stateNode,Dn=!1;break e;case 3:Ut=s.stateNode.containerInfo,Dn=!0;break e;case 4:Ut=s.stateNode.containerInfo,Dn=!0;break e}s=s.return}if(Ut===null)throw Error(Q(160));Od(l,a,o),Ut=null,Dn=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(d){wt(o,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)jd(t,e),t=t.sibling}function jd(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(In(t,e),Hn(e),r&4){try{tl(3,e,e.return),Ga(3,e)}catch(P){wt(e,e.return,P)}try{tl(5,e,e.return)}catch(P){wt(e,e.return,P)}}break;case 1:In(t,e),Hn(e),r&512&&n!==null&&so(n,n.return);break;case 5:if(In(t,e),Hn(e),r&512&&n!==null&&so(n,n.return),e.flags&32){var o=e.stateNode;try{ll(o,"")}catch(P){wt(e,e.return,P)}}if(r&4&&(o=e.stateNode,o!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,s=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{s==="input"&&l.type==="radio"&&l.name!=null&&i0(o,l),Ai(s,a);var d=Ai(s,l);for(a=0;a<c.length;a+=2){var v=c[a],x=c[a+1];v==="style"?f0(o,x):v==="dangerouslySetInnerHTML"?u0(o,x):v==="children"?ll(o,x):Ps(o,v,x,d)}switch(s){case"input":Ii(o,l);break;case"textarea":s0(o,l);break;case"select":var w=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var E=l.value;E!=null?uo(o,!!l.multiple,E,!1):w!==!!l.multiple&&(l.defaultValue!=null?uo(o,!!l.multiple,l.defaultValue,!0):uo(o,!!l.multiple,l.multiple?[]:"",!1))}o[hl]=l}catch(P){wt(e,e.return,P)}}break;case 6:if(In(t,e),Hn(e),r&4){if(e.stateNode===null)throw Error(Q(162));o=e.stateNode,l=e.memoizedProps;try{o.nodeValue=l}catch(P){wt(e,e.return,P)}}break;case 3:if(In(t,e),Hn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{cl(t.containerInfo)}catch(P){wt(e,e.return,P)}break;case 4:In(t,e),Hn(e);break;case 13:In(t,e),Hn(e),o=e.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(sc=Nt())),r&4&&xu(e);break;case 22:if(v=n!==null&&n.memoizedState!==null,e.mode&1?(Kt=(d=Kt)||v,In(t,e),Kt=d):In(t,e),Hn(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!v&&e.mode&1)for(de=e,v=e.child;v!==null;){for(x=de=v;de!==null;){switch(w=de,E=w.child,w.tag){case 0:case 11:case 14:case 15:tl(4,w,w.return);break;case 1:so(w,w.return);var S=w.stateNode;if(typeof S.componentWillUnmount=="function"){r=w,n=w.return;try{t=r,S.props=t.memoizedProps,S.state=t.memoizedState,S.componentWillUnmount()}catch(P){wt(r,n,P)}}break;case 5:so(w,w.return);break;case 22:if(w.memoizedState!==null){ku(x);continue}}E!==null?(E.return=w,de=E):ku(x)}v=v.sibling}e:for(v=null,x=e;;){if(x.tag===5){if(v===null){v=x;try{o=x.stateNode,d?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(s=x.stateNode,c=x.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,s.style.display=d0("display",a))}catch(P){wt(e,e.return,P)}}}else if(x.tag===6){if(v===null)try{x.stateNode.nodeValue=d?"":x.memoizedProps}catch(P){wt(e,e.return,P)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===e)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===e)break e;for(;x.sibling===null;){if(x.return===null||x.return===e)break e;v===x&&(v=null),x=x.return}v===x&&(v=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:In(t,e),Hn(e),r&4&&xu(e);break;case 21:break;default:In(t,e),Hn(e)}}function Hn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Dd(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(ll(o,""),r.flags&=-33);var l=vu(e);ys(e,l,o);break;case 3:case 4:var a=r.stateNode.containerInfo,s=vu(e);ms(e,s,a);break;default:throw Error(Q(161))}}catch(c){wt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Eh(e,t,n){de=e,Ad(e)}function Ad(e,t,n){for(var r=(e.mode&1)!==0;de!==null;){var o=de,l=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||Bl;if(!a){var s=o.alternate,c=s!==null&&s.memoizedState!==null||Kt;s=Bl;var d=Kt;if(Bl=a,(Kt=c)&&!d)for(de=o;de!==null;)a=de,c=a.child,a.tag===22&&a.memoizedState!==null?Mu(o):c!==null?(c.return=a,de=c):Mu(o);for(;l!==null;)de=l,Ad(l),l=l.sibling;de=o,Bl=s,Kt=d}wu(e)}else o.subtreeFlags&8772&&l!==null?(l.return=o,de=l):wu(e)}}function wu(e){for(;de!==null;){var t=de;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Kt||Ga(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Kt)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Fn(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&ou(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ou(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var v=d.memoizedState;if(v!==null){var x=v.dehydrated;x!==null&&cl(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Kt||t.flags&512&&hs(t)}catch(w){wt(t,t.return,w)}}if(t===e){de=null;break}if(n=t.sibling,n!==null){n.return=t.return,de=n;break}de=t.return}}function ku(e){for(;de!==null;){var t=de;if(t===e){de=null;break}var n=t.sibling;if(n!==null){n.return=t.return,de=n;break}de=t.return}}function Mu(e){for(;de!==null;){var t=de;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ga(4,t)}catch(c){wt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(c){wt(t,o,c)}}var l=t.return;try{hs(t)}catch(c){wt(t,l,c)}break;case 5:var a=t.return;try{hs(t)}catch(c){wt(t,a,c)}}}catch(c){wt(t,t.return,c)}if(t===e){de=null;break}var s=t.sibling;if(s!==null){s.return=t.return,de=s;break}de=t.return}}var Ph=Math.ceil,za=rr.ReactCurrentDispatcher,ac=rr.ReactCurrentOwner,Tn=rr.ReactCurrentBatchConfig,Qe=0,Ht=null,Lt=null,Xt=0,xn=0,co=zr(0),Ot=0,wl=null,Gr=0,Va=0,ic=0,nl=null,un=null,sc=0,So=1/0,Wn=null,Ea=!1,gs=null,kr=null,Hl=!1,mr=null,Pa=0,rl=0,vs=null,la=-1,aa=0;function nn(){return Qe&6?Nt():la!==-1?la:la=Nt()}function Mr(e){return e.mode&1?Qe&2&&Xt!==0?Xt&-Xt:fh.transition!==null?(aa===0&&(aa=C0()),aa):(e=et,e!==0||(e=window.event,e=e===void 0?16:_0(e.type)),e):1}function An(e,t,n,r){if(50<rl)throw rl=0,vs=null,Error(Q(185));Ml(e,n,r),(!(Qe&2)||e!==Ht)&&(e===Ht&&(!(Qe&2)&&(Va|=n),Ot===4&&pr(e,Xt)),hn(e,r),n===1&&Qe===0&&!(t.mode&1)&&(So=Nt()+500,Aa&&Er()))}function hn(e,t){var n=e.callbackNode;fp(e,t);var r=fa(e,e===Ht?Xt:0);if(r===0)n!==null&&_c(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&_c(n),t===1)e.tag===0?dh(Su.bind(null,e)):K0(Su.bind(null,e)),ih(function(){!(Qe&6)&&Er()}),n=null;else{switch(b0(r)){case 1:n=$s;break;case 4:n=M0;break;case 16:n=da;break;case 536870912:n=S0;break;default:n=da}n=Wd(n,Bd.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Bd(e,t){if(la=-1,aa=0,Qe&6)throw Error(Q(327));var n=e.callbackNode;if(yo()&&e.callbackNode!==n)return null;var r=fa(e,e===Ht?Xt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ta(e,r);else{t=r;var o=Qe;Qe|=2;var l=Gd();(Ht!==e||Xt!==t)&&(Wn=null,So=Nt()+500,Or(e,t));do try{Rh();break}catch(s){Hd(e,s)}while(1);Ys(),za.current=l,Qe=o,Lt!==null?t=0:(Ht=null,Xt=0,t=Ot)}if(t!==0){if(t===2&&(o=Ui(e),o!==0&&(r=o,t=xs(e,o))),t===1)throw n=wl,Or(e,0),pr(e,r),hn(e,Nt()),n;if(t===6)pr(e,r);else{if(o=e.current.alternate,!(r&30)&&!Th(o)&&(t=Ta(e,r),t===2&&(l=Ui(e),l!==0&&(r=l,t=xs(e,l))),t===1))throw n=wl,Or(e,0),pr(e,r),hn(e,Nt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(Q(345));case 2:Lr(e,un,Wn);break;case 3:if(pr(e,r),(r&130023424)===r&&(t=sc+500-Nt(),10<t)){if(fa(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){nn(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Zi(Lr.bind(null,e,un,Wn),t);break}Lr(e,un,Wn);break;case 4:if(pr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-jn(r);l=1<<a,a=t[a],a>o&&(o=a),r&=~l}if(r=o,r=Nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ph(r/1960))-r,10<r){e.timeoutHandle=Zi(Lr.bind(null,e,un,Wn),r);break}Lr(e,un,Wn);break;case 5:Lr(e,un,Wn);break;default:throw Error(Q(329))}}}return hn(e,Nt()),e.callbackNode===n?Bd.bind(null,e):null}function xs(e,t){var n=nl;return e.current.memoizedState.isDehydrated&&(Or(e,t).flags|=256),e=Ta(e,t),e!==2&&(t=un,un=n,t!==null&&ws(t)),e}function ws(e){un===null?un=e:un.push.apply(un,e)}function Th(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],l=o.getSnapshot;o=o.value;try{if(!Bn(l(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function pr(e,t){for(t&=~ic,t&=~Va,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-jn(t),r=1<<n;e[n]=-1,t&=~r}}function Su(e){if(Qe&6)throw Error(Q(327));yo();var t=fa(e,0);if(!(t&1))return hn(e,Nt()),null;var n=Ta(e,t);if(e.tag!==0&&n===2){var r=Ui(e);r!==0&&(t=r,n=xs(e,r))}if(n===1)throw n=wl,Or(e,0),pr(e,t),hn(e,Nt()),n;if(n===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Lr(e,un,Wn),hn(e,Nt()),null}function cc(e,t){var n=Qe;Qe|=1;try{return e(t)}finally{Qe=n,Qe===0&&(So=Nt()+500,Aa&&Er())}}function Vr(e){mr!==null&&mr.tag===0&&!(Qe&6)&&yo();var t=Qe;Qe|=1;var n=Tn.transition,r=et;try{if(Tn.transition=null,et=1,e)return e()}finally{et=r,Tn.transition=n,Qe=t,!(Qe&6)&&Er()}}function uc(){xn=co.current,ct(co)}function Or(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ah(n)),Lt!==null)for(n=Lt.return;n!==null;){var r=n;switch(Vs(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ga();break;case 3:ko(),ct(fn),ct(qt),Zs();break;case 5:Js(r);break;case 4:ko();break;case 13:ct(ht);break;case 19:ct(ht);break;case 10:Ws(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Ht=e,Lt=e=Sr(e.current,null),Xt=xn=t,Ot=0,wl=null,ic=Va=Gr=0,un=nl=null,Fr!==null){for(t=0;t<Fr.length;t++)if(n=Fr[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=o,r.next=a}n.pending=r}Fr=null}return e}function Hd(e,t){do{var n=Lt;try{if(Ys(),na.current=Na,ba){for(var r=mt.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}ba=!1}if(Hr=0,Bt=Dt=mt=null,el=!1,gl=0,ac.current=null,n===null||n.return===null){Ot=1,wl=t,Lt=null;break}e:{var l=e,a=n.return,s=n,c=t;if(t=Xt,s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,v=s,x=v.tag;if(!(v.mode&1)&&(x===0||x===11||x===15)){var w=v.alternate;w?(v.updateQueue=w.updateQueue,v.memoizedState=w.memoizedState,v.lanes=w.lanes):(v.updateQueue=null,v.memoizedState=null)}var E=uu(a);if(E!==null){E.flags&=-257,du(E,a,s,l,t),E.mode&1&&cu(l,d,t),t=E,c=d;var S=t.updateQueue;if(S===null){var P=new Set;P.add(c),t.updateQueue=P}else S.add(c);break e}else{if(!(t&1)){cu(l,d,t),dc();break e}c=Error(Q(426))}}else if(ft&&s.mode&1){var I=uu(a);if(I!==null){!(I.flags&65536)&&(I.flags|=256),du(I,a,s,l,t),Us(Mo(c,s));break e}}l=c=Mo(c,s),Ot!==4&&(Ot=2),nl===null?nl=[l]:nl.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var f=bd(l,c,t);ru(l,f);break e;case 1:s=c;var h=l.type,u=l.stateNode;if(!(l.flags&128)&&(typeof h.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(kr===null||!kr.has(u)))){l.flags|=65536,t&=-t,l.lanes|=t;var y=Nd(l,s,t);ru(l,y);break e}}l=l.return}while(l!==null)}Ud(n)}catch(N){t=N,Lt===n&&n!==null&&(Lt=n=n.return);continue}break}while(1)}function Gd(){var e=za.current;return za.current=Na,e===null?Na:e}function dc(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),Ht===null||!(Gr&268435455)&&!(Va&268435455)||pr(Ht,Xt)}function Ta(e,t){var n=Qe;Qe|=2;var r=Gd();(Ht!==e||Xt!==t)&&(Wn=null,Or(e,t));do try{_h();break}catch(o){Hd(e,o)}while(1);if(Ys(),Qe=n,za.current=r,Lt!==null)throw Error(Q(261));return Ht=null,Xt=0,Ot}function _h(){for(;Lt!==null;)Vd(Lt)}function Rh(){for(;Lt!==null&&!rp();)Vd(Lt)}function Vd(e){var t=Yd(e.alternate,e,xn);e.memoizedProps=e.pendingProps,t===null?Ud(e):Lt=t,ac.current=null}function Ud(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=bh(n,t),n!==null){n.flags&=32767,Lt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ot=6,Lt=null;return}}else if(n=Ch(n,t,xn),n!==null){Lt=n;return}if(t=t.sibling,t!==null){Lt=t;return}Lt=t=e}while(t!==null);Ot===0&&(Ot=5)}function Lr(e,t,n){var r=et,o=Tn.transition;try{Tn.transition=null,et=1,Lh(e,t,n,r)}finally{Tn.transition=o,et=r}return null}function Lh(e,t,n,r){do yo();while(mr!==null);if(Qe&6)throw Error(Q(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(pp(e,l),e===Ht&&(Lt=Ht=null,Xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hl||(Hl=!0,Wd(da,function(){return yo(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Tn.transition,Tn.transition=null;var a=et;et=1;var s=Qe;Qe|=4,ac.current=null,zh(e,n),jd(n,e),Zp(qi),pa=!!Ki,qi=Ki=null,e.current=n,Eh(n),op(),Qe=s,et=a,Tn.transition=l}else e.current=n;if(Hl&&(Hl=!1,mr=e,Pa=o),l=e.pendingLanes,l===0&&(kr=null),ip(n.stateNode),hn(e,Nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Ea)throw Ea=!1,e=gs,gs=null,e;return Pa&1&&e.tag!==0&&yo(),l=e.pendingLanes,l&1?e===vs?rl++:(rl=0,vs=e):rl=0,Er(),null}function yo(){if(mr!==null){var e=b0(Pa),t=Tn.transition,n=et;try{if(Tn.transition=null,et=16>e?16:e,mr===null)var r=!1;else{if(e=mr,mr=null,Pa=0,Qe&6)throw Error(Q(331));var o=Qe;for(Qe|=4,de=e.current;de!==null;){var l=de,a=l.child;if(de.flags&16){var s=l.deletions;if(s!==null){for(var c=0;c<s.length;c++){var d=s[c];for(de=d;de!==null;){var v=de;switch(v.tag){case 0:case 11:case 15:tl(8,v,l)}var x=v.child;if(x!==null)x.return=v,de=x;else for(;de!==null;){v=de;var w=v.sibling,E=v.return;if(Fd(v),v===d){de=null;break}if(w!==null){w.return=E,de=w;break}de=E}}}var S=l.alternate;if(S!==null){var P=S.child;if(P!==null){S.child=null;do{var I=P.sibling;P.sibling=null,P=I}while(P!==null)}}de=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,de=a;else e:for(;de!==null;){if(l=de,l.flags&2048)switch(l.tag){case 0:case 11:case 15:tl(9,l,l.return)}var f=l.sibling;if(f!==null){f.return=l.return,de=f;break e}de=l.return}}var h=e.current;for(de=h;de!==null;){a=de;var u=a.child;if(a.subtreeFlags&2064&&u!==null)u.return=a,de=u;else e:for(a=h;de!==null;){if(s=de,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Ga(9,s)}}catch(N){wt(s,s.return,N)}if(s===a){de=null;break e}var y=s.sibling;if(y!==null){y.return=s.return,de=y;break e}de=s.return}}if(Qe=o,Er(),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(Ia,e)}catch{}r=!0}return r}finally{et=n,Tn.transition=t}}return!1}function Cu(e,t,n){t=Mo(n,t),t=bd(e,t,1),e=wr(e,t,1),t=nn(),e!==null&&(Ml(e,1,t),hn(e,t))}function wt(e,t,n){if(e.tag===3)Cu(e,e,n);else for(;t!==null;){if(t.tag===3){Cu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(kr===null||!kr.has(r))){e=Mo(n,e),e=Nd(t,e,1),t=wr(t,e,1),e=nn(),t!==null&&(Ml(t,1,e),hn(t,e));break}}t=t.return}}function $h(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=nn(),e.pingedLanes|=e.suspendedLanes&n,Ht===e&&(Xt&n)===n&&(Ot===4||Ot===3&&(Xt&130023424)===Xt&&500>Nt()-sc?Or(e,0):ic|=n),hn(e,t)}function Xd(e,t){t===0&&(e.mode&1?(t=Rl,Rl<<=1,!(Rl&130023424)&&(Rl=4194304)):t=1);var n=nn();e=tr(e,t),e!==null&&(Ml(e,t,n),hn(e,n))}function Ih(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Xd(e,n)}function Fh(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(t),Xd(e,n)}var Yd;Yd=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||fn.current)dn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return dn=!1,Sh(e,t,n);dn=!!(e.flags&131072)}else dn=!1,ft&&t.flags&1048576&&q0(t,wa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;oa(e,t),e=t.pendingProps;var o=vo(t,qt.current);mo(t,n),o=tc(null,t,r,e,o,n);var l=nc();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pn(r)?(l=!0,va(t)):l=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Ks(t),o.updater=Ha,t.stateNode=o,o._reactInternals=t,as(t,r,e,n),t=cs(null,t,r,!0,l,n)):(t.tag=0,ft&&l&&Gs(t),en(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(oa(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=Oh(r),e=Fn(r,e),o){case 0:t=ss(null,t,r,e,n);break e;case 1:t=hu(null,t,r,e,n);break e;case 11:t=fu(null,t,r,e,n);break e;case 14:t=pu(null,t,r,Fn(r.type,e),n);break e}throw Error(Q(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Fn(r,o),ss(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Fn(r,o),hu(e,t,r,o,n);case 3:e:{if(Td(t),e===null)throw Error(Q(387));r=t.pendingProps,l=t.memoizedState,o=l.element,rd(e,t),Sa(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){o=Mo(Error(Q(423)),t),t=mu(e,t,r,n,o);break e}else if(r!==o){o=Mo(Error(Q(424)),t),t=mu(e,t,r,n,o);break e}else for(wn=xr(t.stateNode.containerInfo.firstChild),kn=t,ft=!0,On=null,n=td(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xo(),r===o){t=nr(e,t,n);break e}en(e,t,r,n)}t=t.child}return t;case 5:return od(t),e===null&&rs(t),r=t.type,o=t.pendingProps,l=e!==null?e.memoizedProps:null,a=o.children,Ji(r,o)?a=null:l!==null&&Ji(r,l)&&(t.flags|=32),Pd(e,t),en(e,t,a,n),t.child;case 6:return e===null&&rs(t),null;case 13:return _d(e,t,n);case 4:return qs(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=wo(t,null,r,n):en(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Fn(r,o),fu(e,t,r,o,n);case 7:return en(e,t,t.pendingProps,n),t.child;case 8:return en(e,t,t.pendingProps.children,n),t.child;case 12:return en(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,l=t.memoizedProps,a=o.value,it(ka,r._currentValue),r._currentValue=a,l!==null)if(Bn(l.value,a)){if(l.children===o.children&&!fn.current){t=nr(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var s=l.dependencies;if(s!==null){a=l.child;for(var c=s.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=Jn(-1,n&-n),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var v=d.pending;v===null?c.next=c:(c.next=v.next,v.next=c),d.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),os(l.return,n,t),s.lanes|=n;break}c=c.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(Q(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),os(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}en(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,mo(t,n),o=_n(o),r=r(o),t.flags|=1,en(e,t,r,n),t.child;case 14:return r=t.type,o=Fn(r,t.pendingProps),o=Fn(r.type,o),pu(e,t,r,o,n);case 15:return zd(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Fn(r,o),oa(e,t),t.tag=1,pn(r)?(e=!0,va(t)):e=!1,mo(t,n),Cd(t,r,o),as(t,r,o,n),cs(null,t,r,!0,e,n);case 19:return Rd(e,t,n);case 22:return Ed(e,t,n)}throw Error(Q(156,t.tag))};function Wd(e,t){return k0(e,t)}function Dh(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(e,t,n,r){return new Dh(e,t,n,r)}function fc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Oh(e){if(typeof e=="function")return fc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_s)return 11;if(e===Rs)return 14}return 2}function Sr(e,t){var n=e.alternate;return n===null?(n=Pn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ia(e,t,n,r,o,l){var a=2;if(r=e,typeof e=="function")fc(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Zr:return jr(n.children,o,l,t);case Ts:a=8,o|=8;break;case Ti:return e=Pn(12,n,t,o|2),e.elementType=Ti,e.lanes=l,e;case _i:return e=Pn(13,n,t,o),e.elementType=_i,e.lanes=l,e;case Ri:return e=Pn(19,n,t,o),e.elementType=Ri,e.lanes=l,e;case o0:return Ua(n,o,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case n0:a=10;break e;case r0:a=9;break e;case _s:a=11;break e;case Rs:a=14;break e;case ur:a=16,r=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=Pn(a,n,t,o),t.elementType=e,t.type=r,t.lanes=l,t}function jr(e,t,n,r){return e=Pn(7,e,r,t),e.lanes=n,e}function Ua(e,t,n,r){return e=Pn(22,e,r,t),e.elementType=o0,e.lanes=n,e.stateNode={isHidden:!1},e}function Mi(e,t,n){return e=Pn(6,e,null,t),e.lanes=n,e}function Si(e,t,n){return t=Pn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jh(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ri(0),this.expirationTimes=ri(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ri(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function pc(e,t,n,r,o,l,a,s,c){return e=new jh(e,t,n,s,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Pn(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ks(l),e}function Ah(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Qd(e){if(!e)return br;e=e._reactInternals;e:{if(Xr(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var n=e.type;if(pn(n))return Q0(e,n,t)}return t}function Kd(e,t,n,r,o,l,a,s,c){return e=pc(n,r,!0,e,o,l,a,s,c),e.context=Qd(null),n=e.current,r=nn(),o=Mr(n),l=Jn(r,o),l.callback=t??null,wr(n,l,o),e.current.lanes=o,Ml(e,o,r),hn(e,r),e}function Xa(e,t,n,r){var o=t.current,l=nn(),a=Mr(o);return n=Qd(n),t.context===null?t.context=n:t.pendingContext=n,t=Jn(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=wr(o,t,a),e!==null&&(An(e,o,a,l),ta(e,o,a)),a}function _a(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function bu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function hc(e,t){bu(e,t),(e=e.alternate)&&bu(e,t)}function Bh(){return null}var qd=typeof reportError=="function"?reportError:function(e){console.error(e)};function mc(e){this._internalRoot=e}Ya.prototype.render=mc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));Xa(e,t,null,null)};Ya.prototype.unmount=mc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vr(function(){Xa(null,e,null,null)}),t[er]=null}};function Ya(e){this._internalRoot=e}Ya.prototype.unstable_scheduleHydration=function(e){if(e){var t=E0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<fr.length&&t!==0&&t<fr[n].priority;n++);fr.splice(n,0,e),n===0&&T0(e)}};function yc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nu(){}function Hh(e,t,n,r,o){if(o){if(typeof r=="function"){var l=r;r=function(){var d=_a(a);l.call(d)}}var a=Kd(t,r,e,0,null,!1,!1,"",Nu);return e._reactRootContainer=a,e[er]=a.current,fl(e.nodeType===8?e.parentNode:e),Vr(),a}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var s=r;r=function(){var d=_a(c);s.call(d)}}var c=pc(e,0,!1,null,null,!1,!1,"",Nu);return e._reactRootContainer=c,e[er]=c.current,fl(e.nodeType===8?e.parentNode:e),Vr(function(){Xa(t,c,n,r)}),c}function Qa(e,t,n,r,o){var l=n._reactRootContainer;if(l){var a=l;if(typeof o=="function"){var s=o;o=function(){var c=_a(a);s.call(c)}}Xa(t,a,e,o)}else a=Hh(n,t,e,o,r);return _a(a)}N0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Yo(t.pendingLanes);n!==0&&(Is(t,n|1),hn(t,Nt()),!(Qe&6)&&(So=Nt()+500,Er()))}break;case 13:Vr(function(){var r=tr(e,1);if(r!==null){var o=nn();An(r,e,1,o)}}),hc(e,1)}};Fs=function(e){if(e.tag===13){var t=tr(e,134217728);if(t!==null){var n=nn();An(t,e,134217728,n)}hc(e,134217728)}};z0=function(e){if(e.tag===13){var t=Mr(e),n=tr(e,t);if(n!==null){var r=nn();An(n,e,t,r)}hc(e,t)}};E0=function(){return et};P0=function(e,t){var n=et;try{return et=e,t()}finally{et=n}};Hi=function(e,t,n){switch(t){case"input":if(Ii(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=ja(r);if(!o)throw Error(Q(90));a0(r),Ii(r,o)}}}break;case"textarea":s0(e,n);break;case"select":t=n.value,t!=null&&uo(e,!!n.multiple,t,!1)}};m0=cc;y0=Vr;var Gh={usingClientEntryPoint:!1,Events:[Cl,ro,ja,p0,h0,cc]},Ao={findFiberByHostInstance:Ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vh={bundleType:Ao.bundleType,version:Ao.version,rendererPackageName:Ao.rendererPackageName,rendererConfig:Ao.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=x0(e),e===null?null:e.stateNode},findFiberByHostInstance:Ao.findFiberByHostInstance||Bh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gl.isDisabled&&Gl.supportsFiber)try{Ia=Gl.inject(Vh),Un=Gl}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gh;Sn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yc(t))throw Error(Q(200));return Ah(e,t,null,n)};Sn.createRoot=function(e,t){if(!yc(e))throw Error(Q(299));var n=!1,r="",o=qd;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=pc(e,1,!1,null,null,n,!1,r,o),e[er]=t.current,fl(e.nodeType===8?e.parentNode:e),new mc(t)};Sn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=x0(t),e=e===null?null:e.stateNode,e};Sn.flushSync=function(e){return Vr(e)};Sn.hydrate=function(e,t,n){if(!Wa(t))throw Error(Q(200));return Qa(null,e,t,!0,n)};Sn.hydrateRoot=function(e,t,n){if(!yc(e))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,o=!1,l="",a=qd;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Kd(t,null,e,1,n??null,o,!1,l,a),e[er]=t.current,fl(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Ya(t)};Sn.render=function(e,t,n){if(!Wa(t))throw Error(Q(200));return Qa(null,e,t,!1,n)};Sn.unmountComponentAtNode=function(e){if(!Wa(e))throw Error(Q(40));return e._reactRootContainer?(Vr(function(){Qa(null,null,e,!1,function(){e._reactRootContainer=null,e[er]=null})}),!0):!1};Sn.unstable_batchedUpdates=cc;Sn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Wa(n))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return Qa(e,t,n,!1,r)};Sn.version="18.3.1-next-f1338f8080-20240426";function Jd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jd)}catch(e){console.error(e)}}Jd(),Ju.exports=Sn;var Uh=Ju.exports,zu=Uh;Ei.createRoot=zu.createRoot,Ei.hydrateRoot=zu.hydrateRoot;/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Yh=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Eu=e=>{const t=Yh(e);return t.charAt(0).toUpperCase()+t.slice(1)},Zd=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),Wh=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:l,iconNode:a,...s},c)=>g.createElement("svg",{ref:c,...Qh,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Zd("lucide",o),...!l&&!Wh(s)&&{"aria-hidden":"true"},...s},[...a.map(([d,v])=>g.createElement(d,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=(e,t)=>{const n=g.forwardRef(({className:r,...o},l)=>g.createElement(Kh,{ref:l,iconNode:t,className:Zd(`lucide-${Xh(Eu(e))}`,`lucide-${e}`,r),...o}));return n.displayName=Eu(e),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m14.31 8 5.74 9.94",key:"1y6ab4"}],["path",{d:"M9.69 8h11.48",key:"1wxppr"}],["path",{d:"m7.38 12 5.74-9.94",key:"1grp0k"}],["path",{d:"M9.69 16 3.95 6.06",key:"libnyf"}],["path",{d:"M14.31 16H2.83",key:"x5fava"}],["path",{d:"m16.62 12-5.74 9.94",key:"1vwawt"}]],Jh=fe("aperture",qh);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]],e1=fe("atom",Zh);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],n1=fe("ban",t1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],ef=fe("beaker",r1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=[["circle",{cx:"9",cy:"9",r:"7",key:"p2h5vp"}],["circle",{cx:"15",cy:"15",r:"7",key:"19ennj"}]],l1=fe("blend",o1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=[["path",{d:"m11 10 3 3",key:"fzmg1i"}],["path",{d:"M6.5 21A3.5 3.5 0 1 0 3 17.5a2.62 2.62 0 0 1-.708 1.792A1 1 0 0 0 3 21z",key:"p4q2r7"}],["path",{d:"M9.969 17.031 21.378 5.624a1 1 0 0 0-3.002-3.002L6.967 14.031",key:"wy6l02"}]],Co=fe("brush",a1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],tf=fe("chevron-left",i1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],c1=fe("chevron-right",s1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],d1=fe("circle",u1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 17H7",key:"pygtm1"}],["path",{d:"M17 21H9",key:"1u2q02"}]],p1=fe("cloud-fog",f1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],m1=fe("cloud-rain",h1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]],g1=fe("cloud-sun",y1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Pu=fe("cloud",v1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],w1=fe("download",x1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],M1=fe("droplet",k1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a7 7 0 1 0 10 10",key:"1yuj32"}]],C1=fe("eclipse",S1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],N1=fe("eraser",b1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],E1=fe("eye-off",z1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nf=fe("eye",P1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],_1=fe("file-text",T1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],L1=fe("film",R1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],rf=fe("flame",$1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]],F1=fe("flip-horizontal",I1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],of=fe("grip-horizontal",D1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],lf=fe("grip-vertical",O1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],A1=fe("image",j1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["path",{d:"M3.704 14.467A10 8 0 0 1 2 10a10 8 0 0 1 20 0 10 8 0 0 1-10 8 10 8 0 0 1-5.181-1.158",key:"1yant3"}],["path",{d:"M7 22a5 5 0 0 1-2-3.994",key:"1xp6a4"}],["circle",{cx:"5",cy:"16",r:"2",key:"18csp3"}]],H1=fe("lasso",B1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],V1=fe("layers",G1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],X1=fe("maximize",U1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["path",{d:"M5 12h14",key:"1ays0h"}]],W1=fe("minus",Y1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],af=fe("moon",Q1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["path",{d:"M11 7 6 2",key:"1jwth8"}],["path",{d:"M18.992 12H2.041",key:"xw1gg"}],["path",{d:"M21.145 18.38A3.34 3.34 0 0 1 20 16.5a3.3 3.3 0 0 1-1.145 1.88c-.575.46-.855 1.02-.855 1.595A2 2 0 0 0 20 22a2 2 0 0 0 2-2.025c0-.58-.285-1.13-.855-1.595",key:"1nkol4"}],["path",{d:"m8.5 4.5 2.148-2.148a1.205 1.205 0 0 1 1.704 0l7.296 7.296a1.205 1.205 0 0 1 0 1.704l-7.592 7.592a3.615 3.615 0 0 1-5.112 0l-3.888-3.888a3.615 3.615 0 0 1 0-5.112L5.67 7.33",key:"1nk1rd"}]],q1=fe("paint-bucket",K1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Tu=fe("palette",J1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],em=fe("plus",Z1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],nm=fe("printer",tm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],om=fe("rectangle-horizontal",rm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],am=fe("redo-2",lm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],sm=fe("refresh-cw",im);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],um=fe("rotate-ccw",cm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],fm=fe("rotate-cw",dm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],hm=fe("scan",pm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],ks=fe("settings-2",mm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],gm=fe("shuffle",ym);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],_u=fe("sliders-horizontal",vm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],sf=fe("sparkles",xm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=[["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M5 17A12 12 0 0 1 17 5",key:"1okkup"}]],km=fe("spline",wm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=[["path",{d:"M3 3h.01",key:"159qn6"}],["path",{d:"M7 5h.01",key:"1hq22a"}],["path",{d:"M11 7h.01",key:"1osv80"}],["path",{d:"M3 7h.01",key:"1xzrh3"}],["path",{d:"M7 9h.01",key:"19b3jx"}],["path",{d:"M3 11h.01",key:"1eifu7"}],["rect",{width:"4",height:"4",x:"15",y:"5",key:"mri9e4"}],["path",{d:"m19 9 2 2v10c0 .6-.4 1-1 1h-6c-.6 0-1-.4-1-1V11l2-2",key:"aib6hk"}],["path",{d:"m13 14 8-2",key:"1d7bmk"}],["path",{d:"m13 19 8-2",key:"1y2vml"}]],Sm=fe("spray-can",Mm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=[["path",{d:"M5 3a2 2 0 0 0-2 2",key:"y57alp"}],["path",{d:"M19 3a2 2 0 0 1 2 2",key:"18rm91"}],["path",{d:"M21 19a2 2 0 0 1-2 2",key:"1j7049"}],["path",{d:"M5 21a2 2 0 0 1-2-2",key:"sbafld"}],["path",{d:"M9 3h1",key:"1yesri"}],["path",{d:"M9 21h1",key:"15o7lz"}],["path",{d:"M14 3h1",key:"1ec4yj"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"M3 9v1",key:"1r0deq"}],["path",{d:"M21 9v1",key:"mxsmne"}],["path",{d:"M3 14v1",key:"vnatye"}],["path",{d:"M21 14v1",key:"169vum"}]],bm=fe("square-dashed",Cm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],zm=fe("square",Nm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=[["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-6 0c0 2 1 2 1 3.5V13",key:"i9gjdv"}],["path",{d:"M20 15.5a2.5 2.5 0 0 0-2.5-2.5h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1z",key:"1vzg3v"}],["path",{d:"M5 22h14",key:"ehvnwv"}]],cf=fe("stamp",Em);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],Tm=fe("sticky-note",Pm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],$r=fe("sun",_m);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],uf=fe("sunrise",Rm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],df=fe("sunset",Lm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],Im=fe("thermometer",$m);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ru=fe("trash-2",Fm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],Om=fe("undo-2",Dm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Am=fe("upload",jm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],Hm=fe("waves",Bm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],Ci=fe("wind",Gm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ra=fe("x",Vm);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],La=fe("zap",Um),Xm=["Standard","Kodak 2383","Kodak Portra 400","Kodak Ektar 100","Cinestill 800T","Fuji Velvia 50","Ilford HP5 Plus"],Ym=({settings:e,onChange:t,washTemp:n,onWashChange:r,washIntensity:o,onWashIntensityChange:l,onUploadTexture:a,isOpen:s,onClose:c,isMobile:d,onExport:v})=>{const[x,w]=g.useState(null),E=u=>{w(x===u?null:u)},S=(u,y)=>{t(u==="skyEnabled"&&y===!0?{...e,skyEnabled:!0,useTexture:!1}:u==="useTexture"&&y===!0?{...e,useTexture:!0,skyEnabled:!1}:{...e,[u]:y})},P=(u,y,N,H,F,K,ve="accent-zinc-400")=>b("div",{className:"space-y-1",children:[b("div",{className:"flex justify-between text-[9px] text-zinc-300 font-bold uppercase tracking-wider",children:[i("span",{children:u}),i("span",{className:"text-zinc-400 font-mono",children:Math.abs(y)<1&&y!==0?y.toFixed(2):Math.round(y)})]}),i("input",{type:"range",min:N,max:H,step:F,value:y,onChange:le=>K(Number(le.target.value)),className:`w-full h-1 bg-zinc-700/50 rounded-full appearance-none cursor-pointer ${ve}`})]}),I=({icon:u,active:y,onClick:N,color:H="text-zinc-400",label:F})=>i("button",{onClick:N,title:F,className:`p-2.5 rounded-full transition-all duration-200 group relative ${y?"bg-white/10 text-zinc-100 shadow-sm shadow-white/5 ring-1 ring-white/10":"bg-transparent text-zinc-500 hover:bg-white/5 hover:text-zinc-200"}`,children:i(u,{className:`w-4 h-4 ${y?"text-zinc-100":H}`,strokeWidth:y?2.5:1.5})}),f=()=>{switch(x){case"export":return b("div",{className:"grid grid-cols-1 gap-2",children:[i("button",{onClick:()=>v(!1),className:"h-8 bg-zinc-800/40 hover:bg-zinc-800/60 border border-white/10 hover:border-white/20 rounded-lg flex items-center justify-center gap-2 transition-all text-zinc-300",children:i("span",{className:"text-[9px] font-bold uppercase tracking-widest",children:"Standard PNG"})}),i("button",{onClick:()=>v(!0),className:"h-8 bg-indigo-500/20 hover:bg-indigo-500/30 border border-indigo-500/30 hover:border-indigo-500/50 rounded-lg flex items-center justify-center gap-2 transition-all text-indigo-300",children:i("span",{className:"text-[9px] font-bold uppercase tracking-widest",children:"4K High-Res"})})]});case"atmosphere":return b("div",{className:"space-y-4",children:[b("div",{className:"flex items-center justify-between",children:[i("span",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Enable Sky"}),i("button",{onClick:()=>S("skyEnabled",!e.skyEnabled),className:`w-7 h-3.5 rounded-full p-0.5 transition-colors ${e.skyEnabled?"bg-orange-500":"bg-zinc-700"}`,children:i("div",{className:`w-2.5 h-2.5 rounded-full bg-white shadow-sm transition-transform duration-300 ${e.skyEnabled?"translate-x-3.5":"translate-x-0"}`})})]}),b("div",{className:`space-y-3 transition-opacity ${e.skyEnabled?"":"opacity-30 pointer-events-none"}`,children:[P("Time",e.sunElevation,-.3,1,.01,u=>S("sunElevation",u),"accent-orange-500"),P("Azimuth",e.sunAzimuth,0,1,.01,u=>S("sunAzimuth",u),"accent-orange-500"),P("Density",e.atmosphereDensity,0,1,.01,u=>S("atmosphereDensity",u)),P("Haze",e.gradientHumidity,0,1,.01,u=>S("gradientHumidity",u)),P("Glow",e.sunDiffusion,0,1,.01,u=>S("sunDiffusion",u)),P("Scale",e.skyScale,.5,3,.1,u=>S("skyScale",u))]})]});case"water":return b("div",{className:"space-y-4",children:[b("div",{className:"flex items-center justify-between",children:[i("span",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Enable Water"}),i("button",{onClick:()=>S("waterEnabled",!e.waterEnabled),className:`w-7 h-3.5 rounded-full p-0.5 transition-colors ${e.waterEnabled?"bg-cyan-500":"bg-zinc-700"}`,children:i("div",{className:`w-2.5 h-2.5 rounded-full bg-white shadow-sm transition-transform duration-300 ${e.waterEnabled?"translate-x-3.5":"translate-x-0"}`})})]}),b("div",{className:`space-y-3 transition-opacity ${e.waterEnabled?"":"opacity-30 pointer-events-none"}`,children:[b("div",{className:"flex justify-between items-center",children:[i("span",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-wider",children:"Reflections"}),i("button",{onClick:()=>S("waterLayerReflections",!e.waterLayerReflections),className:`w-6 h-3 rounded-full relative ${e.waterLayerReflections?"bg-cyan-500/50":"bg-zinc-800"}`,children:i("div",{className:`w-2 h-2 bg-white rounded-full absolute top-0.5 transition-all ${e.waterLayerReflections?"left-[14px]":"left-0.5"}`})})]}),P("Opacity",e.waterOpacity,0,1,.01,u=>S("waterOpacity",u),"accent-cyan-500"),P("Turbulence X",e.waterTurbulenceX,0,1,.01,u=>S("waterTurbulenceX",u),"accent-cyan-500"),P("Turbulence Y",e.waterTurbulenceY,0,1,.01,u=>S("waterTurbulenceY",u),"accent-cyan-500")]})]});case"lens":return b("div",{className:"space-y-4",children:[b("div",{className:"flex items-center justify-between",children:[i("span",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Enable Flare"}),i("button",{onClick:()=>S("lensFlareEnabled",!e.lensFlareEnabled),className:`w-7 h-3.5 rounded-full p-0.5 transition-colors ${e.lensFlareEnabled?"bg-pink-500":"bg-zinc-700"}`,children:i("div",{className:`w-2.5 h-2.5 rounded-full bg-white shadow-sm transition-transform duration-300 ${e.lensFlareEnabled?"translate-x-3.5":"translate-x-0"}`})})]}),b("div",{className:`space-y-3 transition-opacity ${e.lensFlareEnabled?"":"opacity-30 pointer-events-none"}`,children:[P("Intensity",e.lensFlareIntensity,0,1,.01,u=>S("lensFlareIntensity",u),"accent-pink-500"),P("Scale",e.lensFlareScale,.1,3,.1,u=>S("lensFlareScale",u),"accent-pink-500"),b("div",{className:"flex justify-between items-center bg-zinc-800/30 p-2 rounded-lg",children:[i("span",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-wider",children:"Manual Handle"}),i("button",{onClick:()=>S("lensFlareHandleEnabled",!e.lensFlareHandleEnabled),className:`w-6 h-3 rounded-full relative ${e.lensFlareHandleEnabled?"bg-pink-500/50":"bg-zinc-800"}`,children:i("div",{className:`w-2 h-2 bg-white rounded-full absolute top-0.5 transition-all ${e.lensFlareHandleEnabled?"left-[14px]":"left-0.5"}`})})]})]})]});case"base":return b("div",{className:"space-y-4",children:[b("div",{className:"flex items-center justify-between",children:[i("span",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Paper Texture"}),b("div",{className:"flex gap-2",children:[i("button",{onClick:()=>S("useTexture",!e.useTexture),className:`p-1.5 rounded-lg border ${e.useTexture?"bg-amber-900/20 border-amber-500/20 text-amber-500":"border-transparent text-zinc-600"}`,children:i(_1,{className:"w-3.5 h-3.5"})}),b("label",{className:"cursor-pointer p-1.5 text-zinc-600 hover:text-zinc-300 rounded-lg hover:bg-white/5",children:[i(Am,{className:"w-3.5 h-3.5"}),i("input",{type:"file",className:"hidden",onChange:a,accept:"image/*"})]})]})]}),i("div",{className:"h-px bg-white/10 w-full"}),P("Wash Temp",n,0,1,.01,u=>r(u)),P("Wash Strength",o,0,1,.01,u=>l(u))]});case"film":return b("div",{className:"space-y-4",children:[b("div",{className:"flex items-center justify-between mb-2",children:[i("span",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Enable"}),i("button",{onClick:()=>S("filmEnabled",!e.filmEnabled),className:`w-7 h-3.5 rounded-full p-0.5 transition-colors ${e.filmEnabled?"bg-red-500":"bg-zinc-700"}`,children:i("div",{className:`w-2.5 h-2.5 rounded-full bg-white shadow-sm transition-transform duration-300 ${e.filmEnabled?"translate-x-3.5":"translate-x-0"}`})})]}),b("div",{className:`space-y-3 transition-opacity ${e.filmEnabled?"":"opacity-30 pointer-events-none"}`,children:[i("div",{className:"bg-zinc-800/40 p-1.5 rounded-lg border border-white/5",children:i("select",{value:e.filmStock,onChange:u=>S("filmStock",u.target.value),className:"w-full bg-transparent text-[9px] font-bold uppercase text-zinc-300 outline-none",children:Xm.map(u=>i("option",{value:u,children:u},u))})}),P("Density",e.filmDensity,0,1,.01,u=>S("filmDensity",u),"accent-red-500"),P("Halation",e.filmHalation,0,1,.01,u=>S("filmHalation",u)),P("Bloom",e.filmBloom,0,1,.01,u=>S("filmBloom",u)),P("Grain",e.filmGrain,0,1,.01,u=>S("filmGrain",u))]})]});case"fx":return b("div",{className:"space-y-4",children:[b("div",{className:"space-y-3",children:[b("div",{className:"flex items-center justify-between",children:[b("div",{className:"flex items-center gap-2",children:[i(p1,{className:"w-3 h-3 text-yellow-200"}),i("span",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Soft Focus"})]}),i("button",{onClick:()=>S("pictorialismEnabled",!e.pictorialismEnabled),className:`w-7 h-3.5 rounded-full p-0.5 transition-colors ${e.pictorialismEnabled?"bg-yellow-200":"bg-zinc-700"}`,children:i("div",{className:`w-2.5 h-2.5 rounded-full bg-zinc-900 shadow-sm transition-transform duration-300 ${e.pictorialismEnabled?"translate-x-3.5":"translate-x-0"}`})})]}),e.pictorialismEnabled&&b("div",{className:"space-y-2 pl-2 border-l border-white/5",children:[P("Diffusion",e.pictorialismSoftness,0,1,.01,u=>S("pictorialismSoftness",u),"accent-yellow-200"),P("Grain",e.pictorialismNoise,0,1,.01,u=>S("pictorialismNoise",u),"accent-yellow-200")]})]}),i("div",{className:"h-px bg-white/10 w-full"}),b("div",{className:"space-y-3",children:[b("div",{className:"flex items-center justify-between",children:[b("div",{className:"flex items-center gap-2",children:[i(nm,{className:"w-3 h-3 text-emerald-400"}),i("span",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Riso Print"})]}),i("button",{onClick:()=>S("risoEnabled",!e.risoEnabled),className:`w-7 h-3.5 rounded-full p-0.5 transition-colors ${e.risoEnabled?"bg-emerald-500":"bg-zinc-700"}`,children:i("div",{className:`w-2.5 h-2.5 rounded-full bg-white shadow-sm transition-transform duration-300 ${e.risoEnabled?"translate-x-3.5":"translate-x-0"}`})})]}),e.risoEnabled&&b("div",{className:"space-y-2 pl-2 border-l border-white/5",children:[P("Dot Scale",e.risoGrainScale,.2,2,.1,u=>S("risoGrainScale",u),"accent-emerald-400"),b("div",{className:"flex gap-2",children:[i("input",{type:"color",value:e.risoColor1,onChange:u=>S("risoColor1",u.target.value),className:"w-full h-5 rounded cursor-pointer bg-transparent"}),i("input",{type:"color",value:e.risoColor2,onChange:u=>S("risoColor2",u.target.value),className:"w-full h-5 rounded cursor-pointer bg-transparent"})]})]})]}),i("div",{className:"h-px bg-white/10 w-full"}),b("div",{className:"space-y-3",children:[b("div",{className:"flex items-center justify-between",children:[b("div",{className:"flex items-center gap-2",children:[i(La,{className:"w-3 h-3 text-fuchsia-400"}),i("span",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Aberration"})]}),i("button",{onClick:()=>S("chromaticAberrationEnabled",!e.chromaticAberrationEnabled),className:`w-7 h-3.5 rounded-full p-0.5 transition-colors ${e.chromaticAberrationEnabled?"bg-fuchsia-500":"bg-zinc-700"}`,children:i("div",{className:`w-2.5 h-2.5 rounded-full bg-white shadow-sm transition-transform duration-300 ${e.chromaticAberrationEnabled?"translate-x-3.5":"translate-x-0"}`})})]}),e.chromaticAberrationEnabled&&i("div",{className:"pl-2 border-l border-white/5",children:P("Shift",e.chromaticAberrationIntensity,0,1,.01,u=>S("chromaticAberrationIntensity",u),"accent-fuchsia-500")})]})]});default:return null}};return!s&&!d?null:i("div",{className:`fixed z-40 right-4 top-1/2 -translate-y-1/2 transition-transform duration-300 ${d?s?"translate-x-0":"translate-x-[200%]":""}`,children:i("div",{className:"pointer-events-auto bg-black/60 backdrop-blur-md border border-white/10 shadow-2xl ring-1 ring-black/20 transition-all duration-300 ease-spring overflow-hidden flex flex-col",style:{...x?{width:"200px",borderRadius:"20px"}:{width:"56px",borderRadius:"9999px"},maxHeight:"75vh"},children:x?b("div",{className:"flex flex-col h-full w-full animate-in fade-in slide-in-from-right-4 duration-200",children:[b("div",{className:"flex items-center justify-between p-3 border-b border-white/10 bg-white/5 shrink-0",children:[b("button",{onClick:()=>w(null),className:"flex items-center gap-1.5 text-zinc-400 hover:text-white transition-colors",children:[i(tf,{className:"w-3.5 h-3.5"}),i("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:x})]}),i("button",{onClick:()=>w(null),className:"text-zinc-500 hover:text-white",children:i(Ra,{className:"w-3.5 h-3.5"})})]}),i("div",{className:"p-3 overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-700",children:f()})]}):b("div",{className:"flex flex-col gap-3 items-center py-4 px-1.5 w-full animate-in fade-in slide-in-from-left-4 duration-200",children:[i("div",{className:"text-zinc-500 cursor-grab active:cursor-grabbing",children:i(lf,{className:"w-3.5 h-3.5"})}),i("div",{className:"flex flex-col gap-1 w-full items-center group relative",title:"Wash Temp",children:i("div",{className:"h-[50px] w-6 flex items-center justify-center relative",children:i("input",{type:"range",min:"0",max:"1",step:"0.01",value:n,onChange:u=>r(Number(u.target.value)),className:"appearance-none bg-zinc-700/60 rounded-lg cursor-pointer accent-orange-400 absolute",style:{width:"50px",height:"3px",transform:"rotate(-90deg)",transformOrigin:"center"}})})}),i("div",{className:"flex flex-col gap-1 w-full items-center group relative",title:"Wash Strength",children:i("div",{className:"h-[50px] w-6 flex items-center justify-center relative",children:i("input",{type:"range",min:"0",max:"1",step:"0.01",value:o,onChange:u=>l(Number(u.target.value)),className:"appearance-none bg-zinc-700/60 rounded-lg cursor-pointer accent-cyan-400 absolute",style:{width:"50px",height:"3px",transform:"rotate(-90deg)",transformOrigin:"center"}})})}),i("div",{className:"w-6 h-px bg-white/10 shrink-0"}),b("div",{className:"flex flex-col gap-1.5 w-full items-center",children:[i(I,{icon:A1,active:x==="export",onClick:()=>E("export"),label:"Export"}),i(I,{icon:g1,active:x==="atmosphere",onClick:()=>E("atmosphere"),color:"text-orange-400",label:"Atmosphere"}),i(I,{icon:Hm,active:x==="water",onClick:()=>E("water"),color:"text-cyan-400",label:"Water"}),i(I,{icon:Jh,active:x==="lens",onClick:()=>E("lens"),color:"text-pink-400",label:"Lens"}),i(I,{icon:ks,active:x==="base",onClick:()=>E("base"),label:"Canvas"}),i(I,{icon:L1,active:x==="film",onClick:()=>E("film"),color:"text-red-400",label:"Film"}),i(I,{icon:La,active:x==="fx",onClick:()=>E("fx"),color:"text-purple-400",label:"FX"}),d&&b(ql,{children:[i("div",{className:"w-6 h-px bg-white/10 shrink-0"}),i("button",{onClick:c,className:"p-2 text-zinc-500 hover:text-white",children:i(Ra,{className:"w-4 h-4"})})]})]})]})})})},ff=(e,t,n)=>{const r=document.createElement("canvas"),o=document.createElement("canvas");if(t<=0||n<=0)return r.width=1,r.height=1,o.width=1,o.height=1,{visual:r,heightMap:o};r.width=t,r.height=n;const l=r.getContext("2d");o.width=t,o.height=n;const a=o.getContext("2d");if(!l||!a)return{visual:r,heightMap:o};l.fillStyle="#ffffff",l.fillRect(0,0,t,n),l.drawImage(e,0,0,t,n);const s=l.getImageData(0,0,t,n),c=a.createImageData(t,n),d=s.data,v=c.data,x=d.length;for(let w=0;w<x;w+=4){const E=d[w],S=d[w+1],P=d[w+2],I=(.299*E+.587*S+.114*P)/255;d[w]=E,d[w+1]=S,d[w+2]=P,d[w+3]=255;let f=1-I;f<.02?f=0:f=Math.pow(f,3)*64,f=Math.min(1,Math.max(0,f));const h=Math.floor(f*255);v[w]=0,v[w+1]=0,v[w+2]=0,v[w+3]=h}return l.putImageData(s,0,0),a.putImageData(c,0,0),{visual:r,heightMap:o}},Wm=(e,t)=>{if(e<=0||t<=0){const v=document.createElement("canvas");return v.width=1,v.height=1,Promise.resolve({visual:v,heightMap:v})}const n=document.createElement("canvas");n.width=e,n.height=t;const r=n.getContext("2d");if(!r)return Promise.resolve({visual:n,heightMap:n});r.fillStyle="#ffffff",r.fillRect(0,0,e,t);const o=.4,l=e*t*o/10;for(let v=0;v<l;v++){const x=Math.random()*e,w=Math.random()*t,E=1.5+Math.random()*2.5,S=230+Math.random()*25;r.beginPath(),r.ellipse(x,w,E,E*(.7+Math.random()*.6),Math.random()*Math.PI,0,Math.PI*2),r.fillStyle=`rgba(${S}, ${S}, ${S}, 0.5)`,r.fill()}const a=r.getImageData(0,0,e,t),s=a.data;for(let v=0;v<s.length;v+=4)if(Math.random()<.03){const w=s[v]*.9;s[v]=w,s[v+1]=w,s[v+2]=w}r.putImageData(a,0,0),r.globalCompositeOperation="multiply";const c=600;for(let v=0;v<c;v++){const x=Math.random()*e,w=Math.random()*t,E=Math.random()>.7,S=1+Math.random()*2;r.beginPath(),E?r.ellipse(x,w,S*3,S*.2,Math.random()*Math.PI,0,Math.PI*2):r.arc(x,w,S*.5,0,Math.PI*2),r.fillStyle=`rgba(0,0,0, ${.02+Math.random()*.04})`,r.fill()}r.globalCompositeOperation="source-over",r.filter="blur(1.2px)",r.drawImage(n,0,0),r.filter="none";const d=new Image;return d.src=n.toDataURL(),new Promise(v=>{d.onload=()=>{v(ff(d,e,t))}})},Lu=e=>{const t=e.getContext("2d");t&&t.clearRect(0,0,e.width,e.height)},tn=e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}},xt=(e,t,n)=>({r:Math.round(e.r+(t.r-e.r)*n),g:Math.round(e.g+(t.g-e.g)*n),b:Math.round(e.b+(t.b-e.b)*n)}),Qm=(e,t,n)=>{let r=1-e.r/255,o=1-e.g/255,l=1-e.b/255,a=Math.min(r,Math.min(o,l));a<1?(r=(r-a)/(1-a),o=(o-a)/(1-a),l=(l-a)/(1-a)):(r=0,o=0,l=0);let s=1-t.r/255,c=1-t.g/255,d=1-t.b/255,v=Math.min(s,Math.min(c,d));v<1?(s=(s-v)/(1-v),c=(c-v)/(1-v),d=(d-v)/(1-v)):(s=0,c=0,d=0);const x=r+(s-r)*n,w=o+(c-o)*n,E=l+(d-l)*n,S=a+(v-a)*n;e.r=255*(1-x)*(1-S),e.g=255*(1-w)*(1-S),e.b=255*(1-E)*(1-S)},bi=e=>{const t=e/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},Ni=e=>{const t=e<=.0031308?12.92*e:1.055*Math.pow(e,.4166666666666667)-.055;return Math.max(0,Math.min(255,t*255))},$u=(e,t,n)=>{const r=bi(e),o=bi(t),l=bi(n),a=.4122214708*r+.5363325363*o+.0514459929*l,s=.2119034982*r+.6806995451*o+.1073969566*l,c=.0883024619*r+.2817188376*o+.6299787005*l,d=Math.cbrt(a),v=Math.cbrt(s),x=Math.cbrt(c);return{L:.2104542553*d+.793617785*v-.0040720468*x,a:1.9779984951*d-2.428592205*v+.4505937099*x,b:.0259040371*d+.7827717662*v-.808675766*x}},Km=(e,t,n)=>{const r=e+.3963377774*t+.2158037573*n,o=e-.1055613458*t-.0638541728*n,l=e-.0894841775*t-1.291485548*n,a=r*r*r,s=o*o*o,c=l*l*l;return{r:Ni(4.0766*a-3.3077*s+.2309*c),g:Ni(-1.2684*a+2.6097*s-.3413*c),b:Ni(-.0041*a-.7034*s+1.7076*c)}},Iu=(e,t,n)=>{const r=$u(e.r,e.g,e.b),o=$u(t.r,t.g,t.b),l=r.L+(o.L-r.L)*n,a=r.a+(o.a-r.a)*n,s=r.b+(o.b-r.b)*n,c=Km(l,a,s);e.r=c.r,e.g=c.g,e.b=c.b},bo=(e,t,n)=>"#"+((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1),cn=e=>`rgb(${e.r}, ${e.g}, ${e.b})`,Bo=(e,t,n,r)=>{const o=e.r/255,l=e.g/255,a=e.b/255,s=Math.max(o,l,a),c=Math.min(o,l,a);let d=0,v=0,x=(s+c)/2;if(s!==c){const P=s-c;switch(v=x>.5?P/(2-s-c):P/(s+c),s){case o:d=(l-a)/P+(l<a?6:0);break;case l:d=(a-o)/P+2;break;case a:d=(o-l)/P+4;break}d/=6}d=(d+t/360)%1,d<0&&(d+=1),v=Math.max(0,Math.min(1,v+n)),x=Math.max(0,Math.min(1,x+r));let w,E,S;if(v===0)w=E=S=x;else{const P=(h,u,y)=>(y<0&&(y+=1),y>1&&(y-=1),y<.16666666666666666?h+(u-h)*6*y:y<.5?u:y<.6666666666666666?h+(u-h)*(.6666666666666666-y)*6:h),I=x<.5?x*(1+v):x+v-x*v,f=2*x-I;w=P(f,I,d+1/3),E=P(f,I,d),S=P(f,I,d-1/3)}return{r:Math.round(w*255),g:Math.round(E*255),b:Math.round(S*255)}},pf=(e,t,n)=>{e/=255,t/=255,n/=255;const r=Math.max(e,t,n),o=Math.min(e,t,n);let l=0,a,s=r;const c=r-o;if(a=r===0?0:c/r,r===o)l=0;else{switch(r){case e:l=(t-n)/c+(t<n?6:0);break;case t:l=(n-e)/c+2;break;case n:l=(e-t)/c+4;break}l/=6}return{h:l*360,s:a,v:s}},zi=e=>{let{r:t,g:n,b:r}=tn(e);return pf(t,n,r)},Vl=(e,t,n)=>{let r=0,o=0,l=0;const a=Math.floor(e/60),s=e/60-a,c=n*(1-t),d=n*(1-s*t),v=n*(1-(1-s)*t);switch(a%6){case 0:r=n,o=v,l=c;break;case 1:r=d,o=n,l=c;break;case 2:r=c,o=n,l=v;break;case 3:r=c,o=d,l=n;break;case 4:r=v,o=c,l=n;break;case 5:r=n,o=c,l=d;break}return bo(Math.round(r*255),Math.round(o*255),Math.round(l*255))},Ho={r:255,g:160,b:60},Go={r:40,g:70,b:110},qm=150*1024*1024,ge={day:{zenith:{r:25,g:70,b:160},upper:{r:70,g:130,b:210},ozone:{r:110,g:170,b:230},glow:{r:180,g:210,b:240},horizon:{r:210,g:235,b:255},sun:{r:255,g:255,b:245}},golden:{zenith:{r:30,g:60,b:130},upper:{r:70,g:100,b:180},ozone:{r:140,g:150,b:200},glow:{r:255,g:180,b:100},horizon:{r:255,g:200,b:50},sun:{r:255,g:240,b:210}},sunset:{zenith:{r:30,g:42,b:58},upper:{r:65,g:80,b:100},ozone:{r:110,g:100,b:100},glow:{r:180,g:90,b:50},horizon:{r:130,g:50,b:20},sun:{r:255,g:200,b:140}},civil_twilight:{zenith:{r:15,g:25,b:40},upper:{r:40,g:50,b:70},ozone:{r:80,g:60,b:65},glow:{r:120,g:50,b:30},horizon:{r:60,g:25,b:10},sun:{r:255,g:50,b:50}},nautical_twilight:{zenith:{r:5,g:8,b:25},upper:{r:15,g:20,b:50},ozone:{r:30,g:35,b:70},glow:{r:60,g:50,b:80},horizon:{r:20,g:15,b:30},sun:{r:50,g:10,b:10}},night:{zenith:{r:0,g:1,b:8},upper:{r:1,g:3,b:15},ozone:{r:5,g:8,b:20},glow:{r:8,g:12,b:25},horizon:{r:10,g:15,b:30},sun:{r:0,g:0,b:0}}},Jm=(e,t,n)=>{const r=(y,N,H)=>xt(y,N,H);let o,l,a,s,c,d,v,x=1;if(e>.2){const y=Math.max(0,Math.min(1,(e-.2)/.8));o=r(ge.golden.zenith,ge.day.zenith,y),l=r(ge.golden.upper,ge.day.upper,y),a=r(ge.golden.ozone,ge.day.ozone,y),s=r(ge.golden.glow,ge.day.glow,y),c=r(ge.golden.horizon,ge.day.horizon,y),d=r(ge.golden.sun,ge.day.sun,y),v={r:255,g:255,b:255},x=2}else if(e>0){const y=e/.2;o=r(ge.sunset.zenith,ge.golden.zenith,y),l=r(ge.sunset.upper,ge.golden.upper,y),a=r(ge.sunset.ozone,ge.golden.ozone,y),s=r(ge.sunset.glow,ge.golden.glow,y),c=r(ge.sunset.horizon,ge.golden.horizon,y),d=r(ge.sunset.sun,ge.golden.sun,y),v={r:255,g:200,b:150},x=4}else if(e>-.06){const y=(e- -.06)/.06;o=r(ge.civil_twilight.zenith,ge.sunset.zenith,y),l=r(ge.civil_twilight.upper,ge.sunset.upper,y),a=r(ge.civil_twilight.ozone,ge.sunset.ozone,y),s=r(ge.civil_twilight.glow,ge.sunset.glow,y),c=r(ge.civil_twilight.horizon,ge.sunset.horizon,y),d=r(ge.civil_twilight.sun,ge.sunset.sun,y),v={r:255,g:100,b:50},x=3}else if(e>-.12){const y=(e- -.12)/.06;o=r(ge.nautical_twilight.zenith,ge.civil_twilight.zenith,y),l=r(ge.nautical_twilight.upper,ge.civil_twilight.upper,y),a=r(ge.nautical_twilight.ozone,ge.civil_twilight.ozone,y),s=r(ge.nautical_twilight.glow,ge.civil_twilight.glow,y),c=r(ge.nautical_twilight.horizon,ge.civil_twilight.horizon,y),d=r(ge.nautical_twilight.sun,ge.civil_twilight.sun,y),v={r:100,g:50,b:100},x=1}else{const y=Math.max(0,Math.min(1,(e- -.25)/.13));o=r(ge.night.zenith,ge.nautical_twilight.zenith,y),l=r(ge.night.upper,ge.nautical_twilight.upper,y),a=r(ge.night.ozone,ge.nautical_twilight.ozone,y),s=r(ge.night.glow,ge.nautical_twilight.glow,y),c=r(ge.night.horizon,ge.nautical_twilight.horizon,y),d={r:0,g:0,b:0},v={r:0,g:0,b:0},x=0}const w=.15,E=t<w?(w-t)/w:0,S=Math.min(1,t*1.5),P={r:135,g:206,b:250},I=Math.max(0,Math.min(1,e+.3)),f=Math.pow(S,.5)*I*.5;if(e>.1)o=r(o,P,f*.4),l=r(l,P,f*.3),a=r(a,P,f*.2);else{const y={r:50,g:60,b:80};o=r(o,y,f*.2),l=r(l,y,f*.2)}if(E>0){const y={r:5,g:10,b:25};o=r(o,y,E),l=r(l,y,E*.9),a=r(a,y,E*.7),s=r(s,y,E*.8),c=r(c,y,E*.6)}const h={r:215,g:225,b:235},u=n*.6+Math.max(0,t-.5)*.5;return c=r(c,h,u*.3),s=r(s,h,u*.2),u>.2&&e>-.1&&(a=r(a,s,u*.3)),{zenith:o,upper:l,ozone:a,glow:s,horizon:c,sunColor:d,bloomColor:v,bloomSizeMult:x}},Fu=(e,t,n)=>{const r=255-(255-e.r)*(255-t.r)/255,o=255-(255-e.g)*(255-t.g)/255,l=255-(255-e.b)*(255-t.b)/255;return xt(e,{r,g:o,b:l},n)},Zm=(e,t,n)=>{const r=(s,c)=>{if(s===0)return 0;if(c===255)return 255;const d=s*255/(255-c);return Math.min(255,d)},o=r(e.r,t.r),l=r(e.g,t.g),a=r(e.b,t.b);return xt(e,{r:o,g:l,b:a},n)},ey=(e,t,n,r,o=1)=>{const l=g.useRef({layerCanvases:new Map,mask:null,temp:null,composite:null,heightMapPattern:null,snapshot:null,stars:null,skyState:null,skyLut:null,patternImage:null}),a=g.useRef(""),[s,c]=g.useState([{id:"layer-1",name:"Layer 1",visible:!0,ignoreGlow:!1}]),[d,v]=g.useState("layer-1"),x=g.useRef("layer-1");g.useEffect(()=>{x.current=d},[d]);const w=g.useRef(new Map),E=g.useRef(null),S=g.useRef(null),P=g.useRef(t),[I,f]=g.useState({glowStyles:{},ambientStyles:{},gradeStyles:{},ambientParams:null,skyColors:null}),[h,u]=g.useState(null),y=g.useRef(e);g.useEffect(()=>{y.current=e},[e]);const N=g.useRef({isDrawing:!1,lastPoint:{x:0,y:0,pressure:.5,tiltX:0,tiltY:0},angle:0,hasMoved:!1,paintLoad:1,bristles:[],history:[],historyIndex:-1}),H=()=>w.current.get(x.current)||null,F=()=>l.current.layerCanvases.get(x.current)||null,K=g.useCallback((p,k)=>{const M=tn(y.current.color),z=y.current.wetMode,R=[],D=!z;if(p==="pastel"||p==="pastel2"){const T=[],V=3+Math.floor(Math.random()*3);for(let _=0;_<V;_++)T.push({x:(Math.random()-.5)*1,y:(Math.random()-.5)*1,r:.15+Math.random()*.25});for(let _=0;_<60;_++){const Y=Math.random()*Math.PI*2,L=Math.sqrt(Math.random()),Z=L*Math.cos(Y),ae=L*Math.sin(Y);let ne=!1;for(const re of T)if(Math.hypot(Z-re.x,ae-re.y)<re.r){ne=!0;break}ne||R.push({dx:Z,dy:ae,length:.1,thickness:.5+Math.random()*2.5,tempBias:(Math.random()-.5)*1,hueBias:(Math.random()-.5)*1.5,feather:0,drySensitivity:Math.random(),color:{...M},hasPaint:!0,normX:Z,normY:ae})}}else{let $=1.5;p==="fan3"&&($=3.5);const T=Math.floor(k*$);for(let V=0;V<T;V++){let _=0,Y=0,L=1,Z=1;if(p==="round"){const ae=Math.pow(Math.random(),.5)*.5,ne=Math.random()*Math.PI*2;_=ae*Math.cos(ne),Y=ae*Math.sin(ne)*.5,Z=1-ae}else if(p==="fan")_=(Math.random()-.5)*1.2,Y=(Math.random()-.5)*.1,L=.8+Math.random()*.4;else if(p==="fan2"){const ae=(Math.random()-.5)*2.5;if(Math.abs(ae)>.2&&Math.random()<.4)continue;_=ae,Y=(Math.random()-.5)*.1,L=.7+Math.random()*.5,Z=.5+Math.random()*.8}else if(p==="fan3"){const ae=(Math.random()-.5)*2;_=Math.sign(ae)*Math.pow(Math.abs(ae),3)*1.1,Y=(Math.random()-.5)*.2,L=.6+Math.random()*.6,Z=.4+Math.random()*.6}else p==="hog"?(_=(Math.random()-.5)*.8,Y=(Math.random()-.5)*.4,L=.5+Math.random()*1):p==="chisel"?(_=V/T-.5,Y=0,L=1,Z=1.5):(_=V/T-.5,Y=(Math.random()-.5)*.1);R.push({dx:_,dy:Y,length:L*(.9+Math.random()*.2),thickness:Z*(.8+Math.random()*.4),tempBias:Math.random()-.5+(Math.random()-.5),hueBias:(Math.random()-.5)*2,feather:(Math.random()-.5)*.5,drySensitivity:Math.random(),color:{...M},hasPaint:D})}}p!=="pastel"&&p!=="pastel2"?R.sort(($,T)=>$.dy-T.dy):R.sort(()=>Math.random()-.5),N.current.bristles=R},[e.wetMode]);g.useEffect(()=>{K(e.brushType,e.size)},[e.brushType,e.size,K]),g.useEffect(()=>{const p=tn(e.color);N.current.bristles.forEach(k=>{e.wetMode||(k.color={...p})})},[e.color,e.wetMode]),g.useEffect(()=>{if(e.patternTexture){const p=new Image;p.src=e.patternTexture,p.onload=()=>{l.current.patternImage=p}}else l.current.patternImage=null},[e.patternTexture]);const ve=g.useCallback(()=>{const p=`layer-${Date.now()}`;c(k=>[...k,{id:p,name:`Layer ${k.length+1}`,visible:!0,ignoreGlow:!1}]),v(p)},[]),le=g.useCallback(p=>{c(k=>{if(k.length<=1)return k;const M=k.filter(z=>z.id!==p);if(x.current===p){const z=M[M.length-1];z&&v(z.id)}return M}),w.current.delete(p),l.current.layerCanvases.delete(p)},[]);g.useEffect(()=>{!s.find(k=>k.id===d)&&s.length>0&&v(s[s.length-1].id)},[s,d]);const xe=g.useCallback(p=>{c(k=>k.map(M=>M.id===p?{...M,visible:!M.visible}:M))},[]),Ye=g.useCallback(p=>{c(k=>k.map(M=>M.id===p?{...M,ignoreGlow:!M.ignoreGlow}:M))},[]);g.useEffect(()=>{let p=h,k=0;if(e.isGradientMode){const Pe=e.gradientTime;Pe<.5?k=-.1+Pe/.5*1.1:k=1-(Pe-.5)/.5*1.1;const Le=r*e.skyHorizon,Ne=n*.5,De=r*.9,Mt=Le-k*De;p={x:Ne,y:Mt}}else if(e.skyEnabled){const Pe=r*e.skyHorizon,Le=n*e.sunAzimuth,Ne=r*.9,De=Pe-e.sunElevation*Ne;p={x:Le,y:De},k=e.sunElevation}if(!p){a.current!=="OFF"&&(f({glowStyles:{opacity:0},ambientStyles:{opacity:0},gradeStyles:{opacity:0},ambientParams:null,skyColors:null}),l.current.skyState=null,l.current.skyLut=null,a.current="OFF");return}const{gradientHumidity:M,sunIntensity:z,atmosphereDensity:R,sunDiffusion:D,skyHorizon:$,skyScale:T}=e,V=R??.5,_=Jm(k,V,M);let Y={},L={},Z={opacity:0},ae=null,ne,re;if(e.skyEnabled){const Pe=`${p.x}px`,Le=`${p.y}px`,Ne=xt(_.horizon,_.ozone,.5),De=Math.min(.9,V*1.2);Y={background:`radial-gradient(circle at ${Pe} ${Le}, 
              rgba(${Ne.r}, ${Ne.g}, ${Ne.b}, 0) 0%, 
              rgba(${Ne.r}, ${Ne.g}, ${Ne.b}, ${De*.2}) 30%, 
              rgba(${Ne.r}, ${Ne.g}, ${Ne.b}, ${De}) 100%
          )`,mixBlendMode:"screen",opacity:1,pointerEvents:"none"},ae={type:"gradient",gradient:{x:p.x,y:p.y,stops:[{offset:0,color:`rgba(${Ne.r}, ${Ne.g}, ${Ne.b}, 0)`},{offset:.3,color:`rgba(${Ne.r}, ${Ne.g}, ${Ne.b}, ${De*.2})`},{offset:1,color:`rgba(${Ne.r}, ${Ne.g}, ${Ne.b}, ${De})`}]},mixBlendMode:"screen",opacity:1};let dt=_.zenith,St="normal",ln=0,Tt="none";if(k>.15?(dt=_.ozone,St="soft-light",ln=.15,Tt="saturate(1.05)"):k>.02?(dt=_.glow,St="overlay",ln=.5,Tt="saturate(1.3) contrast(1.1) sepia(0.2)"):k>-.1?(dt=xt(_.zenith,_.glow,.3),St="multiply",ln=.6,Tt="brightness(0.85) saturate(1.2) contrast(1.2)"):k>-.25?(dt=_.zenith,St="multiply",ln=.8,Tt="brightness(0.6) saturate(1.1) contrast(1.3)"):(dt={r:5,g:10,b:25},St="multiply",ln=.93,Tt="brightness(0.4) grayscale(0.5) contrast(1.4)"),L={backgroundColor:cn(dt),mixBlendMode:St,opacity:ln,backdropFilter:Tt,WebkitBackdropFilter:Tt,pointerEvents:"none"},e.sunElevation<.2&&e.sunElevation>-.15){const $n=Math.min(1,(.2-e.sunElevation)*5);if($n>.01){const pt=Math.max(0,Math.min(1,(.12-e.sunElevation)*10)),or={r:255,g:0,b:110},lr={r:255,g:100,b:50};let Yr=_.sunColor;pt>.5&&(Yr=or),re={baseColor:Yr,midColor:lr,opacity:$n*.8,width:90*T,height:250*T}}}}else{let Pe="#ffffff",Le="#808080",Ne="overlay",De=0;k>.4?(Pe="#ffffff",Le="#ffffff",De=0):k>.1?(Pe="#fffaee",Le="#ffebcd",Ne="soft-light",De=.2):k>-.05?(Pe="#d0ccc0",Le="#ff4500",Ne="hard-light",De=.4+M*.2):k>-.15?(Pe="#8a8aa0",Le="#800080",Ne="overlay",De=.5):(Pe="#1a2035",Le="#4b0082",Ne="multiply",De=.6),Y={backgroundColor:Pe,mixBlendMode:"multiply",opacity:1,pointerEvents:"none"},ae={type:"solid",color:Pe,mixBlendMode:"multiply",opacity:1},L={backgroundColor:Le,mixBlendMode:Ne,opacity:De,pointerEvents:"none"}}const U=z||0,ye=_.sunColor,Se=D??.6;if(e.skyEnabled&&U>.01&&k>-.01){const Pe=`${p.x}px`,Le=`${p.y}px`;let Ne=xt(ye,_.glow,Math.min(1,V+.2));if(Se<.5){const Tt=(.5-Se)*2;Ne=xt(Ne,{r:255,g:40,b:10},Tt*.8)}const De=15+U*25,dt=20+V*300*U*Se,St=De+dt,ln=(1-e.skyHorizon)*100;Z={background:`radial-gradient(circle at ${Pe} ${Le}, 
                  rgba(${ye.r}, ${ye.g}, ${ye.b}, 1.0) 0%, 
                  rgba(${Ne.r}, ${Ne.g}, ${Ne.b}, ${.8*(1-Se*.4)}) ${De}px, 
                  rgba(${Ne.r}, ${Ne.g}, ${Ne.b}, 0) ${St}px
              )`,mixBlendMode:"color-dodge",opacity:.8+U*.2,pointerEvents:"none",clipPath:`inset(0 0 ${ln}% 0)`},ne={color:Ne,coreRadius:De,outerRadius:St,intensity:.8+U*.2}}let we=xt({r:10,g:15,b:35},_.horizon,.35);k<-.1&&(we=xt(we,{r:2,g:2,b:5},.9));const ce=[{offset:0,color:cn(_.zenith)},{offset:45,color:cn(_.upper)},{offset:75,color:cn(_.ozone)},{offset:92,color:cn(_.glow)},{offset:100,color:cn(_.horizon)}],m=[{offset:0,..._.zenith},{offset:45,..._.upper},{offset:75,..._.ozone},{offset:92,..._.glow},{offset:100,..._.horizon}],A=new Uint8ClampedArray(r*4),ie=$*100,be=T,ue=Pe=>Math.max(0,(ie-Pe)/100*r),O=0,J=Math.floor(ue(60*be)),he=Math.floor(ue(30*be)),ke=Math.floor(ue(12*be)),nt=Math.floor(r*$);for(let Pe=0;Pe<r;Pe++){const Le=Pe*4;let Ne=we;if(Pe<nt){let De,Mt,dt;Pe<J?(De=m[0],Mt=m[1],dt=(Pe-O)/Math.max(1,J-O)):Pe<he?(De=m[1],Mt=m[1],dt=(Pe-J)/Math.max(1,he-J)):Pe<ke?(De=m[2],Mt=m[3],dt=(Pe-he)/Math.max(1,ke-he)):(De=m[3],Mt=m[4],dt=(Pe-ke)/Math.max(1,nt-ke)),Ne=xt(De,Mt,Math.max(0,Math.min(1,dt)))}A[Le]=Ne.r,A[Le+1]=Ne.g,A[Le+2]=Ne.b,A[Le+3]=255}l.current.skyState={stops:ce,stopsRgb:m,ground:we,sun:_.sunColor,sunPos:p,glow:ne,reflection:re},l.current.skyLut=A;const qe=e.skyEnabled||e.isGradientMode,We={glowStyles:Z,ambientStyles:Y,gradeStyles:L,ambientParams:ae,skyColors:qe?{stops:ce,ground:cn(we),sun:cn(_.sunColor),sunX:p.x,sunY:p.y}:null},lt=JSON.stringify(We);lt!==a.current&&(a.current=lt,f(We))},[e.gradientTime,e.gradientHumidity,e.sunIntensity,e.skyEnabled,e.isGradientMode,e.sunElevation,e.skyHorizon,e.sunAzimuth,h,n,r,e.atmosphereDensity,e.sunDiffusion,e.skyScale]),g.useEffect(()=>{P.current=t},[t]);const pe=g.useCallback(()=>{const p=w.current.get(x.current),k=l.current.layerCanvases.get(x.current);if(!p||!k||!E.current)return;const M=k.width,z=k.height;if(M<=0||z<=0)return;N.current.historyIndex<N.current.history.length-1&&N.current.history.splice(N.current.historyIndex+1),N.current.history.push({layerId:x.current,painting:p.getImageData(0,0,M,z),mask:E.current.getImageData(0,0,M,z)}),N.current.historyIndex++;let R=N.current.history.reduce((D,$)=>D+$.painting.data.length+$.mask.data.length,0);for(;N.current.history.length>0&&R>qm;){const D=N.current.history.shift();D&&(R-=D.painting.data.length+D.mask.data.length,N.current.historyIndex--)}N.current.history.length>20&&(N.current.history.shift(),N.current.historyIndex--)},[]),ot=g.useCallback(()=>{if(N.current.historyIndex<=0||!E.current)return;N.current.historyIndex--;const p=N.current.history[N.current.historyIndex];if(p){const k=w.current.get(p.layerId);k&&k.putImageData(p.painting,0,0),E.current.putImageData(p.mask,0,0)}},[]),te=g.useCallback(()=>{if(N.current.historyIndex>=N.current.history.length-1||!E.current)return;N.current.historyIndex++;const p=N.current.history[N.current.historyIndex];if(p){const k=w.current.get(p.layerId);k&&k.putImageData(p.painting,0,0),E.current.putImageData(p.mask,0,0)}},[]),B=g.useCallback((p,k)=>{const{temp:M,layerCanvases:z,mask:R,composite:D}=l.current,$=o,T=p*$,V=k*$;if(T<=0||V<=0)return;const _=L=>{if(L.width===T&&L.height===V)return!1;const Z=document.createElement("canvas");Z.width=L.width,Z.height=L.height;const ae=Z.getContext("2d");ae&&L.width>0&&L.height>0&&ae.drawImage(L,0,0),L.width=T,L.height=V,L.style.width="100%",L.style.height="100%";const ne=L.getContext("2d");return ne&&(ne.setTransform($,0,0,$,0,0),ne.imageSmoothingEnabled=!0,ne.save(),ne.setTransform(1,0,0,1,0,0),Z.width>0&&Z.height>0&&ne.drawImage(Z,0,0),ne.restore()),!0};let Y=!1;R&&_(R)&&(Y=!0),M&&_(M),D&&_(D),z.forEach(L=>{_(L)&&(Y=!0)}),Y?(N.current.history=[],N.current.historyIndex=-1,pe()):N.current.history.length===0&&pe()},[pe,o]),q=g.useCallback((p,k,M)=>{s.forEach(D=>{const $=p(D.id);if($){l.current.layerCanvases.set(D.id,$);const T=$.getContext("2d",{willReadFrequently:!0});T&&(T.imageSmoothingEnabled=!0,w.current.set(D.id,T))}}),l.current.mask=k,l.current.temp||(l.current.temp=document.createElement("canvas")),l.current.composite||(l.current.composite=document.createElement("canvas"));const z=k.getContext("2d",{willReadFrequently:!0}),R=l.current.temp.getContext("2d",{willReadFrequently:!0});z&&R&&(E.current=z,S.current=R,M&&S.current&&(l.current.heightMapPattern=S.current.createPattern(M,"repeat")),B(n,r))},[n,r,B,s]);g.useEffect(()=>{B(n,r)},[n,r,B]);const X=g.useCallback(p=>{S.current&&(l.current.heightMapPattern=S.current.createPattern(p,"repeat"))},[]),oe=g.useCallback((p,k,M,z)=>{if(!y.current.skyEnabled||!z||!z.glow||!z.sunPos)return p;const{glow:R,sunPos:D}=z,$=k-D.x,T=M-D.y,V=$*$+T*T;if(V<R.outerRadius*R.outerRadius){const Y=Math.sqrt(V)/R.outerRadius,L=Math.pow(1-Y,2)*R.intensity;if(L>.01)return Zm(p,R.color,L)}return p},[]),ee=g.useCallback((p,k)=>{if(!y.current.skyEnabled||!l.current.skyState)return null;const{stopsRgb:M,ground:z,sun:R,sunPos:D,reflection:$}=l.current.skyState,{skyHorizon:T,skyScale:V,waterEnabled:_,waterOpacity:Y}=y.current,L=r*T;let Z={...z};if(k>L){const U=r-L,ye=Math.max(0,k-L),Se=Math.min(1,ye/(U*.4)),_e=M[4];Z=xt(_e,z,Se)}else{if(D){const ye=p-D.x,Se=k-D.y,_e=ye*ye+Se*Se,we=90*V/2;if(_e<we*we)return R}const U=l.current.skyLut;if(U){const Se=Math.floor(Math.max(0,Math.min(r-1,k)))*4;Z={r:U[Se],g:U[Se+1],b:U[Se+2]}}}if(k>L&&$&&D){const U=k-L;if(U<$.height&&U>=0){const ye=Math.abs(p-D.x),Se=$.width/2,_e=15;let we=0;if(ye<Se)we=1;else{const ce=ye-Se;ce<_e*2&&(we=1-ce/(_e*2))}if(we>0){const ce=U/$.height;let m,A=1;if(ce<.6){const be=ce/.6;m=xt($.baseColor,$.midColor,be),A=1-be*.5}else{const be=(ce-.6)/.4;m=$.midColor,A=.5*(1-be)}const ie=$.opacity*we*A;Z=Fu(Z,m,ie)}}}const ae=100,ne=ae/2;if(Math.abs(k-L)<ne){const U=(k-(L-ne))/ae;let ye=0;U<.4?ye=U/.4:U>.6?ye=1-(U-.6)/.4:ye=1;const Se=ye*.6;Se>.01&&(Z=Fu(Z,M[4],Se))}return Z=oe(Z,p,k,l.current.skyState),Z},[r,oe]),ze=g.useCallback((p,k,M,z)=>{const R=o,D=Math.floor(p*R),$=Math.floor(k*R),T=Math.ceil(M*R),V=Math.ceil(z*R);if(T<=0||V<=0)return null;let _=l.current.composite;_||(_=document.createElement("canvas"),l.current.composite=_),(_.width<T||_.height<V)&&(_.width=Math.max(_.width,T),_.height=Math.max(_.height,V));const Y=_.getContext("2d",{willReadFrequently:!0});if(!Y)return null;Y.clearRect(0,0,T,V),s.forEach(L=>{if(L.visible){const Z=l.current.layerCanvases.get(L.id);Z&&Y.drawImage(Z,D,$,T,V,0,0,T,V)}});try{return{data:Y.getImageData(0,0,T,V).data,width:T,height:V,x:D,y:$}}catch{return null}},[s,o]),Fe=g.useCallback(()=>{const p=F();return p?p.toDataURL():null},[d]),$t=g.useCallback((p,k,M,z)=>{const R=H(),D=l.current.patternImage;if(!R||!D)return;const $=M-p,T=z-k,V=Math.hypot($,T);if(V<1)return;const _=y.current,Y=_.patternJitterScale||0,L=_.patternJitterRotation||0,Z=_.patternJitterHue||0,ae=_.patternJitterSaturation||0,ne=_.patternJitterValue||0,re=Math.max(15,50*_.patternScale),U=Math.max(5,re*.5),ye=Math.ceil(V/U);if(ye>2e3)return;const Se=$/V*U,_e=T/V*U;R.save();for(let we=0;we<=ye;we++){const ce=p+Se*we,m=k+_e*we;let A=_.patternStampRotation;if(L>0){const ke=(Math.random()-.5)*2*(L*180);A=(A+ke)%360}const ie=(A+_.patternAngle)*Math.PI/180;let be=_.patternScale;if(Y>0){const ke=1+(Math.random()-.5)*2*Y;be*=Math.max(.1,ke)}let ue="";if(Z>0){const ke=(Math.random()-.5)*360*Z;ue+=`hue-rotate(${ke}deg) `}if(ae>0){const ke=100+(Math.random()-.5)*200*ae;ue+=`saturate(${Math.max(0,ke)}%) `}if(ne>0){const ke=100+(Math.random()-.5)*200*ne;ue+=`brightness(${Math.max(0,ke)}%) `}const O=50/D.width*be,J=D.width*O,he=D.height*O;R.save(),R.translate(ce,m),R.rotate(ie),ue&&(R.filter=ue.trim()),R.drawImage(D,-J/2,-he/2,J,he),R.restore()}R.restore(),pe()},[pe]),zt=g.useCallback(p=>{const k=H(),M=l.current.patternImage;if(!k||!M||p.length<3)return;const z=y.current;let R=p[0].x,D=p[0].x,$=p[0].y,T=p[0].y;p.forEach(ce=>{R=Math.min(R,ce.x),D=Math.max(D,ce.x),$=Math.min($,ce.y),T=Math.max(T,ce.y)});const V=Math.max(20,50*z.patternScale);R-=V,D+=V,$-=V,T+=V;const _=z.patternJitterScale||0,Y=z.patternJitterRotation||0,L=z.patternJitterHue||0,Z=z.patternJitterSaturation||0,ae=z.patternJitterValue||0,ne=Math.max(15,50*z.patternScale),re=ne*.8,U=ne*.8,ye=(D-R)/re,Se=(T-$)/U;if(ye*Se>5e3)return;k.save(),k.beginPath(),k.moveTo(p[0].x,p[0].y);for(let ce=1;ce<p.length-1;ce++){const m=(p[ce].x+p[ce+1].x)/2,A=(p[ce].y+p[ce+1].y)/2;k.quadraticCurveTo(p[ce].x,p[ce].y,m,A)}p.length>2&&k.lineTo(p[p.length-1].x,p[p.length-1].y),k.closePath(),k.clip();const _e=Math.floor(R/re)*re,we=Math.floor($/U)*U;for(let ce=we;ce<T;ce+=U)for(let m=_e;m<D;m+=re){const A=Math.sin(m*12.9898+ce*78.233)*43758.5453,ie=A-Math.floor(A),be=A*1.5-Math.floor(A*1.5),ue=A*2-Math.floor(A*2),O=A*13.37%1,J=A*42.42%1;let he=z.patternStampRotation;if(Y>0){const Le=(ie-.5)*2*(Y*180);he=(he+Le)%360}const ke=(he+z.patternAngle)*Math.PI/180;let nt=z.patternScale;if(_>0){const Le=1+(be-.5)*2*_;nt*=Math.max(.1,Le)}let qe="";if(L>0){const Le=(ue-.5)*360*L;qe+=`hue-rotate(${Le}deg) `}if(Z>0){const Le=100+(Math.abs(O)-.5)*200*Z;qe+=`saturate(${Math.max(0,Le)}%) `}if(ae>0){const Le=100+(Math.abs(J)-.5)*200*ae;qe+=`brightness(${Math.max(0,Le)}%) `}const We=50/M.width*nt,lt=M.width*We,Pe=M.height*We;k.save(),k.translate(m+re/2,ce+U/2),k.rotate(ke),qe&&(k.filter=qe.trim()),k.drawImage(M,-lt/2,-Pe/2,lt,Pe),k.restore()}y.current.useTexture&&l.current.heightMapPattern&&(k.globalCompositeOperation="destination-out",k.globalAlpha=.5,k.fillStyle=l.current.heightMapPattern,k.fill()),l.current.mask&&(k.globalCompositeOperation="destination-out",k.globalAlpha=1,k.drawImage(l.current.mask,0,0,k.canvas.width/o,k.canvas.height/o)),k.restore(),pe()},[pe,o]),ut=g.useCallback(p=>{const k=H(),M=F();if(!k||!M||p.length<3)return;const z=o,R=M.width,D=M.height,$=y.current;let T=p[0].x,V=p[0].x,_=p[0].y,Y=p[0].y;p.forEach(J=>{T=Math.min(T,J.x),V=Math.max(V,J.x),_=Math.min(_,J.y),Y=Math.max(Y,J.y)});const L=($.patternAngle-90)*(Math.PI/180),Z=Math.cos(L),ae=Math.sin(L),ne=[{x:T,y:_},{x:V,y:_},{x:V,y:Y},{x:T,y:Y}];let re=1/0,U=-1/0;ne.forEach(J=>{const he=J.x*Z+J.y*ae;re=Math.min(re,he),U=Math.max(U,he)});const ye=Math.max(1,U-re),Se=tn($.color),_e=cn(Se),we=Math.max(.5,$.size/10),ce=Math.min(1,$.opacity),m=S.current;if(!m||!l.current.temp)return;m.save(),m.setTransform(z,0,0,z,0,0),m.clearRect(0,0,R/z,D/z),m.beginPath(),m.moveTo(p[0].x,p[0].y);for(let J=1;J<p.length-1;J++){const he=(p[J].x+p[J+1].x)/2,ke=(p[J].y+p[J+1].y)/2;m.quadraticCurveTo(p[J].x,p[J].y,he,ke)}p.length>2&&m.lineTo(p[p.length-1].x,p[p.length-1].y),m.closePath(),m.clip();const ie=(V-T)*(Y-_)/(we*we*2)*ce*5,ue=Math.min(ie,5e4),O=$.colorVariation>.01||$.hueVariation>.01;if(m.globalAlpha=1,O)for(let J=0;J<ue;J++){const he=T+Math.random()*(V-T),ke=_+Math.random()*(Y-_),We=1-(he*Z+ke*ae-re)/ye;if(Math.random()<We){let lt={...Se};if($.hueVariation>.01){const Le=(Math.random()-.5)*2*$.hueVariation*60;lt=Bo(lt,Le,0,0)}if($.colorVariation>.01){const Le=(Math.random()-.5)*2*$.colorVariation,Ne=Le>0?Ho:Go;lt=xt(lt,Ne,Math.abs(Le))}m.fillStyle=cn(lt),m.beginPath();const Pe=we*(.5+Math.random()*.5);m.arc(he,ke,Pe,0,Math.PI*2),m.fill()}}else{m.fillStyle=_e,m.beginPath();for(let J=0;J<ue;J++){const he=T+Math.random()*(V-T),ke=_+Math.random()*(Y-_),We=1-(he*Z+ke*ae-re)/ye;if(Math.random()<We){const lt=we*(.5+Math.random()*.5);m.moveTo(he+lt,ke),m.arc(he,ke,lt,0,Math.PI*2)}}m.fill()}$.useTexture&&l.current.heightMapPattern&&(m.globalCompositeOperation="destination-out",m.globalAlpha=.5,m.fillStyle=l.current.heightMapPattern,m.fillRect(T,_,V-T,Y-_)),l.current.mask&&(m.globalCompositeOperation="destination-out",m.globalAlpha=1,m.drawImage(l.current.mask,0,0,R/z,D/z)),m.restore(),k.save(),k.globalAlpha=1,k.globalCompositeOperation=$.isEraser?"destination-out":$.blendMode||"source-over",k.setTransform(1,0,0,1,0,0),k.drawImage(l.current.temp,0,0),k.restore(),m.save(),m.setTransform(1,0,0,1,0,0),m.clearRect(0,0,R,D),m.restore(),pe()},[pe,o]),Et=g.useCallback(p=>{const k=E.current;if(!(!k||p.length<3)){k.save(),k.globalCompositeOperation=y.current.lassoMode==="subtract"?"destination-out":"source-over",k.fillStyle="#2b6cb0",k.globalAlpha=1,k.beginPath(),k.moveTo(p[0].x,p[0].y);for(let M=1;M<p.length-1;M++){const z=(p[M].x+p[M+1].x)/2,R=(p[M].y+p[M+1].y)/2;k.quadraticCurveTo(p[M].x,p[M].y,z,R)}p.length>2&&k.lineTo(p[p.length-1].x,p[p.length-1].y),k.closePath(),k.fill(),k.restore(),pe()}},[pe]),It=g.useCallback((p,k)=>{const M=H(),z=S.current,R=F();if(!M||!R||!l.current.temp||!z)return;const D=o,$=R.width,T=R.height,V=y.current,_=Math.min(p.x,k.x),Y=Math.min(p.y,k.y),L=Math.abs(k.x-p.x),Z=Math.abs(k.y-p.y);if(L<1||Z<1)return;let ae=tn(V.color);if(V.hueVariation>.01){const re=(Math.random()-.5)*2*V.hueVariation*60;ae=Bo(ae,re,0,0)}if(V.colorVariation>.01){const re=(Math.random()-.5)*2*V.colorVariation,U=re>0?Ho:Go;ae=xt(ae,U,Math.abs(re))}const ne=cn(ae);if(z.save(),z.setTransform(D,0,0,D,0,0),z.clearRect(0,0,$/D,T/D),z.globalCompositeOperation="source-over",z.fillStyle=ne,z.globalAlpha=V.opacity,z.fillRect(_,Y,L,Z),V.wetMode&&!V.isEraser){const re=ze(_,Y,L,Z);if(re){const U=Math.floor(_*D),ye=Math.floor(Y*D),Se=Math.ceil(L*D),_e=Math.ceil(Z*D);if(Se>0&&_e>0){const we=z.getImageData(U,ye,Se,_e),ce=we.data,m=re.data,A={r:0,g:0,b:0},ie={r:0,g:0,b:0},be=ce.length;for(let ue=0;ue<be;ue+=4)ce[ue+3]>0&&ue<m.length&&m[ue+3]>20&&(A.r=ce[ue],A.g=ce[ue+1],A.b=ce[ue+2],ie.r=m[ue],ie.g=m[ue+1],ie.b=m[ue+2],Iu(A,ie,.15),ce[ue]=A.r,ce[ue+1]=A.g,ce[ue+2]=A.b);z.putImageData(we,U,ye)}}}if(V.useTexture&&l.current.heightMapPattern){z.globalCompositeOperation="destination-out";const re=.5;z.globalAlpha=re,z.fillStyle=l.current.heightMapPattern,z.fillRect(_,Y,L,Z)}l.current.mask&&(z.globalCompositeOperation="destination-out",z.globalAlpha=1,z.drawImage(l.current.mask,0,0,$/D,T/D)),z.restore(),M.save(),M.globalAlpha=1,M.globalCompositeOperation=V.isEraser?"destination-out":V.blendMode||"source-over",M.setTransform(1,0,0,1,0,0),M.drawImage(l.current.temp,0,0),M.restore(),z.save(),z.setTransform(1,0,0,1,0,0),z.clearRect(0,0,$,T),z.restore(),pe()},[pe,ze,o]),mn=g.useCallback(p=>{const k=H(),M=S.current,z=F();if(!k||!z||!l.current.temp||!M||p.length<3)return;const R=o,D=z.width,$=z.height,T=y.current;let V=p[0].x,_=p[0].x,Y=p[0].y,L=p[0].y;p.forEach(O=>{V=Math.min(V,O.x),_=Math.max(_,O.x),Y=Math.min(Y,O.y),L=Math.max(L,O.y)});const Z=(_-V)*R,ae=(L-Y)*R;if(Z<1||ae<1)return;const ne=tn(T.color),re=tn(T.gradColor2||"#ffffff"),U=p[0];let ye=0,Se=p[0];p.forEach(O=>{const J=(O.x-U.x)**2+(O.y-U.y)**2;J>ye&&(ye=J,Se=O)});const _e={x:Se.x-U.x,y:Se.y-U.y},we=ye||1;M.save(),M.setTransform(R,0,0,R,0,0),M.clearRect(0,0,D/R,$/R),M.beginPath(),M.moveTo(p[0].x,p[0].y);for(let O=1;O<p.length;O++)M.lineTo(p[O].x,p[O].y);M.closePath(),M.clip();const ce=Math.floor(V*R),m=Math.floor(Y*R),A=Math.ceil((_-V)*R),ie=Math.ceil((L-Y)*R);if(A<=0||ie<=0){M.restore();return}M.fillStyle="#000000",M.fill();const be=M.getImageData(ce,m,A,ie),ue=be.data;for(let O=0;O<ie;O++)for(let J=0;J<A;J++){const he=(O*A+J)*4;if(ue[he+3]>0){const ke=(ce+J)/R,nt=(m+O)/R,qe=ke-U.x,We=nt-U.y,lt=(qe*_e.x+We*_e.y)/we,Pe=Math.max(0,Math.min(1,lt));let De=Math.random()<Pe?re:ne;if(T.hueVariation>.01){const Mt=(Math.random()-.5)*2*T.hueVariation*60;De=Bo(De,Mt,0,0)}if(T.colorVariation>.01){const Mt=(Math.random()-.5)*2*T.colorVariation,dt=Mt>0?Ho:Go;De=xt(De,dt,Math.abs(Mt))}ue[he]=De.r,ue[he+1]=De.g,ue[he+2]=De.b,ue[he+3]=255*T.opacity}}if(M.putImageData(be,ce,m),M.restore(),M.save(),M.setTransform(R,0,0,R,0,0),T.useTexture&&l.current.heightMapPattern){M.globalCompositeOperation="destination-out";const O=.5;M.globalAlpha=O,M.fillStyle=l.current.heightMapPattern,M.fillRect(V,Y,_-V,L-Y)}l.current.mask&&(M.globalCompositeOperation="destination-out",M.globalAlpha=1,M.drawImage(l.current.mask,0,0,D/R,$/R)),M.restore(),k.save(),k.globalCompositeOperation=T.blendMode||"source-over",k.setTransform(1,0,0,1,0,0),k.drawImage(l.current.temp,0,0),k.restore(),M.save(),M.setTransform(1,0,0,1,0,0),M.clearRect(0,0,D,$),M.restore(),pe()},[pe,o]),Pt=g.useCallback(p=>{const k=H(),M=S.current,z=F();if(!k||!z||!l.current.temp||!M||p.length<3)return;const R=o,D=z.width,$=z.height,T=y.current;let V=p[0].x,_=p[0].x,Y=p[0].y,L=p[0].y;p.forEach(U=>{V=Math.min(V,U.x),_=Math.max(_,U.x),Y=Math.min(Y,U.y),L=Math.max(L,U.y)});const Z=(_-V)*R,ae=(L-Y)*R;if(Z<1||ae<1)return;let ne=tn(T.color);if(T.hueVariation>.01){const U=(Math.random()-.5)*2*T.hueVariation*60;ne=Bo(ne,U,0,0)}if(T.colorVariation>.01){const U=(Math.random()-.5)*2*T.colorVariation,ye=U>0?Ho:Go;ne=xt(ne,ye,Math.abs(U))}const re=cn(ne);M.save(),M.setTransform(R,0,0,R,0,0),M.clearRect(0,0,D/R,$/R),M.globalCompositeOperation="source-over",M.fillStyle=re,M.globalAlpha=T.opacity,M.beginPath(),M.moveTo(p[0].x,p[0].y);for(let U=1;U<p.length-1;U++){const ye=(p[U].x+p[U+1].x)/2,Se=(p[U].y+p[U+1].y)/2;M.quadraticCurveTo(p[U].x,p[U].y,ye,Se)}if(p.length>2&&M.lineTo(p[p.length-1].x,p[p.length-1].y),M.closePath(),M.fill(),T.wetMode&&!T.isEraser){const U=ze(V,Y,_-V,L-Y);if(U){const ye=Math.floor(V*R),Se=Math.floor(Y*R),_e=Math.ceil((_-V)*R),we=Math.ceil((L-Y)*R);if(_e>0&&we>0){const ce=M.getImageData(ye,Se,_e,we),m=ce.data,A=U.data,ie={r:0,g:0,b:0},be={r:0,g:0,b:0},ue=m.length;for(let O=0;O<ue;O+=4)m[O+3]>0&&O<A.length&&A[O+3]>20&&(ie.r=m[O],ie.g=m[O+1],ie.b=m[O+2],be.r=A[O],be.g=A[O+1],be.b=A[O+2],Iu(ie,be,.15),m[O]=ie.r,m[O+1]=ie.g,m[O+2]=ie.b);M.putImageData(ce,ye,Se)}}}if(T.useTexture&&l.current.heightMapPattern){M.globalCompositeOperation="destination-out";const U=.5;M.globalAlpha=U,M.fillStyle=l.current.heightMapPattern,M.fill()}l.current.mask&&(M.globalCompositeOperation="destination-out",M.globalAlpha=1,M.drawImage(l.current.mask,0,0,D/R,$/R)),M.restore(),k.save(),k.globalAlpha=1,k.globalCompositeOperation=T.isEraser?"destination-out":T.blendMode||"source-over",k.setTransform(1,0,0,1,0,0),k.drawImage(l.current.temp,0,0),k.restore(),M.save(),M.setTransform(1,0,0,1,0,0),M.clearRect(0,0,D,$),M.restore(),pe()},[pe,ze,o]),me=(p,k,M,z,R,D,$)=>{if(!N.current.isDrawing||!H()||!S.current)return;const T=S.current,V=o,{lastPoint:_}=N.current,{bristles:Y}=N.current,L=y.current,Z=L.brushType==="fan2",ae=L.brushType==="fan3",ne=L.brushType==="pastel",re=L.brushType==="pastel2",U=Math.hypot(p-_.x,k-_.y),ye=L.size;let Se=.08;if(L.pressureSensitivity){const J=Math.min(_.pressure,M);Se*=Math.max(.15,J)}let _e=Math.max(1.5,ye*Se);if(ne&&(_e=Math.max(1.5,ye*.22)),re&&(_e=Math.max(1.5,ye*.25)),U<_e&&N.current.hasMoved)return;const we=Math.ceil(U/_e);if(U>4){const J=Math.atan2(k-_.y,p-_.x);if(!N.current.hasMoved)N.current.angle=J,N.current.hasMoved=!0;else{const he=L.brushType==="chisel"?.35:.08;let ke=J-N.current.angle;for(;ke<-Math.PI;)ke+=Math.PI*2;for(;ke>Math.PI;)ke-=Math.PI*2;N.current.angle+=ke*he}}const ce=L.opacity;let m=.5;if(z!==void 0&&R!==void 0){const J=Math.max(Math.abs(z),Math.abs(R));m=Math.min(1,J/60)}let A=0;(Z||ae)&&z!==void 0&&(A=z/45*(Math.PI/4));const ie=N.current.angle+Math.PI/2+A,ue=Math.min(U/15,1),O=!L.wetMode&&L.colorVariation<.01&&L.hueVariation<.01?cn(tn(L.color)):null;for(let J=0;J<=we;J++){const he=J/we,ke=_.x+(p-_.x)*he,nt=_.y+(k-_.y)*he,qe=_.pressure+(M-_.pressure)*he,We=ye*2;D.minX=Math.min(D.minX,ke-We),D.minY=Math.min(D.minY,nt-We),D.maxX=Math.max(D.maxX,ke+We),D.maxY=Math.max(D.maxY,nt+We);let lt=ye;L.pressureSensitivity&&!Z&&!ae&&!ne&&!re&&(lt*=qe);let Pe=L.wetMode?1e-4:3e-4;L.wetMode&&N.current.paintLoad<.5&&(Pe=5e-5),(ne||re)&&!L.wetMode&&(Pe=0);const Le=Pe*(1+ue*3)*_e;N.current.paintLoad=Math.max(0,N.current.paintLoad-Le);const Ne=Math.pow(qe,2),De=ne||re?2:1;for(let Mt=0;Mt<De;Mt++){let dt=ie,St=lt,ln=1;if(ne||re){dt=Math.random()*Math.PI*2;const $n=.08;St=lt*(1-Math.random()*$n),St*=.4+qe*.6,ln=1-Math.random()*.06}const Tt=Math.cos(dt),Nn=Math.sin(dt);for(let $n=0;$n<Y.length;$n++){const pt=Y[$n];let or=pt.dx*St,lr=pt.dy*St;if(lr*=ln,Z&&(or*=.8+m*.4),ae&&!ne&&!re){const gt=1+Math.pow(qe,2)*4;if(or=pt.dx*lt*gt,qe>.25){const ir=(qe-.25)*1.5;lr+=Math.sin($n*.5)*ir*lt*.4}}if(!ne&&!re){const gt=(Math.sin(ke*.2)+Math.cos(nt*.2))*.1;if((1-N.current.paintLoad)*.5+ue*.3+gt>pt.drySensitivity)continue}const Yr=or*Tt-lr*Nn,Ka=or*Nn+lr*Tt,Po=ne||re?(Math.random()-.5)*St*.03:0,Wr=ne||re?(Math.random()-.5)*St*.03:0,Pr=ke+Yr+Po,Tr=nt+Ka+Wr;if(L.wetMode&&$){const gt=Pr*V|0,ir=Tr*V|0,Qr=gt-$.x,_o=ir-$.y;if(Qr>=0&&_o>=0&&Qr<$.width&&_o<$.height){const C=(_o*$.width+Qr)*4;if($.data[C+3]>20){const W={r:$.data[C],g:$.data[C+1],b:$.data[C+2]};pt.hasPaint?(Qm(pt.color,W,.1),N.current.paintLoad=Math.min(1,N.current.paintLoad+.05)):(pt.color={...W},pt.hasPaint=!0,N.current.paintLoad=Math.max(N.current.paintLoad,.5))}}}if(L.wetMode&&!pt.hasPaint)continue;let ar=Math.max(1,St*.05*pt.thickness*(1+Ne));const _r=St*.15*pt.length;let an=ce*N.current.paintLoad;if(!ne&&!re){const gt=L.brushType==="chisel"?1:1-Math.pow(Math.abs(pt.dx)*1.8,3);an*=gt,L.pressureSensitivity&&(Z||ae?an*=Math.pow(qe,2.5):an*=.3+qe*1.5),L.wetMode&&(an*=.95)}else ne?(an=ce*Math.pow(qe,1.5),L.wetMode&&(an*=.95)):re&&(an=ce*Math.pow(qe,2.5),L.wetMode&&(an*=.95));if(an=Math.min(1,Math.max(0,an)),an<.01)continue;let To;if(O)To=O;else{let gt={...pt.color};if(L.hueVariation>.01&&Math.abs(pt.hueBias)>.01&&(gt=Bo(gt,pt.hueBias*L.hueVariation*60,0,0)),L.colorVariation>.01&&Math.abs(pt.tempBias)>.05){const ir=Math.abs(pt.tempBias)*L.colorVariation;gt=xt(gt,pt.tempBias>0?Ho:Go,ir)}To=cn(gt)}if(T.globalAlpha=an,T.globalCompositeOperation=L.blendMode||"source-over",T.fillStyle=To,T.save(),T.translate(Pr,Tr),T.rotate(dt),re){const gt=Math.max(.5,ar*.6);T.beginPath(),T.rect(-gt,-gt,gt*2,gt*2),T.fill()}else{const gt=pt.feather*_r;T.fillRect(-ar/2,gt,ar,_r)}T.restore()}}}if(L.useTexture&&l.current.heightMapPattern){let J=1;if(ne)J=1-Math.pow(M,2)*.85,J=Math.max(.1,Math.min(1,J));else if(re)J=1-Math.pow(M,3)*.9,J=Math.max(.1,Math.min(1,J));else{let he=1-M*1.3;const ke=Math.pow(1-N.current.paintLoad,.5);he=Math.max(he,ke),J=Math.min(1,Math.max(0,he))}if(J>.01){T.save(),T.globalCompositeOperation="destination-out",T.globalAlpha=J,T.fillStyle=l.current.heightMapPattern;const he=ye,ke=Math.min(N.current.lastPoint.x,p)-he,nt=Math.min(N.current.lastPoint.y,k)-he,qe=Math.max(N.current.lastPoint.x,p)+he,We=Math.max(N.current.lastPoint.y,k)+he;T.beginPath(),T.rect(ke,nt,qe-ke,We-nt),T.fill(),T.restore()}}l.current.mask&&(T.save(),T.globalCompositeOperation="destination-out",T.globalAlpha=1,T.setTransform(V,0,0,V,0,0),T.drawImage(l.current.mask,0,0,l.current.mask.width/V,l.current.mask.height/V),T.restore()),N.current.lastPoint={x:p,y:k,pressure:M,tiltX:z,tiltY:R}},je=g.useCallback(p=>{const k=H(),M=F();if(!k||!M||!l.current.temp||!S.current||p.length===0)return;const z=o,R=M.width/z,D=M.height/z;S.current.clearRect(0,0,R,D);const $={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};let T=null;const V=[];let _=N.current.lastPoint;if(p.forEach((Y,L)=>{const Z=L===p.length-1;(Math.hypot(Y.x-_.x,Y.y-_.y)>.5||Z)&&(V.push(Y),_=Y)}),V.length!==0){if(y.current.wetMode){const Y=N.current.lastPoint;let L=Y.x,Z=Y.y,ae=Y.x,ne=Y.y;V.forEach(m=>{L=Math.min(L,m.x),Z=Math.min(Z,m.y),ae=Math.max(ae,m.x),ne=Math.max(ne,m.y)});const re=y.current.size*2*z,U=Math.max(0,Math.floor(L*z-re)),ye=Math.max(0,Math.floor(Z*z-re)),Se=Math.min(M.width,Math.ceil(ae*z+re)),_e=Math.min(M.height,Math.ceil(ne*z+re)),we=Se-U,ce=_e-ye;if(we>0&&ce>0){const m=ze(U/z,ye/z,we/z,ce/z);m&&(T=m)}}if(V.forEach(Y=>{me(Y.x,Y.y,Y.pressure,Y.tiltX,Y.tiltY,$,T)}),$.minX<$.maxX&&$.minY<$.maxY){k.save(),k.globalCompositeOperation=y.current.isEraser?"destination-out":y.current.blendMode||"source-over",k.setTransform(z,0,0,z,0,0);const Y=2,L=Math.max(0,Math.floor($.minX-Y)),Z=Math.max(0,Math.floor($.minY-Y)),ae=Math.min(R,Math.ceil($.maxX+Y))-L,ne=Math.min(D,Math.ceil($.maxY+Y))-Z;ae>0&&ne>0&&k.drawImage(l.current.temp,L*z,Z*z,ae*z,ne*z,L,Z,ae,ne),k.restore()}T=null}},[me,ze,o]),Ee=g.useCallback((p,k,M,z,R)=>{je([{x:p,y:k,pressure:M||.5,tiltX:z,tiltY:R}])},[je]),tt=g.useCallback((p,k,M=.5,z=0,R=0)=>{if(N.current.isDrawing=!0,N.current.lastPoint={x:p,y:k,pressure:M,tiltX:z,tiltY:R},y.current.autoClean){const D=tn(y.current.color);N.current.bristles.forEach($=>{y.current.wetMode?$.hasPaint=!1:($.color={...D},$.hasPaint=!0)}),N.current.paintLoad=1}else N.current.paintLoad=Math.max(N.current.paintLoad,.5);N.current.hasMoved=!1},[]),Ge=g.useCallback(()=>{N.current.isDrawing&&(N.current.isDrawing=!1,pe())},[pe]),Jt=g.useCallback((p,k)=>{const M=o;for(let z=s.length-1;z>=0;z--){const R=s[z];if(!R.visible)continue;const D=w.current.get(R.id);if(D)try{if(D.canvas.width===0)return null;const T=D.getImageData(Math.floor(p*M),Math.floor(k*M),1,1).data;if(T[3]>0)return bo(T[0],T[1],T[2])}catch{}}if(y.current.skyEnabled){const z=ee(p,k);if(z)return bo(z.r,z.g,z.b)}return P.current},[s,ee,o]),Be=g.useCallback(()=>{const p=F();p&&(Lu(p),pe())},[pe]),yn=g.useCallback(()=>{const p=l.current.mask;p&&(Lu(p),pe())},[pe]),jt=g.useCallback(()=>{const p=l.current.mask,k=E.current;if(!p||!k)return;const M=p.width,z=p.height;if(M<=0||z<=0)return;const R=k.getImageData(0,0,M,z),D=R.data;for(let $=0;$<D.length;$+=4)D[$+3]=255-D[$+3],D[$]=43,D[$+1]=108,D[$+2]=176;k.putImageData(R,0,0),pe()},[pe]),gn=g.useCallback((p,k,M,z)=>{const R=E.current;if(!R)return;const D=y.current.tapeWidth,$=M-p,T=z-k,V=Math.hypot($,T);if(V<1)return;const _=-T/V,Y=$/V,L=D/2,ae=Math.ceil(V/2),ne=[],re=[];for(let U=0;U<=ae;U++){const ye=U/ae,Se=p+$*ye,_e=k+T*ye,we=1.5,ce=(Math.random()-.5)*we,m=(Math.random()-.5)*we;ne.push({x:Se+_*(L+ce),y:_e+Y*(L+ce)}),re.push({x:Se-_*(L+m),y:_e-Y*(L+m)})}R.save(),R.globalCompositeOperation=y.current.lassoMode==="subtract"?"destination-out":"source-over",R.beginPath(),ne.length>0&&R.moveTo(ne[0].x,ne[0].y);for(let U=1;U<ne.length;U++)R.lineTo(ne[U].x,ne[U].y);for(let U=re.length-1;U>=0;U--)R.lineTo(re[U].x,re[U].y);R.closePath(),R.fillStyle="#2b6cb0",R.globalAlpha=1,R.fill(),R.restore(),pe()},[pe]),bn=g.useCallback((p,k,M)=>{var L,Z;const z=H(),R=F(),D=S.current;if(!z||!R||!D||!l.current.temp)return;const $=o,T=R.width,V=R.height;if(T<=0||V<=0)return;M&&!l.current.snapshot&&(l.current.snapshot=z.getImageData(0,0,T,V)),M&&l.current.snapshot&&z.putImageData(l.current.snapshot,0,0),D.save(),D.setTransform($,0,0,$,0,0),D.clearRect(0,0,T/$,V/$);const _=D.createLinearGradient(p.x,p.y,k.x,k.y),Y=((L=l.current.skyState)==null?void 0:L.stops)||((Z=I.skyColors)==null?void 0:Z.stops);Y?Y.forEach(ae=>_.addColorStop(ae.offset/100,ae.color)):(_.addColorStop(0,y.current.color),_.addColorStop(1,"rgba(255,255,255,0)")),D.globalCompositeOperation="source-over",D.globalAlpha=y.current.opacity,D.fillStyle=_,D.fillRect(0,0,T/$,V/$),l.current.mask&&(D.globalCompositeOperation="destination-out",D.globalAlpha=1,D.drawImage(l.current.mask,0,0,T/$,V/$)),D.restore(),z.save(),z.globalCompositeOperation=y.current.blendMode||"source-over",z.globalAlpha=1,z.setTransform(1,0,0,1,0,0),z.drawImage(l.current.temp,0,0),z.restore(),D.save(),D.setTransform(1,0,0,1,0,0),D.clearRect(0,0,T,V),D.restore(),M||(l.current.snapshot=null,pe())},[pe,I,o]),Ln=g.useCallback(()=>{l.current.snapshot=null},[]),kt=g.useCallback(()=>{const p=H();p&&l.current.snapshot&&(p.putImageData(l.current.snapshot,0,0),l.current.snapshot=null)},[]),Yn=g.useCallback((p,k,M,z=.5,R=0,D=0)=>{const $=o,T=p.canvas.width/$,V=p.canvas.height/$;p.clearRect(0,0,T,V);const{bristles:_,angle:Y}=N.current,L=y.current.brushType==="fan2",Z=y.current.brushType==="fan3",ae=y.current.brushType==="pastel",ne=y.current.brushType==="pastel2";let re=y.current.size;y.current.pressureSensitivity&&!L&&!Z&&(re*=z);let U=.5;if(R!==0||D!==0){const ce=Math.max(Math.abs(R),Math.abs(D));U=Math.min(1,ce/60)}let ye=0;(L||Z)&&(ye=R/45*(Math.PI/4));const Se=Y+Math.PI/2+ye;p.save(),p.translate(k,M),p.rotate(Se),p.fillStyle=y.current.color,p.globalAlpha=.6;const _e=Z||ae||ne?3:1;for(let ce=0;ce<_.length;ce+=_e){const m=_[ce],A=1+z*.8;let ie=m.dx*re*A,be=m.dy*re*A;if(L&&(ie*=.8+U*.4),Z&&!ae&&!ne){const O=1+Math.pow(z,2)*4;if(ie=m.dx*re*O,z>.25){const J=(z-.25)*1.5;be+=Math.sin(ce*.5)*J*re*.4}}const ue=Math.max(1.5,re*.05*m.thickness);if(p.beginPath(),ne){const O=ue/2;p.rect(ie-O,be-O,O*2,O*2)}else p.arc(ie,be,ue/2,0,Math.PI*2);p.fill()}p.globalAlpha=.3,p.strokeStyle=y.current.color,p.lineWidth=1,p.beginPath();const we=re*(L||Z?.8:.4);ae||ne?(p.setLineDash([2,4]),p.arc(0,0,re*.5,0,Math.PI*2),p.stroke(),p.setLineDash([])):(y.current.brushType==="flat"||y.current.brushType==="chisel")&&(p.rect(-we,-2,we*2,4),p.stroke()),p.restore()},[o]);return{init:q,startStroke:tt,endStroke:Ge,drawStroke:Ee,drawBatch:je,clear:Be,pickColor:Jt,drawTape:gn,drawLasso:Et,drawLassoFill:Pt,drawRectLassoFill:It,drawStippleLasso:ut,drawPatternLasso:zt,drawPatternLine:$t,drawGradBlendLasso:mn,capturePattern:Fe,clearMask:yn,invertMask:jt,renderBrushCursor:Yn,undo:ot,redo:te,drawSkyGradient:bn,commitSnapshot:Ln,cancelSnapshot:kt,atmosphere:I,layers:s,activeLayerId:d,setActiveLayerId:v,addLayer:ve,removeLayer:le,toggleLayerVisibility:xe,toggleLayerGlow:Ye,setPaperTexture:X}},Ul={Standard:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0","Kodak 2383":"1.1 0 0 0 -0.05  0 1.05 0 0 -0.02  0 0 0.9 0 0.05  0 0 0 1 0","Kodak Portra 400":"1.05 0 0 0 0.03  0 1.02 0 0 0.02  0 0 0.95 0 -0.02  0 0 0 1 0","Kodak Ektar 100":"1.3 0 0 0 -0.15  0 1.2 0 0 -0.1  0 0 1.1 0 -0.05  0 0 0 1 0","Cinestill 800T":"0.9 0 0 0 0  0 1.0 0 0 0.05  0 0 1.2 0 0.1  0 0 0 1 0","Fuji Velvia 50":"1.0 0 0 0 0  0 0.9 0 0 0  0 0 1.1 0 0.05  0 0 0 1 0","Ilford HP5 Plus":"0.33 0.33 0.33 0 0  0.33 0.33 0.33 0 0  0.33 0.33 0.33 0 0  0 0 0 1 0"},cr=e=>{if(!e)return{r:0,g:0,b:0};if(e.startsWith("#"))return tn(e);const t=e.match(/\d+/g);return t&&t.length>=3?{r:Number(t[0]),g:Number(t[1]),b:Number(t[2])}:{r:0,g:0,b:0}},Du=e=>{const t=e,n=.5-.5*t;return`${t} 0 0 0 ${n}  0 ${t} 0 0 ${n}  0 0 ${t} 0 ${n}  0 0 0 1 0`},Vo=(e,t=3)=>{let n=0,r=1,o=1,l=0;for(let a=0;a<t;a++)n+=Math.sin(e*o*10+a*13.2)*r,l+=r,r*=.5,o*=2.5;return n/l},ty=[{type:"streak",pos:0,baseSize:1400,height:3,color:[200,230,255],alpha:.15,blur:4},{type:"poly",sides:4,pos:.15,baseSize:40,color:[100,200,255],alpha:.4,blur:2,noise:!0},{type:"poly",sides:4,pos:.22,baseSize:25,color:[150,255,220],alpha:.3,blur:1,noise:!0},{type:"circle",pos:.45,baseSize:140,color:[200,255,150],alpha:.08,isSoft:!0},{type:"circle",pos:.6,baseSize:180,color:[220,255,100],alpha:.05,isSoft:!0},{type:"circle",pos:.85,baseSize:90,color:[255,180,100],alpha:.15,isSoft:!0,noise:!0},{type:"poly",sides:5,pos:1,baseSize:60,color:[255,100,50],alpha:.2,blur:3,noise:!0},{type:"circle",pos:1.1,baseSize:110,color:[255,50,50],alpha:.05,isSoft:!0}],Ou=(e,t,n,r,o,l,a,s,c,d,v,x)=>{if(a<=.01)return;const w=v-r,E=x-o,S=s*c*Math.max(.8,d),P=`rgba(255, 255, 255, ${.15*a})`;ty.forEach(I=>{const f=r+w*I.pos,h=o+E*I.pos,u=I.baseSize*S,y=.3,N=Math.round(I.color[0]*(1-y)+l.r*y),H=Math.round(I.color[1]*(1-y)+l.g*y),F=Math.round(I.color[2]*(1-y)+l.b*y),K=I.alpha*a,ve=`rgba(${N}, ${H}, ${F}, ${K})`;if(e.save(),e.globalCompositeOperation="screen",I.type==="streak")e.translate(f,h),I.blur&&(e.filter=`blur(${I.blur*S}px)`),e.fillStyle=ve,e.beginPath(),e.ellipse(0,0,u,(I.height||2)*S,0,0,Math.PI*2),e.fill();else if(I.isSoft){const le=e.createRadialGradient(f,h,0,f,h,u);le.addColorStop(0,ve),le.addColorStop(1,`rgba(${N}, ${H}, ${F}, 0)`),e.fillStyle=le,e.beginPath(),e.arc(f,h,u,0,Math.PI*2),e.fill()}else{if(I.blur&&(e.filter=`blur(${I.blur*S}px)`),e.fillStyle=ve,e.beginPath(),I.type==="circle")e.arc(f,h,u,0,Math.PI*2);else{const le=I.sides||3;for(let xe=0;xe<le;xe++){const Ye=xe*2*Math.PI/le-Math.PI/2,pe=f+u*Math.cos(Ye),ot=h+u*Math.sin(Ye);xe===0?e.moveTo(pe,ot):e.lineTo(pe,ot)}e.closePath()}e.fill()}if(I.noise){e.globalCompositeOperation="overlay",e.fillStyle=P;const le=Math.min(10,Math.floor(u*.2));for(let xe=0;xe<le;xe++){const Ye=f+(Math.random()-.5)*u,pe=h+(Math.random()-.5)*u,ot=(Math.random()*2+1)*S;e.fillRect(Ye,pe,ot,ot)}}e.restore()})},hf=g.forwardRef(({settings:e,onChange:t,canvasColor:n,triggerClear:r,triggerClearTape:o,triggerInvertMask:l,triggerUndo:a,triggerRedo:s,onPickColor:c,zoom:d,pan:v,onPan:x,isSpacePressed:w,customTextureUrl:E,grayscaleMode:S,onLayerMethodsReady:P,width:I,height:f,washTemp:h,washIntensity:u,isMobile:y},N)=>{const H=g.useRef(new Map),F=g.useRef(null),K=g.useRef(null),ve=g.useRef(null),le=g.useRef(null),xe=g.useRef(null),Ye=g.useRef(null),pe=g.useRef(null),ot=g.useRef(null),[te,B]=g.useState(null),[q,X]=g.useState(null),[oe,ee]=g.useState(null),[ze,Fe]=g.useState([]),[$t,zt]=g.useState(!1),[ut,Et]=g.useState(null),[It,mn]=g.useState(null),Pt=g.useRef(null),me=g.useRef(!1),je=g.useRef({x:0,y:0}),[Ee,tt]=g.useState(!1),[Ge,Jt]=g.useState(!1),[Be,yn]=g.useState(!1),[jt,gn]=g.useState(null),[bn,Ln]=g.useState(null),kt=g.useRef(!0),Yn=g.useRef(0),p=g.useMemo(()=>y?1:window.devicePixelRatio||1,[y]),k={r:255,g:160,b:60},M={r:40,g:70,b:110},z=g.useMemo(()=>{if(u<=.01)return n;const C=tn(n),W=xt(M,k,h),j=xt(C,W,u*.3);return bo(j.r,j.g,j.b)},[n,h,u]),{init:R,startStroke:D,endStroke:$,drawBatch:T,clear:V,pickColor:_,drawTape:Y,drawLasso:L,drawLassoFill:Z,drawRectLassoFill:ae,drawStippleLasso:ne,drawPatternLasso:re,drawPatternLine:U,drawGradBlendLasso:ye,capturePattern:Se,clearMask:_e,invertMask:we,renderBrushCursor:ce,undo:m,redo:A,drawSkyGradient:ie,commitSnapshot:be,cancelSnapshot:ue,atmosphere:O,layers:J,activeLayerId:he,setActiveLayerId:ke,addLayer:nt,removeLayer:qe,toggleLayerVisibility:We,toggleLayerGlow:lt,setPaperTexture:Pe}=ey(e,z,I,f,p),Le=g.useRef(e),Ne=g.useRef(O),De=g.useRef(J),Mt=g.useRef(null);g.useEffect(()=>{Le.current=e},[e]),g.useEffect(()=>{Ne.current=O},[O]),g.useEffect(()=>{De.current=J,kt.current=!0},[J]),g.useEffect(()=>{kt.current=!0},[e.waterLayerReflections]),g.useEffect(()=>{const C=j=>{j.key==="Alt"&&Jt(!0)},W=j=>{j.key==="Alt"&&Jt(!1)};return window.addEventListener("keydown",C),window.addEventListener("keyup",W),()=>{window.removeEventListener("keydown",C),window.removeEventListener("keyup",W)}},[]),g.useEffect(()=>{r>0&&(V(),kt.current=!0)},[r,V]),g.useEffect(()=>{a>0&&(m(),kt.current=!0)},[a,m]),g.useEffect(()=>{s>0&&(A(),kt.current=!0)},[s,A]),g.useEffect(()=>{o>0&&(_e(),kt.current=!0)},[o,_e]),g.useEffect(()=>{l>0&&(we(),kt.current=!0)},[l,we]),g.useEffect(()=>{F.current&&R(W=>H.current.get(W)||null,F.current),pe.current||(pe.current=document.createElement("canvas")),ot.current||(ot.current=document.createElement("canvas"))},[R,J,I,f]),g.useEffect(()=>{(async()=>{let W;if(E){const j=new Image;j.crossOrigin="Anonymous",j.src=E,await new Promise(se=>{j.onload=se}),W=ff(j,I,f)}else W=await Wm(I,f);W&&(B(W.visual.toDataURL()),Pe(W.heightMap))})()},[E,I,f,Pe]),g.useEffect(()=>{const C=p;xe.current&&(xe.current.width=I*C,xe.current.height=f*C)},[I,f,p]);const dt=g.useMemo(()=>({layers:J,activeLayerId:he,setActiveLayerId:ke,addLayer:nt,removeLayer:qe,toggleLayerVisibility:We,toggleLayerGlow:lt}),[J,he,ke,nt,qe,We,lt]);g.useEffect(()=>{P&&P(dt)},[dt,P]),g.useEffect(()=>{e.isGradientMode&&Pt.current&&ie(Pt.current.start,Pt.current.end,!0)},[e.gradientTime,e.gradientHumidity,e.isGradientMode]),g.useEffect(()=>{e.isGradientMode||(be(),Pt.current=null)},[e.isGradientMode,be]);const St=(C,W,j,se,Ce,Ke,G,at,vn)=>{const Ue=W/(I||1),_t=j-se,Ct=e.waterTurbulenceX,Me=e.waterTurbulenceY,Te=e.waterFractal,Xe=I||1,Oe=60+Math.floor(Te*100),Je=1+Math.floor(Te*3),rt=(30+Ct*120)*e.skyScale*(W/Xe);if(C.save(),C.beginPath(),C.rect(0,se,W,j-se),C.clip(),e.waterEnabled&&e.waterLayerReflections){const He=pe.current;if(He){const Ie=Math.floor(W*.5),Re=Math.floor(j*.5),Ft=He.width!==Ie||He.height!==Re;Ft&&(He.width=Ie,He.height=Re);const At=Math.abs(Yn.current-se)>.5,$e=Ft||At||kt.current,vt=He.getContext("2d");if(vt){$e&&(vt.clearRect(0,0,Ie,Re),vt.save(),vt.scale(.5,.5),vt.translate(0,se*3),vt.scale(1,-2),J.forEach(Vt=>{if(Vt.visible){const sn=H.current.get(Vt.id);sn&&vt.drawImage(sn,0,0,W,j)}}),vt.restore(),kt.current=!1,Yn.current=se),C.save(),C.globalAlpha=.8*e.waterOpacity;const Zt=(Me*8+2)*Ue;C.filter=`blur(${Zt}px)`;for(let Vt=0;Vt<Oe;Vt++){const sn=Vt/Oe,Kr=sn+Vo(sn*10,2)*Me*.1;if(Kr<0)continue;const Ro=se+Kr*_t,Nl=(Vt+1)/Oe,qa=Nl+Vo(Nl*10,2)*Me*.1,yf=se+qa*_t,gc=Math.max(1,yf-Ro+.5),gf=Vo(sn*10+Vt*.5,Je)*Ct*60*e.skyScale*Ue,vc=(se+sn*_t)*.5;Ro<j&&vc<Re&&C.drawImage(He,0,vc,Ie,Math.max(1,gc*.5),gf,Ro,W,gc)}C.restore()}}}if(e.sunElevation>-.04){C.save(),C.globalCompositeOperation="destination-out";const He=rt*1.5,Ie=C.createLinearGradient(Ce-He,0,Ce+He,0);Ie.addColorStop(0,"rgba(0,0,0,0)"),Ie.addColorStop(.3,"rgba(0,0,0,0.2)"),Ie.addColorStop(.5,"rgba(0,0,0,1)"),Ie.addColorStop(.7,"rgba(0,0,0,0.2)"),Ie.addColorStop(1,"rgba(0,0,0,0)"),C.fillStyle=Ie,C.fillRect(0,se,W,j-se),C.restore()}C.save(),C.globalCompositeOperation="destination-over",C.translate(0,se*2),C.scale(1,-1),C.fillStyle=G,C.fillRect(0,se,W,j),C.restore();const bt=.5*e.waterOpacity;if(C.fillStyle=`rgba(10, 30, 60, ${bt})`,C.globalCompositeOperation="multiply",C.fillRect(0,se,W,j-se),e.sunElevation>-.04){C.save(),C.globalCompositeOperation="color-dodge";const He=Math.max(0,1-Math.max(0,e.sunElevation)/.8),Ie=C.createLinearGradient(0,se,0,se+_t),Ft=e.sunElevation<.1?at:"white";Ie.addColorStop(0,Ft),Ie.addColorStop(.1+He*.2,at),Ie.addColorStop(1,"transparent"),C.fillStyle=Ie,C.shadowColor=at,C.shadowBlur=20*He*Ue;for(let At=0;At<Oe;At++){const $e=At/Oe,vt=$e+Vo($e*10,2)*Me*.1;if(vt<0||vt>1)continue;const Zt=se+vt*_t,Vt=Math.max(0,1-$e/(He+.1));if(Vt>.01){C.globalAlpha=Vt*e.waterOpacity;const sn=1+$e*4,Kr=Vo($e*10+At*.5,Je),Ro=Kr*Ct*rt*sn*.5,Nl=Math.max(.1,rt*sn*(.5+Math.abs(Kr)*.5)),qa=Math.max(.5,j/80*(1+$e*2)*(1+Me));C.beginPath(),C.ellipse(Ce+Ro,Zt,Nl/2,qa/2,0,0,Math.PI*2),C.fill()}}C.restore()}const Rt=(e.waterTurbulenceX+e.waterTurbulenceY)/2;Rt>.1&&(C.globalCompositeOperation="overlay",C.fillStyle=`rgba(255,255,255,${Rt*.1*e.waterOpacity})`,C.fillRect(0,se,W,j-se));const Gt=40*Ue,Ze=C.createLinearGradient(0,se,0,se+Gt);Ze.addColorStop(0,vn),Ze.addColorStop(1,"rgba(0,0,0,0)"),C.save(),C.globalCompositeOperation="source-over",C.fillStyle=Ze,C.fillRect(0,se,W,Gt),C.restore(),C.restore()};g.useEffect(()=>{Mt.current=St}),g.useEffect(()=>{let C;const W=()=>{const j=p,se=K.current,Ce=se==null?void 0:se.getContext("2d"),Ke=ve.current,G=Ke==null?void 0:Ke.getContext("2d"),at=Le.current,vn=Ne.current;if(De.current,at.skyEnabled&&se&&Ce&&vn.skyColors){(se.width!==I*j||se.height!==f*j)&&(se.width=I*j,se.height=f*j,Ce.setTransform(j,0,0,j,0,0)),Ke&&(Ke.width!==I*j||Ke.height!==f*j)&&(Ke.width=I*j,Ke.height=f*j,G==null||G.setTransform(j,0,0,j,0,0));const{stops:Ve,sun:Ue,sunX:_t,sunY:Ct,ground:Me}=vn.skyColors,Te=at.skyHorizon*100,Xe=at.skyScale,Oe=f*at.skyHorizon,Je=Te-60*Xe,rt=Te-30*Xe,bt=Te-12*Xe,Rt=Te,Gt=Te+.4*(100-Te),Ze=Ce.createLinearGradient(0,0,0,f),He=Ie=>Math.max(0,Math.min(1,Ie/100));if(Ze.addColorStop(He(0),Ve[0].color),Ze.addColorStop(He(Je),Ve[1].color),Ze.addColorStop(He(rt),Ve[2].color),Ze.addColorStop(He(bt),Ve[3].color),Ze.addColorStop(He(Rt),Ve[4].color),Me&&(Ze.addColorStop(He(Math.min(100,Gt)),Me),Ze.addColorStop(1,Me)),Ce.globalCompositeOperation="source-over",Ce.fillStyle=Ze,Ce.fillRect(0,0,I,f),at.sunEnabled){const Ie=ot.current;if(Ie){if(Ie.width!==se.width||Ie.height!==se.height){Ie.width=se.width,Ie.height=se.height;const Ft=Ie.getContext("2d");Ft&&Ft.setTransform(j,0,0,j,0,0)}const Re=Ie.getContext("2d");if(Re){Re.clearRect(0,0,I,f),Re.save();const Ft=90*at.skyScale/2;let At=1;if(Ct+Ft>Oe){const Zt=Ct+Ft-Oe;At=Math.max(.6,1-Zt/(Ft*2)*.5)}Re.translate(_t,Ct),Re.scale(1,At),Re.translate(-_t,-Ct),Re.shadowBlur=at.sunDiffusion>.5?40:10,Re.shadowColor=Ue,Re.fillStyle=Ue,Re.beginPath(),Re.arc(_t,Ct,Ft,0,Math.PI*2),Re.fill(),Re.restore(),Re.save(),Re.globalCompositeOperation="destination-out";const $e=20*at.skyScale,vt=Re.createLinearGradient(0,Oe,0,Oe+$e);vt.addColorStop(0,"rgba(0,0,0,0.2)"),vt.addColorStop(1,"rgba(0,0,0,1)"),Re.fillStyle=vt,Re.fillRect(0,Oe,I,$e*2),Re.fillStyle="black",Re.fillRect(0,Oe+$e,I,f-(Oe+$e)),Re.restore(),Ce.save(),Ce.globalCompositeOperation="source-over",Ce.drawImage(Ie,0,0,I,f),Ce.restore()}}}F.current&&(Ce.globalCompositeOperation="destination-out",Ce.drawImage(F.current,0,0,I,f),Ce.globalCompositeOperation="source-over"),G&&(G.clearRect(0,0,I,f),at.waterEnabled&&Mt.current&&(Mt.current(G,I,f,Oe,_t,Ct,Ze,Ue,Ve[4].color),F.current&&(G.globalCompositeOperation="destination-out",G.drawImage(F.current,0,0,I,f),G.globalCompositeOperation="source-over")))}else if(K.current){const Ve=K.current.getContext("2d");if(Ve&&Ve.clearRect(0,0,K.current.width,K.current.height),ve.current){const Ue=ve.current.getContext("2d");Ue&&Ue.clearRect(0,0,ve.current.width,ve.current.height)}}C=requestAnimationFrame(W)};return W(),()=>cancelAnimationFrame(C)},[I,f,p]),g.useEffect(()=>{const C=le.current;if(!C)return;const W=C.getContext("2d");if(!W)return;const j=p;if(C.width!==I*j||C.height!==f*j?(C.width=I*j,C.height=f*j,W.setTransform(j,0,0,j,0,0)):W.clearRect(0,0,I,f),e.skyEnabled&&e.lensFlareEnabled&&O.skyColors&&e.sunEnabled){const{sunX:se,sunY:Ce,sun:Ke}=O.skyColors;let G,at;if(e.flareTipPos?(G=e.flareTipPos.x*I,at=e.flareTipPos.y*f):(G=I-se,at=f-Ce),e.lensFlareHandleEnabled&&!e.flareTipPos&&t){const Ve=G/I,Ue=at/f;setTimeout(()=>t({...e,flareTipPos:{x:Ve,y:Ue}}),0)}const vn=cr(Ke);Ou(W,I,f,se,Ce,vn,e.lensFlareIntensity,1,e.lensFlareScale||1,e.skyScale,G,at)}},[e.skyEnabled,e.sunEnabled,e.lensFlareEnabled,e.lensFlareIntensity,e.lensFlareScale,e.lensFlareHandleEnabled,e.flareTipPos,e.skyScale,O.skyColors,I,f,p]);const ln=e.skyEnabled&&e.sunEnabled&&e.lensFlareEnabled&&e.lensFlareHandleEnabled&&O.skyColors;let Tt=0,Nn=0;O.skyColors&&(e.flareTipPos?(Tt=e.flareTipPos.x*I,Nn=e.flareTipPos.y*f):(Tt=I-O.skyColors.sunX,Nn=f-O.skyColors.sunY));const $n=C=>{if(C.button===1||w){me.current=!0,je.current={x:C.clientX,y:C.clientY};return}if(ln){const Ke=C.currentTarget.getBoundingClientRect(),G=(C.clientX-Ke.left)/d,at=(C.clientY-Ke.top)/d;if((G-Tt)**2+(at-Nn)**2<900){tt(!0),C.currentTarget.setPointerCapture(C.pointerId);return}}const W=C.currentTarget.getBoundingClientRect(),j=(C.clientX-W.left)/d,se=(C.clientY-W.top)/d;if(C.altKey||Ge){const Ke=_(j,se);Ke&&c(Ke),C.currentTarget.setPointerCapture(C.pointerId);return}yn(!0);const Ce=C.pressure||.5;e.isGradientMode?(Et({x:j,y:se}),mn({x:j,y:se})):e.isTapeMode||e.isPatternLine?(X({x:j,y:se}),ee({x:j,y:se})):e.isRectLassoFill?(gn({x:j,y:se}),Ln({x:j,y:se})):e.isLassoMode||e.isLassoFill||e.isStippleFill||e.isPatternLasso||e.isGradBlend?(zt(!0),Fe([{x:j,y:se}])):D(j,se,Ce,C.tiltX,C.tiltY),C.currentTarget.setPointerCapture(C.pointerId)},pt=C=>{if(me.current){const Ce=C.clientX-je.current.x,Ke=C.clientY-je.current.y;x(Ce,Ke),je.current={x:C.clientX,y:C.clientY};return}const W=C.currentTarget.getBoundingClientRect(),j=(C.clientX-W.left)/d,se=(C.clientY-W.top)/d;if(Ee){const Ce=j/I,Ke=se/f;t&&t({...e,flareTipPos:{x:Ce,y:Ke}});return}if(xe.current&&!me.current){const Ce=xe.current.getContext("2d");Ce&&ce(Ce,j,se,C.pressure,C.tiltX,C.tiltY)}if((C.altKey||Ge)&&C.buttons===1){const Ce=_(j,se);Ce&&c(Ce);return}if(e.isGradientMode&&ut)mn({x:j,y:se}),Pt.current={start:ut,end:{x:j,y:se}},ie(ut,{x:j,y:se},!0);else if((e.isTapeMode||e.isPatternLine)&&q)ee({x:j,y:se});else if(e.isRectLassoFill&&jt)Ln({x:j,y:se});else if((e.isLassoMode||e.isLassoFill||e.isStippleFill||e.isPatternLasso||e.isGradBlend)&&$t)Fe(Ce=>[...Ce,{x:j,y:se}]);else if(C.buttons===1){const Ke=(C.nativeEvent instanceof PointerEvent&&C.nativeEvent.getCoalescedEvents?C.nativeEvent.getCoalescedEvents():[C.nativeEvent]).map(G=>{const at=(G.clientX-W.left)/d,vn=(G.clientY-W.top)/d;return{x:at,y:vn,pressure:G.pressure||.5,tiltX:G.tiltX,tiltY:G.tiltY}});T(Ke),kt.current=!0}},or=C=>{if(me.current=!1,yn(!1),Ee){tt(!1),C.currentTarget.releasePointerCapture(C.pointerId);return}if(C.altKey||Ge){C.currentTarget.releasePointerCapture(C.pointerId);return}const W=(C.clientX-C.currentTarget.getBoundingClientRect().left)/d,j=(C.clientY-C.currentTarget.getBoundingClientRect().top)/d;e.isGradientMode&&ut?(ie(ut,{x:W,y:j},!1),Et(null),mn(null)):e.isTapeMode&&q?(Y(q.x,q.y,W,j),X(null),ee(null)):e.isPatternLine&&q?(U(q.x,q.y,W,j),X(null),ee(null)):e.isRectLassoFill&&jt?(ae(jt,{x:W,y:j}),gn(null),Ln(null)):(e.isLassoMode||e.isLassoFill||e.isStippleFill||e.isPatternLasso||e.isGradBlend)&&$t?(zt(!1),e.isLassoFill?Z(ze):e.isStippleFill?ne(ze):e.isPatternLasso?re(ze):e.isGradBlend?ye(ze):L(ze),Fe([])):$(),kt.current=!0,C.currentTarget.releasePointerCapture(C.pointerId)},lr=C=>{if(xe.current){const W=xe.current.getContext("2d");W&&W.clearRect(0,0,xe.current.width,xe.current.height)}},Yr=w||me.current?"cursor-grab active:cursor-grabbing":Ge||e.isGradientMode||e.isTapeMode||e.isLassoMode||e.isLassoFill||e.isStippleFill||e.isPatternLasso||e.isPatternLine||e.isRectLassoFill||e.isGradBlend?"cursor-crosshair":"cursor-none",Ka=ze.map(C=>`${C.x},${C.y}`).join(" "),Po=e.filmEnabled,[Wr]=g.useState(()=>Math.random().toString(36).slice(2,9)),Pr=`film-${Wr}`,Tr=`pictorialism-${Wr}`,ar=`riso-${Wr}`,_r=`ca-${Wr}`,an=g.useMemo(()=>{if(!Po)return null;const C=Ul[e.filmStock]||Ul.Standard,W=1+e.filmDensity*1.5,j=1+e.filmDensity*.5,se=-(.5*j)+.5,Ce=2+e.filmHalation*3,Ke=5+e.filmBloom*10,G=e.filmGrain,at=`1 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 ${e.filmHalation} 0`,vn=Du(G),Ve=Math.max(.15,.5-G*.35);return b("filter",{id:Pr,colorInterpolationFilters:"sRGB",x:"0%",y:"0%",width:"100%",height:"100%",children:[i("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:C,result:"graded"}),i("feColorMatrix",{in:"graded",type:"saturate",values:String(W),result:"saturated"}),b("feComponentTransfer",{in:"saturated",result:"densified",children:[i("feFuncR",{type:"linear",slope:j,intercept:se}),i("feFuncG",{type:"linear",slope:j,intercept:se}),i("feFuncB",{type:"linear",slope:j,intercept:se})]}),i("feColorMatrix",{in:"densified",type:"matrix",values:"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0",result:"luminance"}),b("feComponentTransfer",{in:"luminance",result:"highlights",children:[i("feFuncR",{type:"linear",slope:"3",intercept:"-1.5"}),i("feFuncG",{type:"linear",slope:"3",intercept:"-1.5"}),i("feFuncB",{type:"linear",slope:"3",intercept:"-1.5"})]}),i("feGaussianBlur",{in:"highlights",stdDeviation:Ce,result:"highlightBlur"}),i("feColorMatrix",{in:"highlightBlur",type:"matrix",values:at,result:"redHalation"}),i("feGaussianBlur",{in:"densified",stdDeviation:Ke,result:"bloom"}),i("feColorMatrix",{in:"bloom",type:"matrix",values:`1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 ${e.filmBloom} 0`,result:"fadedBloom"}),i("feTurbulence",{type:"fractalNoise",baseFrequency:`${Ve}`,numOctaves:"3",stitchTiles:"stitch",result:"rawNoise"}),i("feColorMatrix",{in:"rawNoise",type:"matrix",values:vn,result:"coloredGrain"}),i("feBlend",{mode:"screen",in:"redHalation",in2:"densified",result:"step1"}),i("feBlend",{mode:"screen",in:"fadedBloom",in2:"step2",result:"step2"}),i("feBlend",{mode:"overlay",in:"coloredGrain",in2:"step2",result:"final"})]})},[Po,e.filmStock,e.filmDensity,e.filmHalation,e.filmBloom,e.filmGrain,Pr]),To=g.useMemo(()=>{const C="0.1 0.15 0.25 0.40 0.55 0.70 0.82 0.90 0.95 0.97 0.98 0.99 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0",W=.05+e.pictorialismNoise*.2,j=.5+e.pictorialismSoftness*4;return b("filter",{id:Tr,colorInterpolationFilters:"sRGB",x:"0%",y:"0%",width:"100%",height:"100%",children:[i("feColorMatrix",{type:"matrix",values:"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0",result:"luma"}),b("feComponentTransfer",{in:"luma",result:"exposed",children:[i("feFuncR",{type:"linear",slope:"0.574"}),i("feFuncG",{type:"linear",slope:"0.574"}),i("feFuncB",{type:"linear",slope:"0.574"})]}),b("feComponentTransfer",{in:"exposed",result:"toneMapped",children:[i("feFuncR",{type:"table",tableValues:C}),i("feFuncG",{type:"table",tableValues:C}),i("feFuncB",{type:"table",tableValues:C})]}),i("feGaussianBlur",{in:"toneMapped",stdDeviation:`${j}`,result:"blurred"}),i("feColorMatrix",{in:"blurred",type:"matrix",values:"1.00 0 0 0 0  0 0.97 0 0 0  0 0 0.84 0 0  0 0 0 1 0",result:"tinted"}),i("feTurbulence",{type:"fractalNoise",baseFrequency:"0.8",numOctaves:"3",stitchTiles:"stitch",result:"grain"}),i("feColorMatrix",{in:"grain",type:"matrix",values:"1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 1 0",result:"monoGrain"}),i("feComponentTransfer",{in:"monoGrain",result:"softGrain",children:i("feFuncA",{type:"linear",slope:`${W}`})}),i("feBlend",{mode:"overlay",in:"softGrain",in2:"tinted",result:"grained"}),i("feFlood",{floodColor:"#000000",result:"black"}),i("feDiffuseLighting",{in:"black",lightingColor:"white",surfaceScale:"0",diffuseConstant:"1",result:"vignetteMap",children:i("fePointLight",{x:"50%",y:"50%",z:"600"})}),i("feBlend",{mode:"multiply",in:"grained",in2:"vignetteMap",result:"final"})]})},[Tr,e.pictorialismNoise,e.pictorialismSoftness]),gt=g.useMemo(()=>{const C=cr(e.risoColor1),W=cr(e.risoColor2),j={r:C.r/255,g:C.g/255,b:C.b/255},se={r:W.r/255,g:W.g/255,b:W.b/255},Ce=e.risoGrainScale;return b("filter",{id:ar,colorInterpolationFilters:"sRGB",x:"0%",y:"0%",width:"100%",height:"100%",children:[i("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:"0 0 0 0 0  0 0 0 0 0  0 0 0 0 0  0 0 0 1 0",result:"sourceAlpha"}),i("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0",result:"luma"}),i("feTurbulence",{type:"fractalNoise",baseFrequency:`${Ce}`,numOctaves:"1",stitchTiles:"stitch",result:"noise"}),i("feColorMatrix",{type:"matrix",values:"1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 1 0",in:"noise",result:"grayNoise"}),i("feComposite",{operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"-0.5",in:"luma",in2:"grayNoise",result:"screened"}),b("feComponentTransfer",{in:"screened",result:"binaryHalftone",children:[i("feFuncR",{type:"linear",slope:"20",intercept:"-10"}),i("feFuncG",{type:"linear",slope:"20",intercept:"-10"}),i("feFuncB",{type:"linear",slope:"20",intercept:"-10"})]}),b("feComponentTransfer",{in:"binaryHalftone",result:"duotone",children:[i("feFuncR",{type:"table",tableValues:`${j.r} ${se.r}`}),i("feFuncG",{type:"table",tableValues:`${j.g} ${se.g}`}),i("feFuncB",{type:"table",tableValues:`${j.b} ${se.b}`})]}),i("feComposite",{operator:"in",in:"duotone",in2:"sourceAlpha",result:"final"})]})},[ar,e.risoGrainScale,e.risoColor1,e.risoColor2]),ir=g.useMemo(()=>{const C=e.chromaticAberrationIntensity*20;return b("filter",{id:_r,colorInterpolationFilters:"sRGB",x:"-10%",y:"-10%",width:"120%",height:"120%",children:[i("feColorMatrix",{type:"matrix",values:"1 0 0 0 0  0 0 0 0 0  0 0 0 0 0  0 0 0 1 0",in:"SourceGraphic",result:"red"}),i("feOffset",{in:"red",dx:`${C}`,dy:"0",result:"red_shifted"}),i("feColorMatrix",{type:"matrix",values:"0 0 0 0 0  0 1 0 0 0  0 0 0 0 0  0 0 0 1 0",in:"SourceGraphic",result:"green"}),i("feColorMatrix",{type:"matrix",values:"0 0 0 0 0  0 0 0 0 0  0 0 1 0 0  0 0 0 1 0",in:"SourceGraphic",result:"blue"}),i("feOffset",{in:"blue",dx:`${-C}`,dy:"0",result:"blue_shifted"}),i("feBlend",{mode:"screen",in:"red_shifted",in2:"green",result:"rg"}),i("feBlend",{mode:"screen",in:"rg",in2:"blue_shifted",result:"final"})]})},[_r,e.chromaticAberrationIntensity]),Qr=g.useMemo(()=>e.risoEnabled?`url(#${ar})`:"none",[e.risoEnabled,ar]),_o=g.useMemo(()=>{if(y&&Be)return"none";const C=[];return e.chromaticAberrationEnabled&&C.push(`url(#${_r})`),e.filmEnabled&&(e.filmDensity!==0||e.filmHalation!==0||e.filmBloom!==0||e.filmGrain!==0||e.filmStock!=="Standard")&&C.push(`url(#${Pr})`),e.pictorialismEnabled&&C.push(`url(#${Tr})`),C.length>0?C.join(" "):"none"},[e.filmEnabled,e.filmDensity,e.filmHalation,e.filmBloom,e.filmGrain,e.filmStock,Pr,e.chromaticAberrationEnabled,_r,e.pictorialismEnabled,Tr,y,Be]);return g.useImperativeHandle(N,()=>({capturePattern:()=>Se(),downloadImage:C=>{const W=(C==null?void 0:C.width)||I,j=(C==null?void 0:C.height)||f,se=Ve=>{const Ue=document.createElement("a");Ue.download=`gouache-${Date.now()}.png`,Ue.href=Ve.toDataURL("image/png"),document.body.appendChild(Ue),Ue.click(),document.body.removeChild(Ue)},Ce=W/I,Ke=document.createElement("canvas");Ke.width=W,Ke.height=j;const G=Ke.getContext("2d");if(!G)return;G.imageSmoothingEnabled=!0,G.imageSmoothingQuality="high",G.globalCompositeOperation="source-over",G.globalAlpha=1,G.fillStyle=z,G.fillRect(0,0,W,j);const at=Ve=>{const Ue=document.createElement("canvas");Ue.width=W,Ue.height=j;const _t=Ue.getContext("2d");if(_t)if(J.forEach(Ct=>{if(Ct.visible&&Ct.ignoreGlow===Ve){const Me=H.current.get(Ct.id);Me&&_t.drawImage(Me,0,0,W,j)}}),e.risoEnabled){const Ct=`riso-export-${Ve?"glow":"norm"}-${Date.now()}`,Me=cr(e.risoColor1),Te=cr(e.risoColor2),Xe={r:Me.r/255,g:Me.g/255,b:Me.b/255},Oe={r:Te.r/255,g:Te.g/255,b:Te.b/255},Je=e.risoGrainScale/Ce,rt=`<svg xmlns="http://www.w3.org/2000/svg" style="display:none;">
                  <filter id="${Ct}" color-interpolation-filters="sRGB" x="0%" y="0%" width="100%" height="100%">
                    <feColorMatrix in="SourceGraphic" type="matrix" values="0 0 0 0 0  0 0 0 0 0  0 0 0 0 0  0 0 0 1 0" result="sourceAlpha"/>
                    <feColorMatrix in="SourceGraphic" type="matrix" values="0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0" result="luma"/>
                    <feTurbulence type="fractalNoise" baseFrequency="${Je}" numOctaves="1" stitchTiles="stitch" result="noise"/>
                    <feColorMatrix type="matrix" values="1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 1 0" in="noise" result="grayNoise"/>
                    <feComposite operator="arithmetic" k1="0" k2="1" k3="1" k4="-0.5" in="luma" in2="grayNoise" result="screened"/>
                    <feComponentTransfer in="binaryHalftone" result="binaryHalftone">
                        <feFuncR type="linear" slope="20" intercept="-10"/><feFuncG type="linear" slope="20" intercept="-10"/><feFuncB type="linear" slope="20" intercept="-10"/>
                    </feComponentTransfer>
                    <feComponentTransfer in="binaryHalftone" result="duotone">
                       <feFuncR type="table" tableValues="${Xe.r} ${Oe.r}"/><feFuncG type="table" tableValues="${Xe.g} ${Oe.g}"/><feFuncB type="table" tableValues="${Xe.b} ${Oe.b}"/>
                    </feComponentTransfer>
                    <feComposite operator="in" in="duotone" in2="sourceAlpha" result="final"/>
                  </filter>
                </svg>`,bt=document.createElement("div");bt.innerHTML=rt,document.body.appendChild(bt),G.save(),G.filter=`url(#${Ct})`,G.drawImage(Ue,0,0),G.restore(),document.body.removeChild(bt)}else G.drawImage(Ue,0,0)};if(e.skyEnabled&&O.skyColors){const{stops:Ve,sun:Ue,sunX:_t,sunY:Ct,ground:Me}=O.skyColors,Te=e.skyHorizon*100,Xe=e.skyScale,Oe=j*e.skyHorizon,Je=0,rt=Te-60*Xe,bt=Te-30*Xe,Rt=Te-12*Xe,Gt=Te,Ze=At=>Math.max(0,Math.min(1,At/100)),He=G.createLinearGradient(0,0,0,j);He.addColorStop(Ze(Je),Ve[0].color),He.addColorStop(Ze(rt),Ve[1].color),He.addColorStop(Ze(bt),Ve[2].color),He.addColorStop(Ze(Rt),Ve[3].color),He.addColorStop(Ze(Gt),Ve[4].color),Me&&(He.addColorStop(Ze(Math.min(100,Te+.4*(100-Te))),Me),He.addColorStop(1,Me)),G.fillStyle=He,G.fillRect(0,0,W,j);const Ie=_t/I*W,Re=Ct/f*j,Ft=90*e.skyScale*Ce/2;if(e.sunEnabled){const At=document.createElement("canvas");At.width=W,At.height=j;const $e=At.getContext("2d");if($e){$e.save();let vt=1;if(Re+Ft>Oe){const sn=Re+Ft-Oe;vt=Math.max(.6,1-sn/(Ft*2)*.5)}$e.translate(Ie,Re),$e.scale(1,vt),$e.translate(-Ie,-Re),$e.shadowColor=Ue,$e.shadowBlur=(e.sunDiffusion>.5?40:10)*Ce,$e.beginPath(),$e.arc(Ie,Re,Ft,0,Math.PI*2),$e.fillStyle=Ue,$e.fill(),$e.restore(),$e.save(),$e.globalCompositeOperation="destination-out";const Zt=20*e.skyScale*Ce,Vt=$e.createLinearGradient(0,Oe,0,Oe+Zt);Vt.addColorStop(0,"rgba(0,0,0,0.2)"),Vt.addColorStop(1,"rgba(0,0,0,1)"),$e.fillStyle=Vt,$e.fillRect(0,Oe,W,Zt*2),$e.fillStyle="black",$e.fillRect(0,Oe+Zt,W,j-(Oe+Zt)),$e.restore(),G.drawImage(At,0,0)}}F.current&&(G.save(),G.globalCompositeOperation="destination-out",G.drawImage(F.current,0,0,W,j),G.restore()),e.waterEnabled&&(St(G,W,j,Oe,Ie,Re,He,Ue,Ve[4].color),F.current&&(G.save(),G.globalCompositeOperation="destination-out",G.drawImage(F.current,0,0,W,j),G.restore())),G.globalCompositeOperation="destination-over",G.fillStyle=z,G.fillRect(0,0,W,j),G.globalCompositeOperation="source-over"}else G.fillStyle=z,G.fillRect(0,0,W,j);const vn=Ve=>{if(G.globalAlpha=1,G.globalCompositeOperation="source-over",Ve){G.save(),G.globalCompositeOperation="multiply",G.globalAlpha=.4;const Me=G.createPattern(Ve,"repeat");Me?(G.fillStyle=Me,G.fillRect(0,0,W,j)):G.drawImage(Ve,0,0,W,j),G.restore()}if(at(!1),e.skyEnabled&&O.skyColors&&e.sunEnabled){const{sunX:Me,sunY:Te,sun:Xe,stops:Oe}=O.skyColors,Je=Me/I*W,rt=Te/f*j,bt=e.sunIntensity,Rt=e.sunDiffusion,Gt=(15+bt*25)*Ce,Ze=e.atmosphereDensity??.5,Ie=(20+Ze*300*bt*Rt)*Ce,Re=Gt+Ie,Ft=cr(Xe),At=cr(Oe[3].color);let $e=xt(Ft,At,Math.min(1,Ze+.2));if(Rt<.5){const sn=(.5-Rt)*2;$e=xt($e,{r:255,g:40,b:10},sn*.8)}const vt=`rgba(${$e.r}, ${$e.g}, ${$e.b}`,Zt=G.createRadialGradient(Je,rt,0,Je,rt,Re);Zt.addColorStop(0,Xe),Zt.addColorStop(Gt/Re,`${vt}, ${.8*(1-Rt*.4)})`),Zt.addColorStop(1,`${vt}, 0)`);const Vt=j*e.skyHorizon;G.save(),G.beginPath(),G.rect(0,0,W,Vt),G.clip(),G.globalCompositeOperation="color-dodge",G.globalAlpha=.8+bt*.2,G.fillStyle=Zt,G.fillRect(Je-Re,rt-Re,Re*2,Re*2),G.restore()}if(G.globalAlpha=1,at(!0),O.ambientParams){const Me=O.ambientParams;if(G.save(),G.globalCompositeOperation=Me.mixBlendMode||"source-over",G.globalAlpha=Me.opacity,Me.type==="gradient"&&Me.gradient){const{x:Te,y:Xe,stops:Oe}=Me.gradient,Je=Te/I*W,rt=Xe/f*j,bt=Math.hypot(Je,rt),Rt=Math.hypot(W-Je,rt),Gt=Math.hypot(Je,j-rt),Ze=Math.hypot(W-Je,j-rt),He=Math.max(bt,Rt,Gt,Ze),Ie=G.createRadialGradient(Je,rt,0,Je,rt,He);Oe.forEach(Re=>{Ie.addColorStop(Re.offset,Re.color)}),G.fillStyle=Ie}else Me.type==="solid"&&Me.color&&(G.fillStyle=Me.color);G.fillRect(0,0,W,j),G.restore()}if(O.gradeStyles){const Me=O.gradeStyles.backdropFilter||O.gradeStyles.WebkitBackdropFilter;if(Me&&Me!=="none"){const Te=document.createElement("canvas");Te.width=W,Te.height=j;const Xe=Te.getContext("2d");Xe&&(Xe.drawImage(Ke,0,0),G.save(),G.globalCompositeOperation="copy",G.filter=Me,G.drawImage(Te,0,0),G.restore(),G.filter="none")}O.gradeStyles.backgroundColor&&(G.save(),G.globalCompositeOperation=O.gradeStyles.mixBlendMode||"overlay",G.globalAlpha=(Number(O.gradeStyles.opacity)||0)*.95,G.fillStyle=O.gradeStyles.backgroundColor,G.fillRect(0,0,W,j),G.restore())}if(e.skyEnabled&&e.lensFlareEnabled&&O.skyColors&&e.sunEnabled){const{sunX:Me,sunY:Te,sun:Xe}=O.skyColors,Oe=Me/I*W,Je=Te/f*j;let rt,bt;e.flareTipPos?(rt=e.flareTipPos.x*W,bt=e.flareTipPos.y*j):(rt=W-Oe,bt=j-Je);const Rt=document.createElement("canvas");Rt.width=W,Rt.height=j;const Gt=Rt.getContext("2d");if(Gt){const Ze=cr(Xe);Ou(Gt,W,j,Oe,Je,Ze,e.lensFlareIntensity,1,e.lensFlareScale||1,e.skyScale,rt,bt),G.save(),G.globalCompositeOperation="color-dodge",G.drawImage(Rt,0,0),G.restore()}}const Ue=[];let _t="";if(e.chromaticAberrationEnabled){const Me=`ca-export-${Date.now()}`,Te=e.chromaticAberrationIntensity*20*Ce;_t+=`<filter id="${Me}" color-interpolation-filters="sRGB" x="-10%" y="-10%" width="120%" height="120%"><feColorMatrix type="matrix" values="1 0 0 0 0  0 0 0 0 0  0 0 0 0 0  0 0 0 1 0" in="SourceGraphic" result="red"/><feOffset in="red" dx="${Te}" dy="0" result="red_shifted"/><feColorMatrix type="matrix" values="0 0 0 0 0  0 1 0 0 0  0 0 0 0 0  0 0 0 1 0" in="SourceGraphic" result="green"/><feColorMatrix type="matrix" values="0 0 0 0 0  0 0 0 0 0  0 0 1 0 0  0 0 0 1 0" in="SourceGraphic" result="blue"/><feOffset in="blue" dx="${-Te}" dy="0" result="blue_shifted"/><feBlend mode="screen" in="red_shifted" in2="green" result="rg"/><feBlend mode="screen" in="rg" in2="blue_shifted" result="final"/></filter>`,Ue.push(`url(#${Me})`)}const Ct=e.filmDensity===0&&e.filmHalation===0&&e.filmBloom===0&&e.filmGrain===0&&e.filmStock==="Standard";if(e.filmEnabled&&!Ct){const Me=`film-export-${Date.now()}`,Te=Ul[e.filmStock]||Ul.Standard,Xe=e.filmDensity===0?0:e.filmDensity,Oe=Xe===0?1:1+Xe*1.2,Je=Xe===0?1:1+Xe*.2,rt=Xe===0?0:-(.5*Je)+.5,bt=(2+e.filmHalation*3)*Ce,Rt=(5+e.filmBloom*10)*Ce,Gt=e.filmGrain,Ze=Math.max(.01,Math.max(.15,.5-Gt*.35)/Ce),He=`1 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 ${e.filmHalation} 0`,Ie=Du(Gt);_t+=`<filter id="${Me}" color-interpolation-filters="sRGB" x="0%" y="0%" width="100%" height="100%"><feColorMatrix in="SourceGraphic" type="matrix" values="${Te}" result="graded" /><feColorMatrix in="graded" type="saturate" values="${Math.max(0,Oe).toFixed(3)}" result="saturated" /><feComponentTransfer in="saturated" result="densified"><feFuncR type="linear" slope="${Je.toFixed(3)}" intercept="${rt.toFixed(3)}" /><feFuncG type="linear" slope="${Je.toFixed(3)}" intercept="${rt.toFixed(3)}" /><feFuncB type="linear" slope="${Je.toFixed(3)}" intercept="${rt.toFixed(3)}" /></feComponentTransfer><feColorMatrix in="densified" type="matrix" values="0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0" result="luminance" /><feComponentTransfer in="luminance" result="highlights"><feFuncR type="linear" slope="3" intercept="-1.5"/><feFuncG type="linear" slope="3" intercept="-1.5"/><feFuncB type="linear" slope="3" intercept="-1.5"/></feComponentTransfer><feGaussianBlur in="highlights" stdDeviation="${bt}" result="highlightBlur" /><feColorMatrix in="highlightBlur" type="matrix" values="${He}" result="redHalation" /><feGaussianBlur in="densified" stdDeviation="${Rt}" result="bloom" /><feColorMatrix in="bloom" type="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 ${e.filmBloom} 0" result="fadedBloom" /><feTurbulence type="fractalNoise" baseFrequency="${Ze}" numOctaves="3" stitchTiles="stitch" result="rawNoise" /><feColorMatrix in="rawNoise" type="matrix" values="${Ie}" result="coloredGrain" /><feBlend mode="screen" in="redHalation" in2="densified" result="step1" /><feBlend mode="screen" in="fadedBloom" in2="step2" result="step2" /><feBlend mode="overlay" in="coloredGrain" in2="step2" result="final" /></filter>`,Ue.push(`url(#${Me})`)}if(e.pictorialismEnabled){const Me=`pic-export-${Date.now()}`,Te="0.1 0.15 0.25 0.40 0.55 0.70 0.82 0.90 0.95 0.97 0.98 0.99 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0",Xe=.05+e.pictorialismNoise*.2,Oe=(.5+e.pictorialismSoftness*4)*Ce,Je=.8/Ce;_t+=`<filter id="${Me}" color-interpolation-filters="sRGB" x="0%" y="0%" width="100%" height="100%"><feColorMatrix type="matrix" values="0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0" result="luma"/><feComponentTransfer in="luma" result="exposed"><feFuncR type="linear" slope="0.574" /><feFuncG type="linear" slope="0.574" /><feFuncB type="linear" slope="0.574" /></feComponentTransfer><feComponentTransfer in="exposed" result="toneMapped"><feFuncR type="table" tableValues="${Te}"/><feFuncG type="table" tableValues="${Te}"/><feFuncB type="table" tableValues="${Te}"/></feComponentTransfer><feGaussianBlur in="toneMapped" stdDeviation="${Oe}" result="blurred"/><feColorMatrix in="blurred" type="matrix" values="1.00 0 0 0 0  0 0.97 0 0 0  0 0 0.84 0 0  0 0 0 1 0" result="tinted"/><feTurbulence type="fractalNoise" baseFrequency="${Je}" numOctaves="3" stitchTiles="stitch" result="grain"/><feColorMatrix in="grain" type="matrix" values="1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 1 0" result="monoGrain"/><feComponentTransfer in="monoGrain" result="softGrain"><feFuncA type="linear" slope="${Xe}"/></feComponentTransfer><feBlend mode="overlay" in="softGrain" in2="tinted" result="grained"/><feFlood floodColor="#000000" result="black"/><feDiffuseLighting in="black" lightingColor="white" surfaceScale="0" diffuseConstant="1" result="vignetteMap"><fePointLight x="50%" y="50%" z="600" /></feDiffuseLighting><feBlend mode="multiply" in="grained" in2="vignetteMap" result="final"/></filter>`,Ue.push(`url(#${Me})`)}if(Ue.length>0){const Me=document.createElement("div");Me.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" style="display:none;">${_t}</svg>`,document.body.appendChild(Me);const Te=document.createElement("canvas");Te.width=W,Te.height=j;const Xe=Te.getContext("2d");Xe&&(Xe.drawImage(Ke,0,0),G.clearRect(0,0,W,j),G.save(),G.filter=Ue.join(" "),G.drawImage(Te,0,0),G.restore()),setTimeout(()=>{document.body.removeChild(Me)},100)}se(Ke)};if(te){const Ve=new Image;Ve.crossOrigin="Anonymous",Ve.src=te,Ve.onload=()=>vn(Ve)}else vn()}}),[e,O,n,I,f,J,z,nt,be]),b("div",{ref:Ye,className:"absolute inset-0 bg-[#09090b] flex items-center justify-center overflow-hidden",children:[i("svg",{className:"absolute w-0 h-0 pointer-events-none",children:b("defs",{children:[an,To,gt,ir]})}),b("div",{className:`relative shadow-2xl ring-1 ring-white/10 origin-center ${Yr}`,style:{width:I,height:f,transform:`translate(${v.x}px, ${v.y}px) scale(${d})`,flexShrink:0,filter:S?"grayscale(100%)":"none",touchAction:"none",willChange:"transform"},onPointerDown:$n,onPointerUp:or,onPointerLeave:lr,onPointerMove:pt,children:[b("div",{className:"absolute inset-0 w-full h-full overflow-hidden",style:{filter:_o,willChange:Po?"filter":"auto"},children:[i("div",{className:"absolute inset-0 w-full h-full transition-colors duration-200 ease-linear",style:{backgroundColor:z,zIndex:0}}),e.skyEnabled&&i("canvas",{ref:K,className:"absolute inset-0 block w-full h-full",style:{zIndex:1}}),e.skyEnabled&&e.waterEnabled&&i("canvas",{ref:ve,className:"absolute inset-0 block w-full h-full",style:{zIndex:2}}),te&&i("div",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{backgroundImage:`url(${te})`,backgroundRepeat:"repeat",mixBlendMode:"multiply",opacity:.4,zIndex:5}}),i("div",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{filter:Qr,zIndex:5},children:J.filter(C=>!C.ignoreGlow).map(C=>i("canvas",{ref:W=>{W?H.current.set(C.id,W):H.current.delete(C.id)},className:`absolute inset-0 block touch-none w-full h-full transition-opacity duration-200 ${C.visible?"opacity-100":"opacity-0"}`,style:{pointerEvents:"auto"}},C.id))}),i("div",{className:"absolute inset-0 pointer-events-none transition-all duration-500 ease-in-out",style:{...O.glowStyles,zIndex:10}}),i("div",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{filter:Qr,zIndex:15},children:J.filter(C=>C.ignoreGlow).map(C=>i("canvas",{ref:W=>{W?H.current.set(C.id,W):H.current.delete(C.id)},className:`absolute inset-0 block touch-none w-full h-full transition-opacity duration-200 ${C.visible?"opacity-100":"opacity-0"}`,style:{pointerEvents:"auto"}},C.id))}),i("div",{className:"absolute inset-0 pointer-events-none transition-all duration-500 ease-in-out",style:{...O.ambientStyles,zIndex:18}}),i("div",{className:"absolute inset-0 pointer-events-none transition-all duration-500 ease-in-out",style:{...O.gradeStyles,zIndex:19}}),i("canvas",{ref:le,className:"absolute inset-0 block pointer-events-none w-full h-full",style:{zIndex:35,opacity:e.skyEnabled?1:0,mixBlendMode:"color-dodge"}})]}),i("canvas",{ref:F,className:"absolute inset-0 block touch-none w-full h-full",style:{mixBlendMode:e.skyEnabled?"normal":"multiply",opacity:e.skyEnabled?.6:.8,pointerEvents:"none",zIndex:30}}),i("canvas",{ref:xe,className:"absolute inset-0 block pointer-events-none w-full h-full",style:{zIndex:50}}),(e.isTapeMode||e.isPatternLine)&&q&&oe&&i("svg",{className:"absolute inset-0 pointer-events-none w-full h-full overflow-visible",style:{zIndex:40},children:i("line",{x1:q.x,y1:q.y,x2:oe.x,y2:oe.y,stroke:e.isPatternLine?"#10b981":"#4299e1",strokeWidth:e.isPatternLine?e.size:e.tapeWidth,strokeOpacity:"0.5",strokeLinecap:"butt",strokeDasharray:"10 5"})}),e.isRectLassoFill&&jt&&bn&&i("svg",{className:"absolute inset-0 pointer-events-none w-full h-full overflow-visible",style:{zIndex:40},children:i("rect",{x:Math.min(jt.x,bn.x),y:Math.min(jt.y,bn.y),width:Math.abs(bn.x-jt.x),height:Math.abs(bn.y-jt.y),fill:"rgba(20, 184, 166, 0.2)",stroke:"#14b8a6",strokeWidth:"2",strokeDasharray:"5 5"})}),(e.isLassoMode||e.isLassoFill||e.isStippleFill||e.isPatternLasso||e.isGradBlend)&&$t&&i("svg",{className:"absolute inset-0 pointer-events-none w-full h-full overflow-visible",style:{zIndex:40},children:i("polygon",{points:Ka,fill:e.isPatternLasso?"rgba(16, 185, 129, 0.2)":e.isStippleFill?"rgba(234, 179, 8, 0.2)":e.isLassoFill?"rgba(20, 184, 166, 0.2)":e.isGradBlend?"rgba(168, 85, 247, 0.2)":e.lassoMode==="add"?"rgba(66, 153, 225, 0.2)":"rgba(255, 99, 71, 0.2)",stroke:e.isPatternLasso?"#10b981":e.isStippleFill?"#ca8a04":e.isLassoFill?"#14b8a6":e.isGradBlend?"#a855f7":e.lassoMode==="add"?"#4299e1":"#ff6347",strokeWidth:"2",strokeDasharray:"5 5"})}),e.isGradientMode&&ut&&It&&b("svg",{className:"absolute inset-0 pointer-events-none w-full h-full overflow-visible",style:{zIndex:40},children:[i("circle",{cx:ut.x,cy:ut.y,r:10,fill:"rgba(255, 200, 100, 0.5)",stroke:"white",strokeWidth:"1"}),i("line",{x1:ut.x,y1:ut.y,x2:It.x,y2:It.y,stroke:"rgba(255, 255, 255, 0.5)",strokeWidth:"1",strokeDasharray:"4 4"}),i("circle",{cx:It.x,cy:It.y,r:4,fill:"rgba(255, 255, 255, 0.3)"})]}),ln&&b("svg",{className:"absolute inset-0 w-full h-full overflow-visible pointer-events-none",style:{zIndex:100},children:[O.skyColors&&i("line",{x1:O.skyColors.sunX,y1:O.skyColors.sunY,x2:Tt,y2:Nn,stroke:"rgba(255,255,255,0.15)",strokeWidth:"1.5",strokeDasharray:"4 6"}),i("circle",{cx:Tt,cy:Nn,r:8,fill:Ee?"rgba(34,211,238,0.8)":"rgba(34,211,238,0.1)",stroke:"rgba(34,211,238,0.9)",strokeWidth:"2",className:"pointer-events-auto cursor-move hover:fill-[rgba(34,211,238,0.3)] transition-colors drop-shadow-[0_0_10px_rgba(34,211,238,0.5)]"}),i("circle",{cx:Tt,cy:Nn,r:12,fill:"transparent",stroke:"rgba(255,255,255,0.5)",strokeWidth:"1",strokeDasharray:"2 2",className:"pointer-events-none opacity-50"}),i("circle",{cx:Tt,cy:Nn,r:30,fill:"transparent",className:"pointer-events-auto cursor-move"})]})]})]})});hf.displayName="Canvas";const ju={flat:zm,round:d1,chisel:W1,hog:Co,fan:Ci,fan2:Ci,fan3:Ci,pastel:Pu,pastel2:Pu},ny={r:255,g:160,b:60},ry={r:40,g:70,b:110},oy=({value:e,onChange:t,size:n=200})=>{const r=g.useRef(null),o=n/2,l=14,a=n/2-l-20,s=180,c=270,d=F=>s+F*c,v=(F,K=a)=>{const ve=F*Math.PI/180;return{x:o+K*Math.cos(ve),y:o+K*Math.sin(ve)}},x=F=>{if(!r.current)return;const K=r.current.getBoundingClientRect(),ve=F.clientX-(K.left+o),le=F.clientY-(K.top+o);let xe=Math.atan2(le,ve)*180/Math.PI;xe<0&&(xe+=360);let Ye=xe-180;Ye<0&&(Ye+=360);let pe=0;Ye>270?Ye>315?pe=0:pe=1:pe=Ye/270,t(Math.max(0,Math.min(1,pe)))},w=d(e),E=v(w),S=v(s),P=v(s+c),I=1,f=["M",S.x,S.y,"A",a,a,0,I,1,P.x,P.y].join(" "),h=a+22,u=v(180,h),y=v(270,h),N=v(360,h),H=v(450,h);return b("div",{className:"relative flex flex-col items-center justify-center p-2 no-drag select-none",children:[b("svg",{ref:r,width:n,height:n,className:"cursor-pointer touch-none drop-shadow-xl",onPointerDown:F=>{F.currentTarget.setPointerCapture(F.pointerId),x(F)},onPointerMove:F=>{F.buttons>0&&x(F)},onPointerUp:F=>F.currentTarget.releasePointerCapture(F.pointerId),children:[i("defs",{children:b("linearGradient",{id:"trackGrad",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[i("stop",{offset:"0%",stopColor:"#ea580c"}),i("stop",{offset:"50%",stopColor:"#3b82f6"}),i("stop",{offset:"100%",stopColor:"#312e81"})]})}),i("path",{d:f,fill:"none",stroke:"#18181b",strokeWidth:l,strokeLinecap:"round"}),i("path",{d:f,fill:"none",stroke:"url(#trackGrad)",strokeWidth:l,strokeLinecap:"round"}),[0,.33,.66,1].map((F,K)=>{const ve=v(d(F),a-l/2),le=v(d(F),a+l/2);return i("line",{x1:ve.x,y1:ve.y,x2:le.x,y2:le.y,stroke:"rgba(255,255,255,0.3)",strokeWidth:"2"},K)}),i("circle",{cx:E.x,cy:E.y,r:14,fill:"#fff",stroke:"#000",strokeWidth:2,className:"shadow-lg shadow-black/50"}),i("g",{transform:`translate(${u.x}, ${u.y})`,className:"text-zinc-500",children:i(uf,{size:18,stroke:"currentColor",x:-9,y:-9})}),i("g",{transform:`translate(${y.x}, ${y.y})`,className:"text-zinc-500",children:i($r,{size:20,stroke:"currentColor",x:-10,y:-10})}),i("g",{transform:`translate(${N.x}, ${N.y})`,className:"text-zinc-500",children:i(df,{size:18,stroke:"currentColor",x:-9,y:-9})}),i("g",{transform:`translate(${H.x}, ${H.y})`,className:"text-zinc-500",children:i(af,{size:18,stroke:"currentColor",x:-9,y:-9})})]}),b("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center pointer-events-none mt-4",children:[i("span",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest block mb-1",children:"Local Time"}),i("span",{className:"text-xl font-mono text-white font-bold tracking-tight",children:e<.2?"DAWN":e<.45?"DAY":e<.75?"DUSK":"NIGHT"})]})]})},ly=({settings:e,onChange:t,onClearMasks:n,onInvertMask:r,visible:o,onClose:l,grayscaleMode:a,onToggleGrayscale:s,isMobile:c})=>{const[d,v]=g.useState(()=>zi(e.color)),[x,w]=g.useState("hsv"),[E,S]=g.useState(!1),[P,I]=g.useState(0),f=g.useRef(null),h=g.useRef(null),u=g.useRef(!1),[y,N]=g.useState(0),H=g.useRef(null),F=g.useRef(null),K=g.useRef(!1),[ve,le]=g.useState({x:0,y:0}),[xe,Ye]=g.useState({w:260,h:320}),[pe,ot]=g.useState(!1),te=g.useRef(null),B=g.useRef(null),q=g.useRef(!1),X=g.useRef(null),oe=g.useRef(null),ee=g.useRef(null),ze=g.useRef(null),Fe=g.useRef({});g.useEffect(()=>{let m,A;c?(m=(window.innerWidth-xe.w)/2,A=100):(m=Math.max(20,window.innerWidth-xe.w-20),A=20),le({x:m,y:A}),ot(!0)},[]),g.useEffect(()=>{const m=()=>{le(A=>{const ie=window.innerWidth-50,be=window.innerHeight-50;let ue=A.x,O=A.y;return ue>ie&&(ue=ie),O>be&&(O=be),ue<0&&(ue=20),O<0&&(O=20),{x:ue,y:O}})};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),g.useEffect(()=>{!X.current&&!u.current&&!K.current&&(v(zi(e.color)),I(0),N(0))},[e.color]);const $t=m=>{if(!(m.target instanceof SVGElement||m.target.tagName==="BUTTON"||m.target.closest(".no-drag")||m.target.tagName==="INPUT")&&(m.preventDefault(),m.stopPropagation(),m.currentTarget.setPointerCapture(m.pointerId),B.current)){const A=B.current.getBoundingClientRect();te.current={x:m.clientX-A.left,y:m.clientY-A.top}}},zt=m=>{if(te.current&&B.current){m.preventDefault(),m.stopPropagation();let A=m.clientX-te.current.x,ie=m.clientY-te.current.y;const be=window.innerWidth-50,ue=window.innerHeight-50;A=Math.max(0,Math.min(A,be)),ie=Math.max(0,Math.min(ie,ue)),B.current.style.left=`${A}px`,B.current.style.top=`${ie}px`}},ut=m=>{if(te.current&&B.current){const A=B.current.getBoundingClientRect();le({x:A.left,y:A.top})}m.preventDefault(),te.current=null,m.currentTarget.releasePointerCapture(m.pointerId)},Et=m=>{c||(m.preventDefault(),m.stopPropagation(),m.currentTarget.setPointerCapture(m.pointerId),q.current=!0)},It=m=>{if(q.current&&!c){m.preventDefault(),m.stopPropagation();const A=Math.max(260,m.clientX-ve.x),ie=Math.max(300,m.clientY-ve.y);Ye({w:A,h:ie})}},mn=m=>{q.current&&(m.preventDefault(),m.stopPropagation(),q.current=!1,m.currentTarget.releasePointerCapture(m.pointerId))},Pt=m=>{v(m);const A=Vl(m.h,m.s,m.v);t({...e,color:A})},me=(m,A,ie)=>{const be=bo(m,A,ie);v(pf(m,A,ie)),t({...e,color:be})},je=(m,A)=>{if(!oe.current)return;const ie=oe.current,be=Math.max(0,Math.min(1,(m-ie.left)/ie.width)),ue=Math.max(0,Math.min(1,(A-ie.top)/ie.height));Pt({...d,s:be,v:1-ue})},Ee=m=>{if(!oe.current)return;const A=oe.current,ie=Math.max(0,Math.min(1,(m-A.left)/A.width));Pt({...d,h:ie*360})},tt=(m,A)=>{if(!oe.current)return;const ie=oe.current,be=Math.max(0,Math.min(1,(m-ie.left)/ie.width));if(A==="h"&&Pt({...d,h:be*360}),A==="s"&&Pt({...d,s:be}),A==="v"&&Pt({...d,v:be}),["r","g","b"].includes(A)){const{r:ue,g:O,b:J}=tn(e.color),he=Math.round(be*255);A==="r"&&me(he,O,J),A==="g"&&me(ue,he,J),A==="b"&&me(ue,O,he)}},Ge=(m,A)=>{m.preventDefault(),m.stopPropagation(),m.currentTarget.setPointerCapture(m.pointerId),X.current={type:A};let ie=null;A==="sv"?ie=ee.current:A==="hue"?ie=ze.current:ie=Fe.current[A],ie&&(oe.current=ie.getBoundingClientRect()),A==="sv"?je(m.clientX,m.clientY):A==="hue"?Ee(m.clientX):tt(m.clientX,A)},Jt=m=>{if(!X.current)return;m.preventDefault(),m.stopPropagation();const A=X.current.type;A==="sv"?je(m.clientX,m.clientY):A==="hue"?Ee(m.clientX):tt(m.clientX,A)},Be=m=>{m.preventDefault(),X.current&&(m.currentTarget.releasePointerCapture(m.pointerId),X.current=null,oe.current=null)},yn=m=>{if(!h.current||!f.current)return;const A=h.current.getBoundingClientRect(),ie=(m-A.left)/A.width,ue=Math.max(0,Math.min(1,ie))*2-1;I(ue);const O=tn(f.current),J=ue>0?ny:ry,he=Math.abs(ue)*.5,ke=xt(O,J,he);t({...e,color:bo(ke.r,ke.g,ke.b)})},jt=m=>{m.preventDefault(),m.stopPropagation(),m.currentTarget.setPointerCapture(m.pointerId),u.current=!0,f.current=e.color,yn(m.clientX)},gn=m=>{u.current&&(m.preventDefault(),m.stopPropagation(),yn(m.clientX))},bn=m=>{m.preventDefault(),u.current&&(m.currentTarget.releasePointerCapture(m.pointerId),u.current=!1,f.current=null)},Ln=m=>{if(!F.current||!H.current)return;const A=F.current.getBoundingClientRect(),ie=(m-A.left)/A.width,ue=Math.max(0,Math.min(1,ie))*2-1;N(ue);let{h:O,s:J,v:he}=zi(H.current);const ke=Math.abs(ue),nt=Math.pow(ke,1.5);if(ue>0){let We=50-O;We>180&&(We-=360),We<-180&&(We+=360),O=(O+We*(nt*.5))%360,O<0&&(O+=360),he=Math.min(1,he+(1-he)*(nt*.7)),J=Math.max(0,J-J*nt*.4)}else{let We=240-O;We>180&&(We-=360),We<-180&&(We+=360),O=(O+We*(nt*.9))%360,O<0&&(O+=360),J=Math.min(1,J+(1-J)*(nt*.6));const lt=1-nt*.98;he=he*lt,ke>.99&&(he=0)}t({...e,color:Vl(O,J,he)})},kt=m=>{m.preventDefault(),m.stopPropagation(),m.currentTarget.setPointerCapture(m.pointerId),K.current=!0,H.current=e.color,Ln(m.clientX)},Yn=m=>{K.current&&(m.preventDefault(),m.stopPropagation(),Ln(m.clientX))},p=m=>{m.preventDefault(),K.current&&(m.currentTarget.releasePointerCapture(m.pointerId),K.current=!1,H.current=null)},k=()=>({isTapeMode:!1,isLassoMode:!1,isGradientMode:!1,isLassoFill:!1,isRectLassoFill:!1,isStippleFill:!1,isPatternLasso:!1,isPatternLine:!1,isGradBlend:!1}),M=m=>{t({...e,...k(),brushType:m})},z=()=>{t({...e,...k(),isLassoMode:!e.isLassoMode})},R=()=>{t({...e,...k(),isLassoFill:!e.isLassoFill})},D=()=>{t({...e,...k(),isRectLassoFill:!e.isRectLassoFill})},$=()=>{t({...e,...k(),isStippleFill:!e.isStippleFill})},T=()=>{t({...e,...k(),isTapeMode:!e.isTapeMode})},V=()=>{t({...e,...k(),isGradientMode:!e.isGradientMode})},_=()=>{t({...e,...k(),isGradBlend:!e.isGradBlend})},Y=()=>{t({...e,...k(),isPatternLasso:!e.isPatternLasso})},L=()=>{t({...e,...k(),isPatternLine:!e.isPatternLine})},Z=tn(e.color),ae=.299*Z.r+.587*Z.g+.114*Z.b,ne=a?`rgb(${ae}, ${ae}, ${ae})`:e.color,re=xe.w<160,U=(m,A,ie,be,ue)=>b("div",{className:"flex-1 min-h-[18px] flex items-center gap-2 text-[10px] font-mono group",children:[i("span",{className:"w-2.5 font-bold text-zinc-500 flex-shrink-0",children:ue}),i("div",{ref:O=>{Fe.current[m]=O},className:"flex-1 h-2 relative rounded-full cursor-pointer ring-1 ring-white/5 overflow-hidden",style:{background:be,touchAction:"none"},onPointerDown:O=>Ge(O,m),onPointerMove:Jt,onPointerUp:Be,onPointerCancel:Be,children:i("div",{className:"absolute top-0 bottom-0 w-2 h-2 rounded-full bg-white shadow-sm -translate-x-1/2 pointer-events-none ring-1 ring-black/20",style:{left:`${A/ie*100}%`}})}),!re&&i("span",{className:"w-6 text-right text-zinc-400 flex-shrink-0",children:Math.round(A)})]}),ye=()=>b("div",{className:"flex-1 min-h-[18px] flex items-center gap-2 text-[10px] font-mono group mt-1",title:"Color Temperature Shift",children:[i(Im,{className:"w-3 h-3 text-zinc-500 flex-shrink-0"}),b("div",{ref:h,className:"flex-1 h-2 relative rounded-full cursor-ew-resize ring-1 ring-white/5 overflow-hidden bg-zinc-800",onPointerDown:jt,onPointerMove:gn,onPointerUp:bn,onPointerCancel:bn,style:{touchAction:"none"},children:[i("div",{className:"absolute inset-0 opacity-80",style:{background:"linear-gradient(to right, #3b82f6, #71717a, #f97316)"}}),i("div",{className:"absolute top-0 bottom-0 w-px bg-white/30 left-1/2"}),i("div",{className:"absolute top-0 bottom-0 w-2 h-2 rounded-full bg-white shadow-sm -translate-x-1/2 pointer-events-none ring-1 ring-black/20 transition-transform duration-75",style:{left:`${(P+1)/2*100}%`}})]}),!re&&b("span",{className:"w-6 text-right text-zinc-400 flex-shrink-0",children:[P>0?"+":"",Math.round(P*100)]})]}),Se=()=>b("div",{className:"flex-1 min-h-[18px] flex items-center gap-2 text-[10px] font-mono group",title:"Composite Brightness (Natural Light)",children:[y>0?i($r,{className:"w-3 h-3 text-zinc-500 flex-shrink-0"}):i(C1,{className:"w-3 h-3 text-zinc-500 flex-shrink-0"}),b("div",{ref:F,className:"flex-1 h-2 relative rounded-full cursor-ew-resize ring-1 ring-white/5 overflow-hidden bg-zinc-800",onPointerDown:kt,onPointerMove:Yn,onPointerUp:p,onPointerCancel:p,style:{touchAction:"none"},children:[i("div",{className:"absolute inset-0 opacity-80",style:{background:"linear-gradient(to right, #1e3a8a, #71717a, #fef08a)"}}),i("div",{className:"absolute top-0 bottom-0 w-px bg-white/30 left-1/2"}),i("div",{className:"absolute top-0 bottom-0 w-2 h-2 rounded-full bg-white shadow-sm -translate-x-1/2 pointer-events-none ring-1 ring-black/20 transition-transform duration-75",style:{left:`${(y+1)/2*100}%`}})]}),!re&&b("span",{className:"w-6 text-right text-zinc-400 flex-shrink-0",children:[y>0?"+":"",Math.round(y*100)]})]});if(!pe||!o)return null;let _e=$r;const we=e.gradientTime;we<.2||we>.8?_e=af:we<.4?_e=uf:we<.6?_e=$r:_e=df;const ce={left:ve.x,top:ve.y,width:xe.w,height:xe.h};return b("div",{ref:B,className:`fixed bg-zinc-900/60 backdrop-blur-xl border border-white/10 rounded-xl shadow-2xl shadow-black/50 flex flex-col text-zinc-200 select-none z-50 overflow-hidden transition-[width,height] duration-200 ${c?"animate-in fade-in zoom-in-95":""}`,style:{...ce,touchAction:"none"},children:[b("div",{className:"flex items-center justify-between p-2 border-b border-white/5 cursor-move group touch-none shrink-0 bg-white/[0.02]",onPointerDown:$t,onPointerMove:zt,onPointerUp:ut,onPointerCancel:ut,children:[i("div",{className:"flex items-center gap-2",children:e.isGradientMode?b("div",{className:"flex items-center gap-2",children:[" ",i(_e,{className:"w-4 h-4 text-orange-400"})," ",!re&&i("span",{className:"font-bold text-[10px] tracking-widest text-zinc-400 uppercase",children:"Atmosphere"})," "]}):b(ql,{children:[" ",i("div",{className:"w-4 h-4 rounded-full shadow-inner ring-1 ring-white/10 transition-colors",style:{backgroundColor:ne}})," ",!re&&i("span",{className:"font-bold text-[10px] tracking-widest text-zinc-400 uppercase",children:a?"Value":"Color"})," "]})}),b("div",{className:"flex items-center gap-1 no-drag",children:[(e.isTapeMode||e.isPatternLine)&&b("div",{className:"flex items-center gap-1.5 mr-2 no-drag",children:[" ",i("span",{className:"text-[9px] font-bold text-zinc-500 uppercase tracking-wider whitespace-nowrap",children:"Width"})," ",i("input",{type:"range",min:"5",max:"150",value:e.tapeWidth,onChange:m=>t({...e,tapeWidth:Number(m.target.value)}),className:"w-16 h-1 bg-zinc-700 rounded-full appearance-none cursor-pointer accent-indigo-500",title:"Tape Width",onPointerDown:m=>m.stopPropagation()})," "]}),!e.isTapeMode&&!e.isGradientMode&&!e.isPatternLine&&!e.isPatternLasso&&!e.isGradBlend&&b("div",{className:"flex gap-0.5 bg-zinc-800/50 p-0.5 rounded-lg border border-white/5",children:[i("button",{onClick:()=>t({...e,wetMode:!e.wetMode}),className:`p-1.5 rounded-md transition-colors ${e.wetMode?"text-blue-400 bg-blue-500/10":"text-zinc-500 hover:text-zinc-200"}`,title:"Wet Blend",children:i(M1,{className:"w-3.5 h-3.5"})}),i("button",{onClick:()=>t({...e,autoClean:!e.autoClean}),className:`p-1.5 rounded-md transition-colors ${e.autoClean?"text-cyan-400 bg-cyan-500/10":"text-zinc-500 hover:text-zinc-200"}`,title:"Auto-Clean",children:i(sf,{className:"w-3.5 h-3.5"})}),i("button",{onClick:()=>t({...e,pressureSensitivity:!e.pressureSensitivity}),className:`p-1.5 rounded-md transition-colors ${e.pressureSensitivity?"text-amber-400 bg-amber-500/10":"text-zinc-500 hover:text-zinc-200"}`,title:"Pressure",children:i(La,{className:"w-3.5 h-3.5"})}),i("button",{onClick:()=>t({...e,isEraser:!e.isEraser}),className:`p-1.5 rounded-md transition-colors ${e.isEraser?"text-red-400 bg-red-500/10":"text-zinc-500 hover:text-zinc-200"}`,title:"Eraser",children:i(N1,{className:"w-3.5 h-3.5"})})]}),i("div",{className:"w-px h-4 bg-white/10 mx-1"}),i("button",{onClick:r,className:"p-1.5 text-zinc-500 hover:text-zinc-200 hover:bg-white/5 rounded-md transition-colors",title:"Invert Mask",children:i(F1,{className:"w-3.5 h-3.5"})}),i("button",{onClick:n,className:"p-1.5 text-zinc-500 hover:text-red-400 hover:bg-red-500/10 rounded-md transition-colors",title:"Clear Mask",children:i(n1,{className:"w-3.5 h-3.5"})}),i("div",{className:"w-px h-4 bg-white/10 mx-1"}),i("button",{onClick:()=>S(!E),className:`p-1.5 rounded-md transition-colors ${E?"bg-indigo-500/20 text-indigo-400 ring-1 ring-indigo-500/30":"text-zinc-400 hover:text-zinc-100 hover:bg-white/5"}`,children:i(Co,{className:"w-3.5 h-3.5"})}),i("div",{className:"w-px h-4 bg-white/10 mx-1"}),!c&&i(of,{className:"w-3.5 h-3.5 text-zinc-600 pointer-events-none"}),i("button",{onClick:l,className:"text-zinc-500 hover:text-white p-1 hover:bg-white/5 rounded-md transition-colors",onPointerDown:m=>m.stopPropagation(),children:i(Ra,{className:"w-3.5 h-3.5"})})]})]}),b("div",{className:"flex-1 flex flex-col p-2 gap-2 overflow-hidden relative",children:[E&&b("div",{className:"flex flex-col gap-1 p-1 bg-zinc-800/50 rounded-lg animate-in fade-in slide-in-from-top-2 shrink-0 no-drag border border-white/5",children:[b("div",{className:`grid ${re?"grid-cols-4":"grid-cols-6"} gap-1`,children:[Object.keys(ju).map(m=>{const A=ju[m],ie=e.brushType===m&&!e.isTapeMode&&!e.isLassoMode&&!e.isGradientMode&&!e.isLassoFill&&!e.isRectLassoFill&&!e.isStippleFill&&!e.isPatternLasso&&!e.isPatternLine&&!e.isGradBlend;return b("button",{onClick:()=>M(m),className:`h-8 flex items-center justify-center rounded-md transition-all ${ie?"bg-zinc-100 text-zinc-900 shadow-sm":"text-zinc-500 hover:bg-white/5 hover:text-zinc-300"}`,children:[" ",i(A,{className:"w-4 h-4"})," "]},m)}),i("button",{onClick:R,className:`h-8 flex items-center justify-center rounded-md transition-all ${e.isLassoFill?"bg-teal-500/20 text-teal-400 ring-1 ring-teal-500/40":"text-zinc-500 hover:bg-white/5 hover:text-zinc-300"}`,title:"Lasso Fill",children:i(q1,{className:"w-4 h-4"})}),i("button",{onClick:D,className:`h-8 flex items-center justify-center rounded-md transition-all ${e.isRectLassoFill?"bg-teal-500/20 text-teal-400 ring-1 ring-teal-500/40":"text-zinc-500 hover:bg-white/5 hover:text-zinc-300"}`,title:"Rect Lasso Fill",children:i(om,{className:"w-4 h-4"})}),i("button",{onClick:_,className:`h-8 flex items-center justify-center rounded-md transition-all ${e.isGradBlend?"bg-purple-500/20 text-purple-400 ring-1 ring-purple-500/40":"text-zinc-500 hover:bg-white/5 hover:text-zinc-300"}`,title:"Grad Blend Lasso",children:i(l1,{className:"w-4 h-4"})}),i("button",{onClick:$,className:`h-8 flex items-center justify-center rounded-md transition-all ${e.isStippleFill?"bg-amber-500/20 text-amber-400 ring-1 ring-amber-500/40":"text-zinc-500 hover:bg-white/5 hover:text-zinc-300"}`,title:"Stipple Fill",children:i(Sm,{className:"w-4 h-4"})}),i("button",{onClick:z,className:`h-8 flex items-center justify-center rounded-md transition-all ${e.isLassoMode?"bg-indigo-500/20 text-indigo-400 ring-1 ring-indigo-500/40":"text-zinc-500 hover:bg-white/5 hover:text-zinc-300"}`,title:"Lasso Mask",children:i(H1,{className:"w-4 h-4"})}),i("button",{onClick:T,className:`h-8 flex items-center justify-center rounded-md transition-all ${e.isTapeMode?"bg-blue-500/20 text-blue-400 ring-1 ring-blue-500/40":"text-zinc-500 hover:bg-white/5 hover:text-zinc-300"}`,title:"Tape Mask",children:i(Tm,{className:"w-4 h-4"})}),i("button",{onClick:Y,className:`h-8 flex items-center justify-center rounded-md transition-all ${e.isPatternLasso?"bg-emerald-500/20 text-emerald-400 ring-1 ring-emerald-500/40":"text-zinc-500 hover:bg-white/5 hover:text-zinc-300"}`,title:"Pattern Lasso Fill",children:i(cf,{className:"w-4 h-4"})}),i("button",{onClick:L,className:`h-8 flex items-center justify-center rounded-md transition-all ${e.isPatternLine?"bg-emerald-500/20 text-emerald-400 ring-1 ring-emerald-500/40":"text-zinc-500 hover:bg-white/5 hover:text-zinc-300"}`,title:"Pattern Line Stamp",children:i(km,{className:"w-4 h-4"})}),i("button",{onClick:V,className:`h-8 flex items-center justify-center rounded-md transition-all ${e.isGradientMode?"bg-orange-500/20 text-orange-400 ring-1 ring-orange-500/40":"text-zinc-500 hover:bg-white/5 hover:text-zinc-300"}`,title:"Sky Gradient",children:i($r,{className:"w-4 h-4"})})]}),e.isGradBlend&&b("div",{className:"mt-1 pt-1 border-t border-white/5 px-1 pb-1",children:[b("div",{className:"flex items-center justify-between text-[9px] font-bold uppercase text-zinc-400 tracking-wider",children:[i("span",{children:"Secondary Color"}),i("div",{className:"w-4 h-4 rounded-full shadow-inner ring-1 ring-white/10",style:{backgroundColor:e.gradColor2}})]}),i("input",{type:"color",value:e.gradColor2,onChange:m=>t({...e,gradColor2:m.target.value}),className:"w-full h-6 mt-1 bg-transparent cursor-pointer rounded overflow-hidden"})]}),b("div",{className:"mt-1 pt-1 border-t border-white/5 px-1 space-y-2 pb-1",children:[b("div",{className:"space-y-1",children:[b("div",{className:"flex justify-between text-[8px] text-zinc-400 font-bold uppercase tracking-wider",children:[i("span",{children:"Thermal Drift"}),b("span",{className:e.colorVariation>0?"text-orange-400":"text-zinc-600",children:[Math.round(e.colorVariation*100),"%"]})]}),i("input",{type:"range",min:"0",max:"1",step:"0.01",value:e.colorVariation,onChange:m=>t({...e,colorVariation:Number(m.target.value)}),className:"w-full h-1 bg-zinc-700/50 rounded-full appearance-none cursor-pointer accent-orange-500"})]}),b("div",{className:"space-y-1",children:[b("div",{className:"flex justify-between text-[8px] text-zinc-400 font-bold uppercase tracking-wider",children:[i("span",{children:"Hue Jitter"}),b("span",{className:e.hueVariation>0?"text-pink-400":"text-zinc-600",children:[Math.round(e.hueVariation*100),"%"]})]}),i("input",{type:"range",min:"0",max:"1",step:"0.01",value:e.hueVariation,onChange:m=>t({...e,hueVariation:Number(m.target.value)}),className:"w-full h-1 bg-zinc-700/50 rounded-full appearance-none cursor-pointer accent-pink-500"})]})]})]}),e.isGradientMode?i("div",{className:"flex-1 flex flex-col items-center p-2 animate-in fade-in zoom-in-95 overflow-hidden",children:b("div",{className:"flex-1 flex flex-col justify-center w-full",children:[b("div",{className:"mb-4 flex justify-center",children:[" ",i(oy,{value:e.gradientTime,onChange:m=>t({...e,gradientTime:m}),size:Math.min(xe.w-20,240)})," "]}),b("div",{className:"w-full px-2 space-y-3",children:[b("div",{children:[" ",b("div",{className:"flex justify-between items-end text-zinc-400 text-xs font-bold uppercase tracking-wider mb-1",children:[" ",b("span",{className:"flex items-center gap-1",children:[i($r,{size:12})," Clear"]})," ",b("span",{className:"flex items-center gap-1",children:["Hazy ",i(m1,{size:12})]})," "]})," ",b("div",{className:"relative h-5 w-full rounded-full ring-1 ring-white/10 overflow-hidden group",children:[" ",i("div",{className:"absolute inset-0 transition-colors duration-300",style:{background:"linear-gradient(to right, #38bdf8, #94a3b8)"}})," ",i("div",{className:"absolute inset-0 bg-white pointer-events-none transition-opacity duration-100",style:{opacity:e.gradientHumidity*.5}})," ",i("input",{type:"range",min:"0",max:"1",step:"0.01",value:e.gradientHumidity,onChange:m=>t({...e,gradientHumidity:Number(m.target.value)}),className:"absolute inset-0 w-full h-full opacity-0 cursor-ew-resize"})," ",i("div",{className:"absolute top-0 bottom-0 w-1 bg-white shadow-lg pointer-events-none transition-transform duration-75",style:{left:`${e.gradientHumidity*100}%`}})," "]})," "]}),b("div",{children:[" ",b("div",{className:"flex justify-between items-end text-zinc-400 text-xs font-bold uppercase tracking-wider mb-1",children:[" ",b("span",{className:"flex items-center gap-1",children:[i(rf,{size:12})," Glow"]})," ",b("span",{className:"text-[10px] text-orange-400",children:[Math.round(e.sunIntensity*100),"%"]})," "]})," ",b("div",{className:"relative h-5 w-full rounded-full ring-1 ring-white/10 overflow-hidden group",children:[" ",i("div",{className:"absolute inset-0 transition-colors duration-300",style:{background:"linear-gradient(to right, #444, #ea580c)"}})," ",i("input",{type:"range",min:"0",max:"1",step:"0.01",value:e.sunIntensity,onChange:m=>t({...e,sunIntensity:Number(m.target.value)}),className:"absolute inset-0 w-full h-full opacity-0 cursor-ew-resize"})," ",i("div",{className:"absolute top-0 bottom-0 w-1 bg-white shadow-lg pointer-events-none transition-transform duration-75",style:{left:`${e.sunIntensity*100}%`}})," "]})," "]})]})]})}):b(ql,{children:[b("div",{className:"flex p-1 bg-zinc-800/50 rounded-lg shrink-0 gap-1 no-drag border border-white/5",children:[i("button",{onClick:()=>w("hsv"),className:`flex-1 py-1 rounded-md flex items-center justify-center text-[10px] font-bold uppercase transition-all ${x==="hsv"?"bg-zinc-100 text-zinc-900 shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"HSV"}),i("button",{onClick:()=>w("rgb"),className:`flex-1 py-1 rounded-md flex items-center justify-center text-[10px] font-bold uppercase transition-all ${x==="rgb"?"bg-zinc-100 text-zinc-900 shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"RGB"}),i("button",{onClick:()=>w("box"),className:`flex-1 py-1 rounded-md flex items-center justify-center transition-all ${x==="box"?"bg-zinc-100 text-zinc-900 shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Box",children:i(bm,{className:"w-3.5 h-3.5"})}),i("div",{className:"w-px bg-white/10 my-0.5 mx-0.5"}),i("button",{onClick:s,className:`flex-1 py-1 rounded-md flex items-center justify-center transition-colors ${a?"bg-white text-black":"text-zinc-500 hover:text-zinc-200"}`,title:"Value Check",children:i(nf,{className:"w-3.5 h-3.5"})})]}),b("div",{className:"flex-1 flex flex-col gap-2 min-h-0 pt-1",children:[x==="hsv"&&b("div",{className:"flex flex-col gap-2 justify-center flex-1 min-h-0",children:[" ",U("h",d.h,360,"linear-gradient(to right, #f00, #ff0, #0f0, #0ff, #00f, #f0f, #f00)","H")," ",U("s",d.s*100,100,`linear-gradient(to right, #808080, ${Vl(d.h,1,d.v)})`,"S")," ",U("v",d.v*100,100,`linear-gradient(to right, #000, ${Vl(d.h,d.s,1)})`,"V")," ",i("div",{className:"min-h-[16px] flex-grow-[0.5] rounded-md mt-1 ring-1 ring-white/10",style:{backgroundColor:ne}})," "]}),x==="rgb"&&b("div",{className:"flex flex-col gap-2 justify-center flex-1 min-h-0",children:[" ",U("r",Z.r,255,"linear-gradient(to right, #000, #f00)","R")," ",U("g",Z.g,255,"linear-gradient(to right, #000, #0f0)","G")," ",U("b",Z.b,255,"linear-gradient(to right, #000, #00f)","B")," ",i("div",{className:"min-h-[16px] flex-grow-[0.5] rounded-md mt-1 ring-1 ring-white/10",style:{backgroundColor:ne}})," "]}),x==="box"&&b(ql,{children:[" ",b("div",{ref:ee,className:"flex-1 w-full rounded-lg relative overflow-hidden cursor-crosshair shadow-inner ring-1 ring-white/10",style:{backgroundColor:`hsl(${d.h}, 100%, 50%)`,touchAction:"none"},onPointerDown:m=>Ge(m,"sv"),onPointerMove:Jt,onPointerUp:Be,onPointerCancel:Be,children:[" ",i("div",{className:"absolute inset-0",style:{background:"linear-gradient(to right, #fff, transparent)"}})," ",i("div",{className:"absolute inset-0",style:{background:"linear-gradient(to top, #000, transparent)"}})," ",i("div",{className:"absolute w-3 h-3 rounded-full border-2 border-white shadow-sm -translate-x-1/2 -translate-y-1/2 pointer-events-none",style:{left:`${d.s*100}%`,top:`${(1-d.v)*100}%`,backgroundColor:e.color}})," "]})," ",b("div",{ref:ze,className:"w-full h-3 rounded-full relative cursor-pointer ring-1 ring-white/10 overflow-hidden shrink-0 mt-1",style:{background:"linear-gradient(to right, #f00, #ff0, #0f0, #0ff, #00f, #f0f, #f00)",touchAction:"none"},onPointerDown:m=>Ge(m,"hue"),onPointerMove:Jt,onPointerUp:Be,onPointerCancel:Be,children:[" ",i("div",{className:"absolute w-2 h-full bg-white shadow-sm -translate-x-1/2 top-0 pointer-events-none ring-1 ring-black/20",style:{left:`${d.h/360*100}%`}})," "]})," "]}),ye(),Se()]})]})]}),!c&&b("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize flex items-center justify-center text-zinc-600 hover:text-zinc-400 transition-colors z-50 touch-none",onPointerDown:Et,onPointerMove:It,onPointerUp:mn,onPointerCancel:mn,children:[" ",b("svg",{width:"8",height:"8",viewBox:"0 0 10 10",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:"pointer-events-none",children:[" ",i("path",{d:"M6 9L9 6"})," ",i("path",{d:"M2 9L9 2"})," "]})," "]})]})},Xl=[{name:"Classic",warm:["#a81c31","#e34234","#e67e22","#f1c40f","#8a3324"],cool:["#1c39bb","#007ba7","#007f5c","#ffffff","#1a1a1a"]},{name:"Zorn",warm:["#e34234","#d6a659","#e97451","#6b4423","#4a3c31"],cool:["#1a1a1a","#ffffff","#708090","#8c959d","#536878"]},{name:"Studio",warm:["#e32636","#e34234","#e97451","#d68a59","#8a3324","#fada5e","#fff44f"],cool:["#0047ab","#007ba7","#5e8c31","#ffcc99","#ffffff","#000000"]},{name:"Vivid",warm:["#ff0055","#ff5500","#ffaa00","#ffff00","#aa00ff"],cool:["#0044ff","#00ccff","#00ffaa","#ffffff","#000000"]},{name:"Portrait",warm:["#ffcccc","#ffdfc1","#e0ac69","#8d5524","#593c1f"],cool:["#708090","#5f9ea0","#4682b4","#f0f8ff","#2f4f4f"]},{name:"Pastel",warm:["#ffb7b2","#ffdac1","#fffac8","#e2f0cb","#c7ceea"],cool:["#b5ead7","#9fd3c7","#385170","#ffffff","#5c5c5c"]},{name:"Botanic",warm:["#d63447","#f57b51","#f6c90e","#588c7e","#3e4444"],cool:["#283655","#4d648d","#d0e1f9","#ffffff","#0a0a0a"]}],Au=({color:e,size:t,onClick:n})=>i("button",{onClick:n,className:"group transition-transform hover:scale-105 active:scale-95 focus:outline-none flex-shrink-0 rounded-sm shadow-sm ring-1 ring-white/10 hover:ring-white/30","aria-label":`Select color ${e}`,onPointerDown:r=>r.stopPropagation(),style:{width:t,height:t,backgroundColor:e}}),ay=({settings:e,onChange:t,visible:n,onClose:r,isMobile:o})=>{const[l,a]=g.useState({x:20,y:300}),[s,c]=g.useState({w:170,h:130}),[d,v]=g.useState(0),[x,w]=g.useState(!1),E=g.useRef(null),S=g.useRef(!1),P=Xl[d];g.useEffect(()=>{const te=window.innerHeight-300;a({x:20,y:te}),w(!0)},[]),g.useEffect(()=>{const te=()=>{a(B=>{const q=window.innerWidth-50,X=window.innerHeight-50;let oe=B.x,ee=B.y;return oe>q&&(oe=q),ee>X&&(ee=X),oe<0&&(oe=20),ee<0&&(ee=20),{x:oe,y:ee}})};return window.addEventListener("resize",te),()=>window.removeEventListener("resize",te)},[]);const I=te=>{o||te.target instanceof SVGElement||te.target.tagName==="BUTTON"||te.target.closest(".no-drag")||(te.preventDefault(),te.stopPropagation(),te.currentTarget.setPointerCapture(te.pointerId),E.current={x:te.clientX-l.x,y:te.clientY-l.y})},f=te=>{if(E.current&&!o){te.preventDefault(),te.stopPropagation();let B=te.clientX-E.current.x,q=te.clientY-E.current.y;const X=window.innerWidth-50,oe=window.innerHeight-50;B=Math.max(0,Math.min(B,X)),q=Math.max(0,Math.min(q,oe)),a({x:B,y:q})}},h=te=>{te.preventDefault(),E.current=null,te.currentTarget.releasePointerCapture(te.pointerId)},u=te=>{o||(te.preventDefault(),te.stopPropagation(),te.currentTarget.setPointerCapture(te.pointerId),S.current=!0)},y=te=>{if(S.current&&!o){te.preventDefault(),te.stopPropagation();const B=window.innerWidth-l.x,q=window.innerHeight-l.y,X=Math.min(Math.max(140,te.clientX-l.x),B),oe=Math.min(Math.max(100,te.clientY-l.y),q);c({w:X,h:oe})}},N=te=>{S.current&&(te.preventDefault(),te.stopPropagation(),S.current=!1,te.currentTarget.releasePointerCapture(te.pointerId))},H=()=>v(te=>(te+1)%Xl.length),F=()=>v(te=>(te-1+Xl.length)%Xl.length),K=32,ve=16,le=s.w*Math.max(0,s.h-K-ve),Ye=Math.sqrt(le/13)*.85,pe=Math.max(24,Math.min(64,Ye));if(!x||!n)return null;const ot=o?{left:0,bottom:"72px",width:"100%",height:"auto",maxHeight:"40vh",borderBottomLeftRadius:0,borderBottomRightRadius:0}:{left:l.x,top:l.y,width:s.w,height:s.h};return b("div",{className:`fixed bg-zinc-900/95 backdrop-blur-xl border border-white/10 rounded-xl shadow-2xl flex flex-col text-zinc-200 select-none z-50 ring-1 ring-black/50 overflow-hidden ${o?"animate-in slide-in-from-bottom-10":""}`,style:{...ot,touchAction:"none"},children:[b("div",{className:"flex items-center justify-between p-1.5 border-b border-white/5 cursor-move group touch-none shrink-0 bg-white/5",onPointerDown:I,onPointerMove:f,onPointerUp:h,onPointerCancel:h,children:[b("div",{className:"flex items-center gap-0.5 no-drag bg-black/20 rounded p-0.5",children:[i("button",{onClick:F,className:"p-0.5 hover:text-white text-zinc-500 transition-colors",onPointerDown:te=>te.stopPropagation(),children:i(tf,{className:"w-3 h-3"})}),i("span",{className:"text-[9px] font-bold uppercase w-16 text-center text-zinc-300 select-none tracking-wide truncate",children:P.name}),i("button",{onClick:H,className:"p-0.5 hover:text-white text-zinc-500 transition-colors",onPointerDown:te=>te.stopPropagation(),children:i(c1,{className:"w-3 h-3"})})]}),b("div",{className:"flex items-center gap-1",children:[!o&&i("div",{className:"text-zinc-600 group-hover:text-zinc-500 transition-colors",children:i(of,{className:"w-3.5 h-3.5"})}),i("button",{onClick:r,className:"text-zinc-500 hover:text-white p-0.5 no-drag",onPointerDown:te=>te.stopPropagation(),children:i(Ra,{className:"w-3.5 h-3.5"})})]})]}),b("div",{className:"p-2 space-y-2 overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-700 flex-1 min-h-0",children:[i("div",{className:"flex flex-wrap gap-1.5 justify-center content-start",children:P.warm.map((te,B)=>i(Au,{color:te,size:pe,onClick:()=>t({...e,color:te})},`warm-${B}`))}),i("div",{className:"w-full h-px bg-white/5 mx-auto w-[90%]"}),i("div",{className:"flex flex-wrap gap-1.5 justify-center content-start",children:P.cool.map((te,B)=>i(Au,{color:te,size:pe,onClick:()=>t({...e,color:te})},`cool-${B}`))})]}),!o&&i("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize flex items-center justify-center text-zinc-600 hover:text-white transition-colors z-50 touch-none",onPointerDown:u,onPointerMove:y,onPointerUp:N,onPointerCancel:N,children:b("svg",{width:"8",height:"8",viewBox:"0 0 10 10",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:"pointer-events-none",children:[i("path",{d:"M6 9L9 6"}),i("path",{d:"M2 9L9 2"})]})})]})},Yl=[{id:"source-over",label:"Normal",short:"N"},{id:"multiply",label:"Multiply",short:"M"},{id:"screen",label:"Screen",short:"S"},{id:"color-dodge",label:"Color Dodge",short:"CD"},{id:"overlay",label:"Overlay",short:"O"},{id:"lighten",label:"Lighten",short:"L"},{id:"darken",label:"Darken",short:"D"}],iy=({settings:e,onChange:t,onClear:n,onDownload:r,onUndo:o,onRedo:l,visible:a,onClose:s,isMobile:c,layers:d,activeLayerId:v,onSetActiveLayer:x,onAddLayer:w,onRemoveLayer:E,onToggleLayerVisibility:S,onToggleLayerGlow:P,onCapturePattern:I})=>{const[f,h]=g.useState({x:16,y:100}),[u,y]=g.useState("brush"),N=g.useRef(null),H=g.useRef(null),F=g.useRef(null);g.useEffect(()=>{const q=Math.max(60,(window.innerHeight-350)/2);h({x:16,y:q})},[]),g.useEffect(()=>{if(u!=="pattern"||!F.current)return;const B=F.current,q=B.getContext("2d");if(!q)return;if(q.fillStyle="#18181b",q.fillRect(0,0,B.width,B.height),!e.patternTexture){q.fillStyle="#27272a",q.fillRect(0,0,B.width,B.height),q.font="9px monospace",q.textAlign="center",q.textBaseline="middle",q.fillStyle="#52525b",q.fillText("NO PATTERN",B.width/2,B.height/2);return}const X=new Image;X.src=e.patternTexture,X.onload=()=>{const oe=Math.max(15,50*e.patternScale),ee=oe,ze=oe,Fe=e.patternJitterScale||0,$t=e.patternJitterRotation||0,zt=e.patternJitterHue||0,ut=e.patternJitterSaturation||0,Et=e.patternJitterValue||0,It=B.width,mn=B.height,Pt=It%ee/2-ee,me=mn%ze/2-ze;q.save();for(let je=me;je<mn+ze;je+=ze)for(let Ee=Pt;Ee<It+ee;Ee+=ee){const tt=Math.sin(Ee*12.9898+je*78.233)*43758.5453,Ge=tt-Math.floor(tt),Jt=tt*1.5-Math.floor(tt*1.5),Be=tt*2-Math.floor(tt*2),yn=tt*13.37%1,jt=tt*42.42%1;let gn=e.patternStampRotation;if($t>0){const M=(Ge-.5)*2*($t*180);gn=(gn+M)%360}const bn=(gn+e.patternAngle)*Math.PI/180;let Ln=e.patternScale;if(Fe>0){const M=1+(Jt-.5)*2*Fe;Ln*=Math.max(.1,M)}let kt="";if(zt>0){const M=(Be-.5)*360*zt;kt+=`hue-rotate(${M}deg) `}if(ut>0){const M=100+(Math.abs(yn)-.5)*200*ut;kt+=`saturate(${Math.max(0,M)}%) `}if(Et>0){const M=100+(Math.abs(jt)-.5)*200*Et;kt+=`brightness(${Math.max(0,M)}%) `}const Yn=50/X.width*Ln,p=X.width*Yn,k=X.height*Yn;q.save(),q.translate(Ee+ee/2,je+ze/2),q.rotate(bn),kt&&(q.filter=kt.trim()),q.drawImage(X,-p/2,-k/2,p,k),q.restore()}q.restore()}},[e.patternTexture,e.patternScale,e.patternAngle,e.patternStampRotation,e.patternJitterRotation,e.patternJitterScale,e.patternJitterHue,e.patternJitterSaturation,e.patternJitterValue,u]);const K=B=>{if(!(B.target instanceof SVGElement||B.target.tagName==="BUTTON"||B.target.tagName==="INPUT"||B.target.tagName==="SELECT"||B.target.closest(".no-drag"))&&(B.preventDefault(),B.stopPropagation(),B.currentTarget.setPointerCapture(B.pointerId),H.current)){const q=H.current.getBoundingClientRect();N.current={x:B.clientX-q.left,y:B.clientY-q.top}}},ve=B=>{if(N.current&&H.current){B.preventDefault(),B.stopPropagation();let q=B.clientX-N.current.x,X=B.clientY-N.current.y;const oe=H.current.getBoundingClientRect(),ee=window.innerWidth-oe.width,ze=window.innerHeight-oe.height;q=Math.max(0,Math.min(q,ee)),X=Math.max(0,Math.min(X,ze)),H.current.style.left=`${q}px`,H.current.style.top=`${X}px`}},le=B=>{if(N.current&&H.current){const q=H.current.getBoundingClientRect();h({x:q.left,y:q.top})}B.preventDefault(),N.current=null,B.currentTarget.releasePointerCapture(B.pointerId)};if(!a)return null;Yl.find(B=>B.id===e.blendMode)||Yl[0];const xe=d?[...d].reverse():[],Ye={width:u==="brush"?"200px":"240px",borderRadius:"24px"},pe=()=>{var B;return b("div",{className:"flex flex-col items-center gap-4 w-full px-2 py-2 animate-in fade-in zoom-in-95 duration-200",children:[b("div",{className:"flex flex-col gap-2 w-full group relative",title:"Brush Size",children:[b("div",{className:"flex justify-between text-[10px] font-bold text-zinc-400 uppercase tracking-wider",children:[i("span",{children:"Size"}),b("span",{className:"text-amber-500",children:[Math.round(e.size),"px"]})]}),i("input",{type:"range",min:"1",max:"200",value:e.size,onChange:q=>t({...e,size:Number(q.target.value)}),className:"w-full h-1 bg-zinc-700/50 rounded-full appearance-none cursor-pointer accent-amber-500"})]}),b("div",{className:"flex flex-col gap-2 w-full group relative",title:"Brush Flow",children:[b("div",{className:"flex justify-between text-[10px] font-bold text-zinc-400 uppercase tracking-wider",children:[i("span",{children:"Flow"}),b("span",{className:"text-blue-500",children:[Math.round(e.opacity*100),"%"]})]}),i("input",{type:"range",min:"1",max:"100",value:e.opacity*100,onChange:q=>t({...e,opacity:Number(q.target.value)/100}),className:"w-full h-1 bg-zinc-700/50 rounded-full appearance-none cursor-pointer accent-blue-500"})]}),i("div",{className:"w-full h-px bg-white/10 shrink-0"}),b("div",{className:"w-full flex items-center justify-between",children:[i("span",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-wider",children:"Blend"}),b("div",{className:"relative w-24 h-6 bg-zinc-800 hover:bg-zinc-700 rounded-md flex items-center justify-center group transition-colors border border-transparent hover:border-white/10",title:"Blend Mode",children:[i("span",{className:"text-[10px] font-bold text-zinc-300 uppercase truncate px-2",children:((B=Yl.find(q=>q.id===e.blendMode))==null?void 0:B.label)||"Normal"}),i("select",{value:e.blendMode,onChange:q=>t({...e,blendMode:q.target.value}),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer text-xs",children:Yl.map(q=>i("option",{value:q.id,children:q.label},q.id))})]})]})]})},ot=()=>b("div",{className:"flex flex-col w-full h-64 animate-in fade-in slide-in-from-left-4 duration-200",children:[b("div",{className:"flex items-center justify-between mb-2 px-1",children:[i("span",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest",children:"Layers"}),i("button",{onClick:w,className:"p-1 hover:bg-white/10 rounded text-zinc-400 hover:text-white transition-colors",title:"New Layer",children:i(em,{className:"w-3.5 h-3.5"})})]}),i("div",{className:"flex-1 overflow-y-auto space-y-1 scrollbar-thin scrollbar-thumb-zinc-700 pr-1",children:xe.map(B=>b("div",{onClick:()=>x==null?void 0:x(B.id),className:`group flex items-center gap-2 p-2 rounded-lg border border-transparent cursor-pointer transition-all duration-200 ${B.id===v?"bg-indigo-500/20 border-indigo-500/30":"hover:bg-white/5 hover:border-white/5"}`,children:[i("button",{onClick:q=>{q.stopPropagation(),S==null||S(B.id)},className:`p-0.5 rounded hover:bg-white/10 transition-colors ${B.visible?"text-zinc-400":"text-zinc-600"}`,children:B.visible?i(nf,{className:"w-3 h-3"}):i(E1,{className:"w-3 h-3"})}),i("div",{className:"flex-1 min-w-0",children:i("span",{className:`text-[10px] font-semibold truncate block ${B.id===v?"text-indigo-200":"text-zinc-400"}`,children:B.name})}),i("button",{onClick:q=>{q.stopPropagation(),P==null||P(B.id)},className:`p-1 rounded transition-colors ${B.ignoreGlow?"text-orange-400":"text-zinc-700 hover:text-zinc-400"}`,title:"Toggle Light Interaction",children:i($r,{className:"w-3 h-3"})}),xe.length>1&&i("button",{onClick:q=>{q.stopPropagation(),E==null||E(B.id)},className:"p-1 text-zinc-700 hover:text-red-400 transition-colors opacity-0 group-hover:opacity-100",children:i(Ru,{className:"w-3 h-3"})})]},B.id))})]}),te=()=>b("div",{className:"flex flex-col w-full h-80 animate-in fade-in slide-in-from-left-4 duration-200 space-y-3 overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-700 pr-1",children:[b("div",{className:"space-y-2 shrink-0",children:[b("div",{className:"flex justify-between items-end text-[9px] text-zinc-500 font-bold uppercase tracking-wider",children:[i("span",{children:"Seamless Preview"}),i("span",{className:e.patternTexture?"text-emerald-400":"text-zinc-600",children:e.patternTexture?"Active":"Empty"})]}),b("div",{className:"w-full aspect-video rounded-lg ring-1 ring-white/10 overflow-hidden bg-black/40 shadow-inner relative group shrink-0",children:[i("canvas",{ref:F,width:200,height:110,className:"w-full h-full object-cover opacity-80"}),e.patternTexture&&i("button",{onClick:()=>t({...e,patternTexture:null}),className:"absolute top-2 right-2 p-1.5 bg-red-500/20 text-red-400 rounded-md opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 hover:text-white",title:"Delete Pattern",children:i(Ru,{className:"w-3 h-3"})})]}),b("button",{onClick:I,className:"w-full py-1.5 bg-emerald-500/10 hover:bg-emerald-500/20 text-emerald-400 border border-emerald-500/20 hover:border-emerald-500/40 rounded-lg flex items-center justify-center gap-2 transition-all active:scale-95 shrink-0",children:[i(hm,{className:"w-3.5 h-3.5"}),i("span",{className:"text-[9px] font-bold uppercase tracking-widest",children:"Capture"})]})]}),i("div",{className:"w-full h-px bg-white/10 shrink-0"}),i("div",{className:"space-y-3 shrink-0",children:[{label:"Scale",icon:X1,val:e.patternScale,min:.1,max:3,step:.1,key:"patternScale",format:B=>B.toFixed(1)+"x"},{label:"Grid Angle",icon:fm,val:e.patternAngle,min:0,max:360,step:1,key:"patternAngle",format:B=>Math.round(B)+""},{label:"Stamp Rot",icon:sm,val:e.patternStampRotation,min:0,max:360,step:1,key:"patternStampRotation",format:B=>Math.round(B)+""}].map(B=>b("div",{className:"space-y-1",children:[b("div",{className:"flex justify-between items-center text-[9px] text-zinc-400 font-bold uppercase tracking-wider",children:[b("span",{className:"flex items-center gap-1",children:[i(B.icon,{className:"w-3 h-3"})," ",B.label]}),i("span",{className:"text-emerald-400",children:B.format(B.val)})]}),i("input",{type:"range",min:B.min,max:B.max,step:B.step,value:B.val,onChange:q=>t({...e,[B.key]:Number(q.target.value)}),className:"w-full h-1 bg-zinc-700/50 rounded-full appearance-none cursor-pointer accent-emerald-500"})]},B.key))}),i("div",{className:"w-full h-px bg-white/10 shrink-0"}),b("div",{className:"space-y-3 shrink-0",children:[b("div",{className:"flex items-center gap-2 text-[9px] font-bold uppercase text-zinc-500 tracking-widest mb-1",children:[i(gm,{className:"w-3 h-3"})," ",i("span",{children:"Chaos Engine"})]}),[{label:"Scale Jitter",key:"patternJitterScale",val:e.patternJitterScale},{label:"Rot Jitter",key:"patternJitterRotation",val:e.patternJitterRotation},{label:"Hue Shift",key:"patternJitterHue",val:e.patternJitterHue}].map(B=>b("div",{className:"space-y-1",children:[b("div",{className:"flex justify-between items-center text-[9px] text-zinc-400 font-bold uppercase tracking-wider",children:[i("span",{children:B.label}),b("span",{className:"text-emerald-400",children:[Math.round(B.val*100),"%"]})]}),i("input",{type:"range",min:"0",max:"1",step:"0.01",value:B.val,onChange:q=>t({...e,[B.key]:Number(q.target.value)}),className:"w-full h-1 bg-zinc-700/50 rounded-full appearance-none cursor-pointer accent-emerald-500"})]},B.key))]})]});return b("div",{ref:H,className:"fixed z-40 flex flex-col bg-zinc-900/60 backdrop-blur-md border border-white/10 shadow-2xl transition-[width,height,border-radius] duration-300 ease-spring ring-1 ring-black/50 overflow-hidden",style:{left:f.x,top:f.y,touchAction:"none",...Ye,maxHeight:"80vh"},children:[b("div",{className:"flex items-center justify-between p-1 border-b border-white/10 bg-white/5 shrink-0 no-drag",children:[b("div",{className:"flex gap-1 w-full",onPointerDown:K,onPointerMove:ve,onPointerUp:le,onPointerCancel:le,children:[i("button",{onClick:()=>y("brush"),className:`flex-1 p-1.5 rounded-lg flex justify-center transition-colors ${u==="brush"?"bg-zinc-700 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Brush Tools",children:i(Co,{className:"w-3.5 h-3.5"})}),i("button",{onClick:()=>y("layers"),className:`flex-1 p-1.5 rounded-lg flex justify-center transition-colors ${u==="layers"?"bg-indigo-500/20 text-indigo-200 shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Layers",children:i(V1,{className:"w-3.5 h-3.5"})}),i("button",{onClick:()=>y("pattern"),className:`flex-1 p-1.5 rounded-lg flex justify-center transition-colors ${u==="pattern"?"bg-emerald-500/20 text-emerald-200 shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Pattern",children:i(cf,{className:"w-3.5 h-3.5"})})]}),u!=="brush"&&i("div",{className:"pl-1 cursor-move text-zinc-600 hover:text-white",onPointerDown:K,onPointerMove:ve,onPointerUp:le,onPointerCancel:le,children:i(lf,{className:"w-3.5 h-3.5"})})]}),b("div",{className:"flex-1 flex flex-col p-2 min-h-0",children:[u==="brush"&&pe(),u==="layers"&&ot(),u==="pattern"&&te()]}),i("div",{className:"w-full h-px bg-white/10 shrink-0"}),b("div",{className:"flex justify-between items-center p-2 no-drag shrink-0 gap-1 bg-white/[0.02]",children:[i("button",{onClick:o,className:"p-1.5 rounded-lg text-zinc-400 hover:text-white hover:bg-zinc-700 transition-all",title:"Undo",children:i(Om,{className:"w-3.5 h-3.5"})}),i("button",{onClick:l,className:"p-1.5 rounded-lg text-zinc-400 hover:text-white hover:bg-zinc-700 transition-all",title:"Redo",children:i(am,{className:"w-3.5 h-3.5"})}),i("button",{onClick:r,className:"p-1.5 rounded-lg text-zinc-400 hover:text-white hover:bg-zinc-700 transition-all",title:"Save",children:i(w1,{className:"w-3.5 h-3.5"})}),i("button",{onClick:n,className:"p-1.5 rounded-lg text-red-400 hover:bg-red-900/30 transition-all",title:"Clear",children:i(um,{className:"w-3.5 h-3.5"})})]})]})},Wl=({icon:e,active:t,onClick:n,label:r})=>b("button",{onClick:n,className:`flex flex-col items-center gap-1 p-2 rounded-xl transition-all active:scale-95 min-w-[60px] ${t?"bg-white/10 text-white shadow-sm ring-1 ring-white/10":"text-zinc-500 hover:text-zinc-200 hover:bg-white/5"}`,title:r,children:[i(e,{className:`w-5 h-5 ${t?"stroke-2":"stroke-[1.5]"}`}),i("span",{className:"text-[9px] font-bold uppercase tracking-wider",children:r})]}),sy=()=>{const[e,t]=g.useState({brushType:"flat",size:60,opacity:.9,color:"#caa24f",wetMode:!1,blendMode:"source-over",pressureSensitivity:!0,useTexture:!0,isEraser:!1,colorVariation:.1,hueVariation:.05,isTapeMode:!1,tapeWidth:30,isLassoMode:!1,isLassoFill:!1,isRectLassoFill:!1,isStippleFill:!1,lassoMode:"add",isGradientMode:!1,isGradBlend:!1,gradColor2:"#000000",isPatternLasso:!1,isPatternLine:!1,patternTexture:null,patternScale:1,patternAngle:0,patternStampRotation:0,patternJitterScale:0,patternJitterRotation:0,patternJitterHue:0,patternJitterSaturation:0,patternJitterValue:0,gradientTime:.3,gradientHumidity:.1,sunIntensity:.5,sunDiffusion:.6,skyEnabled:!1,sunEnabled:!0,skyTime:.2,sunElevation:.2,skyHorizon:.6,sunAzimuth:.5,skyScale:1,atmosphereDensity:.5,waterEnabled:!1,waterLayerReflections:!0,waterOpacity:.85,waterTurbulenceX:.3,waterTurbulenceY:.4,waterFractal:.5,lensFlareEnabled:!1,lensFlareIntensity:.6,lensFlareScale:1,lensFlareHandleEnabled:!0,flareTipPos:null,filmEnabled:!0,filmDensity:0,filmHalation:0,filmBloom:0,filmGrain:0,filmStock:"Standard",autoClean:!0,pictorialismEnabled:!1,pictorialismNoise:.5,pictorialismSoftness:.5,risoEnabled:!1,risoGrainScale:1,risoColor1:"#1a1a2e",risoColor2:"#f0f0e0",chromaticAberrationEnabled:!1,chromaticAberrationIntensity:.5}),[n,r]=g.useState(0),[o,l]=g.useState(0),[a,s]=g.useState(0),[c,d]=g.useState(0),[v,x]=g.useState(0),[w,E]=g.useState(.5),[S,P]=g.useState(.2),[I,f]=g.useState(null),[h,u]=g.useState(.85),[y,N]=g.useState({x:0,y:0}),[H,F]=g.useState(!1),[K,ve]=g.useState(!1),[le,xe]=g.useState(!0),[Ye,pe]=g.useState(!0),[ot,te]=g.useState(!0),[B,q]=g.useState(!0),[X,oe]=g.useState(!1),[ee,ze]=g.useState(null),Fe=g.useRef(null),$t=g.useRef(null),zt=g.useRef(h);g.useEffect(()=>{zt.current=h},[h]),g.useEffect(()=>{const me=()=>{const je=window.innerWidth<1024||"ontouchstart"in window;oe(je),je?(xe(!1),te(!1),q(!1)):(xe(!0),q(!0),pe(!0),te(!0))};return me(),window.addEventListener("resize",me),()=>window.removeEventListener("resize",me)},[]);const ut=g.useCallback((me,je)=>{N(Ee=>({x:Ee.x+me,y:Ee.y+je}))},[]);g.useEffect(()=>{const me=$t.current;if(!me)return;const je=Ee=>{if(Ee.target.closest(".overflow-y-auto"))return;Ee.preventDefault();const tt=-Ee.deltaY,Ge=Ee.ctrlKey?.01:.0015;u(Jt=>Math.min(Math.max(.1,Jt+tt*Ge),4))};return me.addEventListener("wheel",je,{passive:!1}),()=>me.removeEventListener("wheel",je)},[]),g.useEffect(()=>{const me=$t.current;if(!me)return;let je=0,Ee=0,tt={x:0,y:0};const Ge=Be=>{Be.touches.length===2?(Be.preventDefault(),je=Math.hypot(Be.touches[0].clientX-Be.touches[1].clientX,Be.touches[0].clientY-Be.touches[1].clientY),Ee=zt.current):Be.touches.length===1&&K&&(tt={x:Be.touches[0].clientX,y:Be.touches[0].clientY})},Jt=Be=>{if(Be.touches.length===2){Be.preventDefault();const yn=Math.hypot(Be.touches[0].clientX-Be.touches[1].clientX,Be.touches[0].clientY-Be.touches[1].clientY);if(je>0){const jt=yn/je;u(Math.min(Math.max(.1,Ee*jt),4))}}else if(Be.touches.length===1&&K){Be.preventDefault();const yn=Be.touches[0].clientX-tt.x,jt=Be.touches[0].clientY-tt.y;N(gn=>({x:gn.x+yn,y:gn.y+jt})),tt={x:Be.touches[0].clientX,y:Be.touches[0].clientY}}};return me.addEventListener("touchstart",Ge,{passive:!1}),me.addEventListener("touchmove",Jt,{passive:!1}),()=>{me.removeEventListener("touchstart",Ge),me.removeEventListener("touchmove",Jt)}},[K]),g.useEffect(()=>{const me=Ee=>{if(Ee.target instanceof HTMLInputElement||Ee.target instanceof HTMLTextAreaElement||Ee.target instanceof HTMLSelectElement)return;if(Ee.code==="Space"){ve(!0);return}const tt=Ee.ctrlKey||Ee.metaKey;if(tt&&Ee.key.toLowerCase()==="z"){Ee.preventDefault(),Ee.shiftKey?x(Ge=>Ge+1):d(Ge=>Ge+1);return}if(tt&&Ee.key.toLowerCase()==="y"){Ee.preventDefault(),x(Ge=>Ge+1);return}if(tt&&Ee.key.toLowerCase()==="s"){Ee.preventDefault(),Fe.current&&Fe.current.downloadImage();return}if(!tt&&!Ee.altKey&&!Ee.shiftKey)switch(Ee.key.toLowerCase()){case"w":t(Ge=>({...Ge,wetMode:!Ge.wetMode}));break;case"e":t(Ge=>({...Ge,isEraser:!Ge.isEraser}));break;case"[":t(Ge=>({...Ge,size:Math.max(1,Ge.size-5)}));break;case"]":t(Ge=>({...Ge,size:Math.min(200,Ge.size+5)}));break}},je=Ee=>{Ee.code==="Space"&&ve(!1)};return window.addEventListener("keydown",me),window.addEventListener("keyup",je),()=>{window.removeEventListener("keydown",me),window.removeEventListener("keyup",je)}},[]);const Et=me=>{Fe.current&&Fe.current.downloadImage({width:me?3840:void 0,height:me?2160:void 0})},It=()=>{if(Fe.current){const me=Fe.current.capturePattern();me&&t(je=>({...je,patternTexture:me}))}},mn=me=>{if(me.target.files&&me.target.files[0]){const je=URL.createObjectURL(me.target.files[0]);f(je),t(Ee=>({...Ee,useTexture:!0,skyEnabled:!1}))}},Pt=me=>{xe(me==="controls"?!le:!1),pe(me==="picker"?!Ye:!1),te(me==="palette"?!ot:!1),q(me==="toolbar"?!B:!1)};return b("div",{ref:$t,className:"relative w-full h-full bg-zinc-950 overflow-hidden overscroll-none touch-none",children:[i(hf,{ref:Fe,settings:e,onChange:t,canvasColor:"#f0f0f0",triggerClear:n,triggerClearTape:o,triggerInvertMask:a,triggerUndo:c,triggerRedo:v,onPickColor:me=>t(je=>({...je,color:me})),zoom:h,pan:y,onPan:ut,isSpacePressed:K,customTextureUrl:I,grayscaleMode:H,onLayerMethodsReady:ze,washTemp:w,washIntensity:S,width:1080,height:1080,isMobile:X}),!X&&b("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 flex items-center gap-2 p-2 bg-zinc-900/80 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl z-50",children:[i(Wl,{icon:Co,active:Ye,onClick:()=>pe(!Ye),label:"Brush"}),i(Wl,{icon:_u,active:B,onClick:()=>q(!B),label:"Tools"}),i(Wl,{icon:Tu,active:ot,onClick:()=>te(!ot),label:"Colors"}),i(Wl,{icon:ks,active:le,onClick:()=>xe(!le),label:"Settings"})]}),X&&b("div",{className:"fixed bottom-0 left-0 w-full h-[72px] bg-zinc-950/80 backdrop-blur-2xl border-t border-white/5 z-[60] flex items-center justify-between px-6 pb-safe safe-area-bottom shadow-[0_-10px_40px_rgba(0,0,0,0.5)]",children:[b("button",{onClick:()=>Pt("picker"),className:`flex flex-col items-center gap-1 p-2 rounded-xl transition-all active:scale-95 ${Ye?"text-indigo-400":"text-zinc-500"}`,children:[i(Co,{className:`w-6 h-6 ${Ye?"stroke-2":"stroke-[1.5]"}`}),i("span",{className:"text-[9px] font-bold uppercase tracking-wider",children:"Brush"})]}),b("button",{onClick:()=>Pt("toolbar"),className:`flex flex-col items-center gap-1 p-2 rounded-xl transition-all active:scale-95 ${B?"text-indigo-400":"text-zinc-500"}`,children:[i(_u,{className:`w-6 h-6 ${B?"stroke-2":"stroke-[1.5]"}`}),i("span",{className:"text-[9px] font-bold uppercase tracking-wider",children:"Tools"})]}),b("button",{onClick:()=>Pt("palette"),className:`flex flex-col items-center gap-1 p-2 rounded-xl transition-all active:scale-95 ${ot?"text-indigo-400":"text-zinc-500"}`,children:[i(Tu,{className:`w-6 h-6 ${ot?"stroke-2":"stroke-[1.5]"}`}),i("span",{className:"text-[9px] font-bold uppercase tracking-wider",children:"Color"})]}),b("button",{onClick:()=>Pt("controls"),className:`flex flex-col items-center gap-1 p-2 rounded-xl transition-all active:scale-95 ${le?"text-indigo-400":"text-zinc-500"}`,children:[i(ks,{className:`w-6 h-6 ${le?"stroke-2":"stroke-[1.5]"}`}),i("span",{className:"text-[9px] font-bold uppercase tracking-wider",children:"Settings"})]})]}),i(Ym,{settings:e,onChange:t,washTemp:w,onWashChange:E,washIntensity:S,onWashIntensityChange:P,onUploadTexture:mn,isOpen:le,onClose:()=>xe(!1),isMobile:X,onExport:Et}),i(ly,{settings:e,onChange:t,onClearMasks:()=>l(me=>me+1),onInvertMask:()=>s(me=>me+1),visible:Ye,onClose:()=>pe(!1),grayscaleMode:H,onToggleGrayscale:()=>F(!H),isMobile:X}),i(ay,{settings:e,onChange:t,visible:ot,onClose:()=>te(!1),isMobile:X}),i(iy,{settings:e,onChange:t,onClear:()=>r(me=>me+1),onDownload:()=>Et(!1),onUndo:()=>d(me=>me+1),onRedo:()=>x(me=>me+1),visible:B,onClose:()=>q(!1),isMobile:X,layers:ee==null?void 0:ee.layers,activeLayerId:ee==null?void 0:ee.activeLayerId,onSetActiveLayer:ee==null?void 0:ee.setActiveLayerId,onAddLayer:ee==null?void 0:ee.addLayer,onRemoveLayer:ee==null?void 0:ee.removeLayer,onToggleLayerVisibility:ee==null?void 0:ee.toggleLayerVisibility,onToggleLayerGlow:ee==null?void 0:ee.toggleLayerGlow,onCapturePattern:It})]})},cy=()=>{const[e,t]=g.useState([]);return g.useEffect(()=>{const n=setInterval(()=>{t(r=>{const o=r.map(l=>({...l,y:l.y-l.speed})).filter(l=>l.y>-20);return Math.random()>.7&&o.push({id:Date.now(),x:Math.random()*100,y:110,size:4+Math.random()*12,speed:.5+Math.random()*1.5}),o})},50);return()=>clearInterval(n)},[]),b("div",{className:"w-full h-full bg-zinc-950 text-indigo-100 font-sans flex flex-col items-center justify-center relative overflow-hidden select-none",children:[i("div",{className:"absolute inset-0 opacity-30 bg-[radial-gradient(circle_at_center,_#312e81_0%,_transparent_70%)]"}),b("div",{className:"relative z-10 flex flex-col items-center gap-10",children:[b("div",{className:"relative group cursor-pointer",children:[i("div",{className:"absolute inset-0 bg-indigo-500 blur-[80px] opacity-20 group-hover:opacity-40 transition-opacity duration-500"}),b("div",{className:"relative w-48 h-48 rounded-full border border-white/10 flex items-center justify-center bg-zinc-900/50 backdrop-blur-md shadow-2xl shadow-indigo-500/20",children:[i(ef,{className:"w-20 h-20 text-indigo-300 drop-shadow-[0_0_15px_rgba(165,180,252,0.5)]",strokeWidth:1.5}),i("div",{className:"absolute inset-0 overflow-hidden rounded-full mask-image-b",children:e.map(n=>i("div",{className:"absolute rounded-full bg-indigo-400/30 blur-[1px] border border-white/10",style:{left:`${n.x}%`,top:`${n.y}%`,width:n.size,height:n.size}},n.id))})]})]}),b("div",{className:"text-center space-y-3",children:[i("h1",{className:"text-5xl font-black tracking-[0.2em] text-transparent bg-clip-text bg-gradient-to-r from-indigo-200 to-white drop-shadow-lg",children:"ALCHEMY"}),b("div",{className:"flex items-center justify-center gap-3",children:[i("div",{className:"h-px w-8 bg-white/10"}),i("p",{className:"text-zinc-500 text-xs font-bold uppercase tracking-[0.3em]",children:"Lab v0.1  Experimental"}),i("div",{className:"h-px w-8 bg-white/10"})]})]}),i("div",{className:"grid grid-cols-4 gap-4 mt-8",children:[rf,sf,La,e1].map((n,r)=>i("button",{className:"p-5 rounded-2xl bg-zinc-900/40 border border-white/5 hover:bg-indigo-500/10 hover:border-indigo-500/30 transition-all group backdrop-blur-sm",children:i(n,{className:"w-6 h-6 text-zinc-500 group-hover:text-indigo-300 group-hover:scale-110 transition-transform duration-300",strokeWidth:1.5})},r))})]}),i("div",{className:"absolute bottom-10 text-[10px] font-bold uppercase tracking-widest text-zinc-700",children:"Awaiting Ingredients..."})]})},uy=()=>{const[e,t]=g.useState("gouache");return b("div",{className:"relative w-screen h-screen overflow-hidden bg-zinc-950 font-sans selection:bg-indigo-500/30",children:[i("div",{className:"w-full h-full",children:e==="gouache"?i(sy,{}):i(cy,{})}),i("div",{className:"fixed top-6 left-6 z-[100] group pointer-events-none",children:b("div",{className:"pointer-events-auto bg-zinc-900/80 backdrop-blur-md border border-white/10 rounded-full p-1 shadow-xl flex items-center gap-1 transition-all duration-300 hover:border-white/20 hover:scale-105",children:[i("button",{onClick:()=>t("gouache"),className:`p-2 rounded-full transition-all duration-200 ${e==="gouache"?"bg-zinc-100 text-zinc-950 shadow-sm":"text-zinc-500 hover:text-zinc-200 hover:bg-white/5"}`,title:"Gouache Studio",children:i(Co,{className:"w-4 h-4",strokeWidth:2.5})}),i("button",{onClick:()=>t("alchemy"),className:`p-2 rounded-full transition-all duration-200 ${e==="alchemy"?"bg-indigo-600 text-white shadow-[0_0_15px_rgba(79,70,229,0.4)]":"text-zinc-500 hover:text-indigo-300 hover:bg-indigo-500/10"}`,title:"Alchemy Lab",children:i(ef,{className:"w-4 h-4",strokeWidth:2.5})})]})})]})},mf=document.getElementById("root");if(!mf)throw new Error("Could not find root element to mount to");const dy=Ei.createRoot(mf);dy.render(i($f.StrictMode,{children:i(uy,{})}));
